<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>é‡å­¦SSM | ZZMR</title><meta name="keywords" content="SSM"><meta name="author" content="å®šè¥¿"><meta name="copyright" content="å®šè¥¿"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="é‡å­¦SSM"><meta name="application-name" content="é‡å­¦SSM"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="é‡å­¦SSM"><meta property="og:url" content="https://jimmy66886.github.io/posts/919c1073.html"><meta property="og:site_name" content="ZZMR"><meta property="og:description" content="SSMå…¥é—¨"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://img01.zzmr.buzz/img/20221017163344.png"><meta property="article:author" content="å®šè¥¿"><meta property="article:tag" content="ä¸ªäººåšå®¢"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img01.zzmr.buzz/img/20221017163344.png"><meta name="description" content="SSMå…¥é—¨"><link rel="shortcut icon" href="https://s2.loli.net/2022/09/02/6rUxGoewvp5hNlB.jpg"><link rel="canonical" href="https://jimmy66886.github.io/posts/919c1073"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//hm.baidu.com"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3e49559454d4932941707cbfc1458970";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"404 Not Found","backTitle":"500 Internal Server Error"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://twikoo.zzmr.buzz/',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: {"appId":"F9JLPTATA5","apiKey":"59b226541195bbf63bef817349ad87b5","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"è¾“å…¥å…³é”®è¯åæŒ‰ä¸‹å›è½¦æŸ¥æ‰¾","hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€","rightMenuMsgToTraditionalChinese":"è½¬ä¸ºç¹ä½“","rightMenuMsgToSimplifiedChinese":"è½¬ä¸ºç®€ä½“"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"ä½œè€…: å®šè¥¿","link":"é“¾æ¥: ","source":"æ¥æº: ZZMR","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","copySuccess":"å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'ZZMR',
  title: 'é‡å­¦SSM',
  isPost: true,
  isHome: false,
  isHighlightShrink: undefined,
  isToc: true,
  postUpdate: '2024-06-08 22:34:09',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/about-tag.css"><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="åŠ è½½å¤´åƒ" src="https://s2.loli.net/2022/09/02/6rUxGoewvp5hNlB.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://index.zzmr.buzz/" title="ä¸ªäººä¸»é¡µ"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/HOMEMESSAGE.png" alt="ä¸ªäººä¸»é¡µ"/><span class="back-menu-item-text">ä¸ªäººä¸»é¡µ</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.zzmr.buzz/" title="åšå®¢"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="åšå®¢"/><span class="back-menu-item-text">åšå®¢</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">å·¥å…·</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://tools.zzmr.buzz/" title="å›¾åºŠå®¹é‡"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/github-alt.png" alt="å›¾åºŠå®¹é‡"/><span class="back-menu-item-text">å›¾åºŠå®¹é‡</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">ZZMR</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/maps/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> å¯¼èˆª</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> æ¸¸æˆäººç”Ÿ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/staticIndex/test.html"><i class="anzhiyufont anzhiyu-icon-rocket faa-tada" style="font-size: 0.9em;"></i><span> èˆ”ç‹—æ—¥è®°</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="æœç´¢ğŸ”" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> æœç´¢</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="ä¸­æ§å°" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://img01.zzmr.buzz/img/chatpay.jpg" target="_blank"><img class="post-qr-code-img" alt="å¾®ä¿¡" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/chatpay.jpg"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://img01.zzmr.buzz/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" alt="æ”¯ä»˜å®" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/alipay.jpg"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><span class="author-content-item-title"> <span>æœ€æ–°è¯„è®º</span></span></div><div class="aside-list"><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">å…´è¶£ç‚¹</div><span class="author-content-item-title">å¯»æ‰¾ä½ æ„Ÿå…´è¶£çš„é¢†åŸŸ</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 1.05rem;">AOP<sup>1</sup></a><a href="/tags/Ajax/" style="font-size: 1.05rem;">Ajax<sup>1</sup></a><a href="/tags/Algolia/" style="font-size: 1.05rem;">Algolia<sup>1</sup></a><a href="/tags/Android/" style="font-size: 1.05rem;">Android<sup>1</sup></a><a href="/tags/Axios/" style="font-size: 1.05rem;">Axios<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 1.05rem;">Docker<sup>1</sup></a><a href="/tags/Electron/" style="font-size: 1.05rem;">Electron<sup>1</sup></a><a href="/tags/JVM/" style="font-size: 1.05rem;">JVM<sup>1</sup></a><a href="/tags/MySql/" style="font-size: 1.05rem;">MySql<sup>2</sup></a><a href="/tags/Promise/" style="font-size: 1.05rem;">Promise<sup>1</sup></a><a href="/tags/Redis/" style="font-size: 1.05rem;">Redis<sup>1</sup></a><a href="/tags/SSM/" style="font-size: 1.05rem;">SSM<sup>3</sup></a><a href="/tags/Shell/" style="font-size: 1.05rem;">Shell<sup>1</sup></a><a href="/tags/SpingBoot/" style="font-size: 1.05rem;">SpingBoot<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 1.05rem;">SpringCloud<sup>1</sup></a><a href="/tags/VsCode/" style="font-size: 1.05rem;">VsCode<sup>1</sup></a><a href="/tags/Vue/" style="font-size: 1.05rem;">Vue<sup>1</sup></a><a href="/tags/mag68/" style="font-size: 1.05rem;">mag68<sup>1</sup></a><a href="/tags/maven/" style="font-size: 1.05rem;">maven<sup>1</sup></a><a href="/tags/uni-app/" style="font-size: 1.05rem;">uni-app<sup>2</sup></a><a href="/tags/vue3/" style="font-size: 1.05rem;">vue3<sup>1</sup></a><a href="/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" style="font-size: 1.05rem;">ä¸»ä»å¤åˆ¶<sup>1</sup></a><a href="/tags/%E5%9B%BE%E5%BA%8A/" style="font-size: 1.05rem;">å›¾åºŠ<sup>1</sup></a><a href="/tags/%E5%9F%9F%E5%90%8D/" style="font-size: 1.05rem;">åŸŸå<sup>1</sup></a><a href="/tags/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/" style="font-size: 1.05rem;">å¯¹è±¡å­˜å‚¨<sup>1</sup></a><a href="/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 1.05rem;">å¹´åº¦æ€»ç»“<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91/" style="font-size: 1.05rem;">å¼€å‘<sup>1</sup></a><a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 1.05rem;">æ’åº<sup>1</sup></a><a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 1.05rem;">æ—…è¡Œ<sup>6</sup></a><a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 1.05rem;">æ‚è°ˆ<sup>1</sup></a><a href="/tags/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/" style="font-size: 1.05rem;">æ ‡ç­¾å¤–æŒ‚<sup>1</sup></a><a href="/tags/%E6%AF%95%E8%AE%BE/" style="font-size: 1.05rem;">æ¯•è®¾<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">çº¿ç¨‹<sup>1</sup></a><a href="/tags/%E7%BE%8E%E5%8C%96/" style="font-size: 1.05rem;">ç¾åŒ–<sup>1</sup></a><a href="/tags/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96/" style="font-size: 1.05rem;">è‹ç©¹å¤–å–<sup>1</sup></a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 1.05rem;">é›†åˆ<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 1.05rem;">é¢è¯•<sup>9</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>æ–‡ç« </span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>å½’æ¡£</span><a class="card-more-btn" href="/archives/" title="æŸ¥çœ‹æ›´å¤š">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">åäºŒæœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">åä¸€æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">ä¸ƒæœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">å…­æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">ä¸‰æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">äºŒæœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">ä¸€æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">åä¸€æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>ç¯‡</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="anzhiyu.switchDarkMode()" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="çƒ­è¯„å¼€å…³"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="éŸ³ä¹å¼€å…³"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/JAVA/" itemprop="url">JAVA</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/SSM/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>SSM</span></a></span></div></div><h1 class="post-title" itemprop="name headline">é‡å­¦SSM</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-12-17T12:59:50.000Z" title="å‘è¡¨äº 2022-12-17 20:59:50">2022-12-17</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-06-08T14:34:09.369Z" title="æ›´æ–°äº 2024-06-08 22:34:09">2024-06-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span id="" data-flag-title="é‡å­¦SSM"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="é˜…è¯»é‡">é˜…è¯»é‡:</span><span id="twikoo_visitors" title="è®¿é—®é‡"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºæ±‰ä¸­"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>æ±‰ä¸­</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://img01.zzmr.buzz/img/20221017163344.png"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://jimmy66886.github.io/posts/919c1073.html"><header><a class="post-meta-categories" href="/categories/JAVA/" itemprop="url">JAVA</a><a href="/tags/SSM/" tabindex="-1" itemprop="url">SSM</a><h1 id="CrawlerTitle" itemprop="name headline">é‡å­¦SSM</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">å®šè¥¿</span><time itemprop="dateCreated datePublished" datetime="2022-12-17T12:59:50.000Z" title="å‘è¡¨äº 2022-12-17 20:59:50">2022-12-17</time><time itemprop="dateCreated datePublished" datetime="2024-06-08T14:34:09.369Z" title="æ›´æ–°äº 2024-06-08 22:34:09">2024-06-08</time></header><h1 id="SSMçš„æ€è€ƒ"><a href="#SSMçš„æ€è€ƒ" class="headerlink" title="SSMçš„æ€è€ƒ"></a>SSMçš„æ€è€ƒ</h1><h2 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h2><p>é‡å­¦çš„æ€è€ƒ?</p>
<h3 id="SqlSessionUtilå·¥å…·ç±»"><a href="#SqlSessionUtilå·¥å…·ç±»" class="headerlink" title="SqlSessionUtilå·¥å…·ç±»"></a>SqlSessionUtilå·¥å…·ç±»</h3><p>å·¥å…·ç±»æ˜¯ä¸å¯å°‘çš„,è€Œåˆ›å»ºå·¥å…·ç±»çš„ä»£ç éƒ½æ˜¯ä¸€æ ·çš„,ç›´æ¥å¤åˆ¶ç²˜è´´å³å¯<br><em>ä¸‹é¢çš„æ˜¯å†™çš„ç¬¬ä¸€ä¸ªæµ‹è¯•ç±»</em>,å·¥å…·ç±»åœ¨ä¸‹é¢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.mybatis.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//    è·å–æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//    è·å–SqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">//    è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line">        <span class="comment">//    è·å–sqlä¼šè¯å¯¹è±¡SqlSession   æ˜¯MyBatisæä¾›çš„æ“ä½œæ•°æ®åº“çš„å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//SqlSession sqlSession = sqlSessionFactory.openSession();</span></span><br><span class="line">        <span class="comment">//æœ‰å‚è®¾ç½®ï¼Œå¡«trueï¼Œå³å¯å®ç°è‡ªåŠ¨æäº¤ï¼Œä¸ç”¨å†™   sqlSession.commit();</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//    è·å–UserMapperçš„ä»£ç†å®ç°å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//      å¸¸ç”¨çš„æ–¹æ³•</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//    è°ƒç”¨mapperæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå®ç°æ·»åŠ ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> mapper.insertUser();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æä¾›sqlä»¥åŠè¯­å¥çš„å”¯ä¸€æ ‡è¯†æ‰¾åˆ°sqlå¹¶æ‰§è¡Œ    å”¯ä¸€æ ‡è¯†ï¼šnamespace.sqlId</span></span><br><span class="line">        <span class="comment">//ä¸å¸¸ç”¨çš„æ–¹æ³•</span></span><br><span class="line">        <span class="comment">//int result = sqlSession.insert(&quot;com.zzmr.mybatis.mapper.UserMapper.insertUser&quot;);</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">        <span class="comment">//æäº¤äº‹åŠ¡</span></span><br><span class="line">        <span class="comment">//sqlSession.commit();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¼€å¯è‡ªåŠ¨æäº¤å°±è¡Œäº†</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­sqlSession</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å˜¿å˜¿å˜¿ä»£ç æ¥å’¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.mybatis.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtil</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//    è·å–æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è¾“å…¥æµ</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="comment">//    è·å–SqlSessionFactoryBuilderå¯¹è±¡</span></span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="comment">//    è·å–SqlSessionFactory</span></span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line">            <span class="comment">//    è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">            <span class="comment">//    è®¾ç½®è‡ªåŠ¨æäº¤</span></span><br><span class="line">            sqlSession = sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å…ˆæ˜¯åˆ›å»ºè¾“å…¥æµ,è¦æŠŠmybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶å¼•å…¥<br><strong>InputStream is &#x3D; Resources.getResourceAsStream(â€œmybatis-config.xmlâ€);</strong></li>
<li>è·å–SqlSessionFactoryBuilderå¯¹è±¡<br>æœ€ç»ˆç›®çš„æ˜¯è·å–SqlSessionå¯¹è±¡,è€Œè¿™ä¸ªSqlSessionFactoryBuilder,å°±ç›¸å½“äºåˆ›å»ºä¸€ä¸ªå·¥å‚çš„åœ°åŸº,æœ‰äº†è¿™ä¸ªåœ°åŸº,å°±å¯ä»¥åˆ›å»ºSqlSessionFactoryç±»,ä¹Ÿå°±ç›¸å½“äºåˆ›å»ºSessionçš„å·¥å‚<br><strong>SqlSessionFactoryBuilder sqlSessionFactoryBuilder &#x3D; new SqlSessionFactoryBuilder();</strong></li>
<li>è·å–SqlSessionFactoryç±»<br>éœ€è¦ä¸€æçš„å°±æ˜¯è¿™ä¸ªåœ°åŸºéœ€è¦æœ‰mybatisè¿™ä¸ªé…ç½®æ–‡ä»¶æ‰èƒ½ç›–æˆå·¥å‚,æ‰€ä»¥è¦ç”¨buildæ–¹æ³•(ä¼ å…¥isè¾“å…¥æµ)<br><strong>SqlSessionFactory sqlSessionFactory &#x3D; sqlSessionFactoryBuilder.build(is);</strong></li>
<li>å¼€å¯ä¼šè¯SqlSession<br>æ–¹æ³•åå«openSession,å¼€å¯ä¼šè¯å˜›,æ¯•ç«ŸSessionå•è¯çš„æ„æ€å°±æ˜¯ä¼šè¯,å¡«trueæ˜¯å› ä¸ºé‡Œé¢çš„å‚æ•°è¡¨ç¤ºçš„æ˜¯-æ˜¯å¦å¼€å¯è‡ªåŠ¨æäº¤äº‹åŠ¡,å¡«äº†true,å°±å¯ä»¥å°‘å†™ä¸€ä¸ªsqlSession.commit()çš„è¯­å¥<br><strong>sqlSession &#x3D; sqlSessionFactroy &#x3D; sqlSessionFactroy.openSession(true)</strong></li>
</ol>
<h3 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h3><p>è‡³äºMyBatisç¼–å†™é¡ºåº:<br>å…ˆæ˜¯å†™æ¥å£,å†å»å†™mapper,ç„¶åå°±å¯ä»¥æµ‹è¯•äº†</p>
<p>è¿˜æœ‰å°±æ˜¯è¦æ³¨æ„æŸ¥è¯¢æ“ä½œ,æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    User getUserById();--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    resultType è®¾ç½®ç»“æœé›†ç±»å‹ï¼Œæ—¢æŸ¥è¯¢çš„æ•°æ®è¦è½¬åŒ–ä¸ºçš„javaç±»å‹--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    resultMapï¼š è‡ªå®šä¹‰æ˜ å°„ï¼Œå¤„ç†å¤šå¯¹ä¸€æˆ–ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³» --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.zzmr.mybatis.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where id = 1;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç®€è¨€ä¹‹å°±æ˜¯ä¸€èˆ¬å°±ç”¨resultType<br>è¿™ä¸ªé‡Œé¢å†™çš„æ˜¯å…¨ç±»å,ä½†æ˜¯é…ç½®ä»¥ä¸‹â€”-<br>å°±å¯ä»¥åªå†™ä¸€ä¸ªç±»åäº†,åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®typeAliasesæ ‡ç­¾,ç„¶åå°±å¯ä»¥åœ¨resultTypeä¸­åªå†™ä¸€ä¸ªç±»åäº†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        type è®¾ç½®éœ€è¦èµ·åˆ«åçš„ç±»å‹</span></span><br><span class="line"><span class="comment">            alias   è®¾ç½®æŸä¸ªç±»å‹çš„åˆ«å</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;typeAlias type=&quot;com.zzmr.mybatis.pojo.User&quot; alias=&quot;abc&quot;&gt;&lt;/typeAlias&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å¦‚æœä¸å†™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆåˆ«åï¼Œä¹Ÿå°±æ˜¯ç±»åï¼Œä¸”ä¸åŒºåˆ†å¤§å°å†™--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;typeAlias type=&quot;com.zzmr.mybatis.pojo.User&quot;&gt;&lt;/typeAlias&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é€šè¿‡åŒ…è®¾ç½®ç±»å‹åˆ«åï¼ŒæŒ‡å®šåŒ…ä¸‹æ‰€æœ‰çš„ç±»æ‹¥æœ‰é»˜è®¤çš„åˆ«å    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.zzmr.mybatis.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å“¦å¯¹,ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜:<br>MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ˜¯æœ‰é¡ºåºçš„,è¦æŒ‰ç…§é¡ºåºæ¥é…ç½®:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MyBatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»è¦æŒ‰ç…§æŒ‡å®šçš„é¡ºåºé…ç½®</span><br><span class="line">The content of element type &quot;configuration&quot; must match</span><br><span class="line">&quot;(properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,</span><br><span class="line">objectWrapperFactory?,reflectorFactory?,plugins?,environments?,databaseIdProvider?,mappers?)&quot;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯è¯´å¼•å…¥propertiesæ–‡ä»¶çš„é…ç½®è¦åœ¨typeAliasesä¸Šé¢ä¸ª,ä¸ç„¶ä¼šæŠ¥é”™</p>
<p><strong>æœ‰æ—¶å€™å°±å¾ˆå¥‡æ€ª,å°±æ¯”å¦‚ä¸Šé¢çš„typeAlias,æ¯”å¦‚è¯´è®¾ç½®äº†åˆ«åabc,ä½†æ˜¯ä½ åªæ˜¯æ”¹çš„ä¸€ä¸ªåœ°æ–¹çš„,å‰©ä¸‹å¦ä¸€ä¸ªresultTypeé‡Œé¢è¿˜æ˜¯å†™çš„User,é‚£å³ä½¿åªæµ‹ä¸€ä¸ªæ–¹æ³•,å¦ä¸€ä¸ªè¿˜æ˜¯ä¼šæŠ¥é”™,è¦éƒ½æ”¹æˆabcæ‰è¡Œ,ä¸è¿‡å•Š,è¿˜æ˜¯ç›´æ¥åœ¨é‡Œé¢åŠ ä¸€ä¸ªpackageæ ‡ç­¾,nameä¸€è®¾ç½®,ä¸€ä¸ªåŒ…å°±å…¨éƒ¨æœ‰åˆ«åäº†,å¤šæ–¹ä¾¿</strong></p>
<p>è‡ªå·±å†™äº†ä¸€éEmpçš„,å†™æ˜¯å†™å‡ºæ¥äº†,ç°åœ¨å°±æœ‰ä¸€ä¸ªé—®é¢˜,å°±æ˜¯æ•°æ®åº“ä¸­çš„å­—æ®µåå’Œjavaä¸­çš„å±æ€§åå¿˜äº†æ€ä¹ˆè®¾ç½®å¯¹åº”çš„äº†,é©¼å³°ä»€ä¹ˆçš„,é—®é¢˜ä¸å¤§,åé¢ç»§ç»­çœ‹</p>
<p>è¿˜æœ‰ä¸ªå°ç»†èŠ‚å°±æ˜¯,åœ¨æ‰“åŒ…åçš„æ˜ å°„æ–‡ä»¶å’Œæ¥å£ä¼šåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹(å½“ç„¶å‰ææ˜¯é…ç½®æ—¶mapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶æ‰€åœ¨çš„åŒ…å¿…é¡»ä¸€è‡´æ‰è¡Œ,mapperæ¥å£çš„åå­—å’Œæ˜ å°„æ–‡ä»¶çš„åå­—å¿…é¡»ä¹Ÿæ˜¯ä¸€è‡´æ‰è¡Œ)</p>
<!-- ![1665308067699](image/ssm_thinking/1665308067699.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221009173430.png" alt="20221009173430"></p>
<p>åšæ¨¡æ¿å•¥çš„æ²¡å•¥è¯´çš„,å†è¯´ä»¥åå¤§æ¦‚ç‡ç”¨ä¸åˆ°MyBatisçš„é…ç½®æ–‡ä»¶(å¯èƒ½è¿˜ä¼šç”¨,ä½†æ˜¯é‡Œé¢çš„å†…å®¹ä¼šå°‘å¾—å¯æ€œ)</p>
<h3 id="MyBatisè·å–å‚æ•°"><a href="#MyBatisè·å–å‚æ•°" class="headerlink" title="MyBatisè·å–å‚æ•°"></a>MyBatisè·å–å‚æ•°</h3><p>æ­¥éª¤å°±æ˜¯:</p>
<ol>
<li>åœ¨æ–¹æ³•ä¸Šå†™ä¸Šå‚æ•°,æ¯”å¦‚æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User <span class="title function_">getUserByUsername</span><span class="params">(String username)</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨æ˜ å°„æ–‡ä»¶ä¸­,è¦ä»¥â€™${username}â€™æˆ–è€…#{}ä»£æ›¿ä¹‹å‰ç›´æ¥å†™çš„å‚æ•°,${}æœ¬è´¨ä¸Šå°±æ˜¯å­—ç¬¦ä¸²çš„æ‹¼æ¥,#{}å°±æ˜¯å ä½ç¬¦èµ‹å€¼,ä½¿ç”¨$æ—¶è¦æ³¨æ„æ‰‹åŠ¨åŠ ä¸ŠåŒå¼•å·,ä½¿ç”¨#å¹¶ä¸éœ€è¦</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        User getUserByUsername(String username);--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    select * from t_user where username = #&#123;username&#125;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByUsername&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where username = &#x27;$&#123;username&#125;&#x27;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„:è‹¥æ˜¯å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°,ä¸¤ä¸ªéƒ½å¯ä»¥,ä½†è¿˜æ˜¯å»ºè®®ç”¨#{}</strong><br>æ˜å¤©è§</p>
<h4 id="æ³¨æ„é—®é¢˜"><a href="#æ³¨æ„é—®é¢˜" class="headerlink" title="æ³¨æ„é—®é¢˜"></a>æ³¨æ„é—®é¢˜</h4><ol>
<li>å¦‚æœè¦æ˜¯è‡ªå·±å†™çš„mapé›†åˆ,é‚£è·å–çš„æ—¶å€™å¿…é¡»ä»¥è‡ªå·±è®¾ç½®çš„é”®è·å–,å¦‚æœæ˜¯ç›´æ¥æ”¾è¿›å»çš„æ•°å€¼,å¹¶æ²¡æœ‰è‡ªå·±å»ºé›†åˆ,é‚£è·å–å‚æ•°æ—¶åªèƒ½ä½¿ç”¨arg0,arg1,æˆ–è€…param1,param2çš„æ–¹å¼è·å–</li>
<li>ä»¥åè¿˜æ˜¯ç”¨#{}æ¯”è¾ƒå¤š,ä½†æ˜¯æŸäº›ç‰¹æ®Šçš„æƒ…å†µ,è¿˜æ˜¯å¿…é¡»ä½¿ç”¨${}çš„</li>
<li>å¦‚æœæ˜¯å®ä½“ç±»ç±»å‹çš„å‚æ•°,å°±æ¯”å¦‚è¯´:</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertUser</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="literal">null</span>, <span class="string">&quot;zzmr1&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">33</span>, <span class="string">&quot;å¥³&quot;</span>, <span class="string">&quot;0123@163.com&quot;</span>);</span><br><span class="line">    mapper.insertUser(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æƒ…å†µ,é‚£åœ¨æ˜ å°„æ–‡ä»¶ä¸­,å°±è¦å†™æˆè¿™ç§å½¢å¼,<strong>å¯ä»¥é€šè¿‡å®ä½“ç±»ç±»å‹çš„å±æ€§åæ¥è·å–å±æ€§å€¼,å±æ€§åå¯ä¸æ˜¯ç®€å•çš„æˆå‘˜å˜é‡,è€Œæ˜¯set&#x2F;getæ–¹æ³•åå»æ‰set&#x2F;getå‰©ä¸‹çš„å†…å®¹(å…¶å®æ ¹æˆå‘˜å˜é‡åŒºåˆ«ä¸å¤§)</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    void insertUser(User user);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span>&gt;</span></span><br><span class="line">    insert into t_user values (null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>è¿˜æœ‰æ³¨è§£çš„å½¢å¼</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ³¨è§£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">User <span class="title function_">getUserByUserNameByParam</span><span class="params">(<span class="meta">@Param(&quot;ffff&quot;)</span> String username)</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    User getUserByUserNameByParam(@Param(&quot;username&quot;) String username);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByUserNameByParam&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user where username = #&#123;ffff&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè·å–å‚æ•°çš„æ—¶å€™å°±æ˜¯ç›´æ¥ä½¿ç”¨çš„Paramæ³¨è§£é‡Œé¢çš„å€¼(value) valueæ˜¯ä»€ä¹ˆ(ffff) åœ¨æ˜ å°„æ–‡ä»¶ä¸­å°±ä»¥ä»€ä¹ˆ(ffff)è·å–</p>
<h3 id="å„ç§æŸ¥è¯¢ç›¸å…³"><a href="#å„ç§æŸ¥è¯¢ç›¸å…³" class="headerlink" title="å„ç§æŸ¥è¯¢ç›¸å…³"></a>å„ç§æŸ¥è¯¢ç›¸å…³</h3><p><strong>è‹¥sqlè¯­å¥æŸ¥è¯¢çš„ç»“æœä¸ºå¤šæ¡æ—¶,ä¸€å®šä¸èƒ½ä»¥å®ä½“ç±»ç±»å‹ä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼,å¦åˆ™ä¼šå‡ºç°TooManyResultsExceptionå¼‚å¸¸,è‹¥ç»“æœåªæœ‰ä¸€æ¡,å¯ä»¥ä»¥å®ä½“ç±»ç±»å‹,ä¹Ÿå¯ä»¥ä½¿ç”¨listé›†åˆä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼</strong></p>
<p><strong>æŸ¥è¯¢ç”¨æˆ·æ€»æ•°é‡</strong><br>æ¥å£:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢ç”¨æˆ·çš„æ€»æ•°é‡</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Integer <span class="title function_">getCount</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p>æ˜ å°„æ–‡ä»¶:<br><strong>é‡ç‚¹å°±æ˜¯ç±»å‹åˆ«å,å¤§å·®å°ä¸å·® Integerå¯ä»¥å†™æˆint&#x2F;INT&#x2F;Integer&#x2F;integeréƒ½è¡Œ</strong></p>
<!-- ![1665400301449](image/ssm_thinking/1665400301449.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221010191154.png" alt="20221010191154"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        Integer getCount();--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    MyBatis ä¸­ä¸ºjavaä¸­å¸¸ç”¨çš„ç±»å‹è®¾ç½®äº†ç±»å‹åˆ«å</span></span><br><span class="line"><span class="comment">        Integer ï¼š Integer</span></span><br><span class="line"><span class="comment">        int ï¼› int_integer</span></span><br><span class="line"><span class="comment">        Map : map</span></span><br><span class="line"><span class="comment">        String : string</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select count(*) from t_user;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">SelectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SelectMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> mapper.getCount();</span><br><span class="line">    System.out.println(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥è¯¢ç»“æœä¸ºmap</strong><br>ä»¥åçš„æŸ¥è¯¢å¤§éƒ½ä¸ä¼šæ˜¯ä¸€ä¸ªå®ä½“ç±»,ç»å¸¸ä½¿ç”¨mapé›†åˆæ¥ä½œä¸ºè¿”å›å€¼,è‹¥mapé›†åˆä¸­æŸä¸€ä¸ªå€¼ä¸ºç©º,é‚£è¿™ä¸ªå€¼å¹¶ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥</p>
<p>è¿™ä¸ªList&lt;Map&lt;String,Object&gt;&gt;å°±å¾ˆå¦™<br>ç”¨é‚£ä»€ä¹ˆ@MapKeyæˆ‘æ˜¯æ„Ÿè§‰æ²¡æœ‰è¿™ä¸ªæ–¹ä¾¿<br>@MapKeyç›¸å½“äºMapé›†åˆçš„å¥—å¨ƒ,å¯ä»¥å°†æŸ¥è¯¢çš„æ¯ä¸ªmapé›†åˆæ”¾åœ¨ä¸€ä¸ªå¤§çš„mapé›†åˆä¸­<br>ä»¥åç”¨çš„å¤šçš„è¿˜æ˜¯å°†Mapé›†åˆæ”¾åœ¨Listé›†åˆä¸­æ¥å®ç°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå·±å†™çš„æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯å¹¶è¿”å›ä¸ºmap</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">getAllUserToMap</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    List&lt;Map&lt;String,Object&gt;&gt; getAllUserToMap();--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getAllUserToMap&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        select * from t_user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•è‡ªå·±å†™çš„æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯è½¬åŒ–ä¸ºmap</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetAllUserToMap</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">SelectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SelectMapper.class);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; alluser = mapper.getAllUserToMap();</span><br><span class="line">    <span class="keyword">for</span> (Map&lt;String, Object&gt; map : alluser) &#123;</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç‰¹æ®ŠæŸ¥è¯¢"><a href="#ç‰¹æ®ŠæŸ¥è¯¢" class="headerlink" title="ç‰¹æ®ŠæŸ¥è¯¢"></a>ç‰¹æ®ŠæŸ¥è¯¢</h3><h4 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h4><p>è™½ç„¶ä»¥åå¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯ä½¿ç”¨#{}æ¥å®ç°,ä½†æ˜¯åƒæ¨¡ç³ŠæŸ¥è¯¢,è¿˜æ˜¯å¯ä»¥ä½¿ç”¨${}çš„,ä½†æ˜¯ç”¨çš„ä¹Ÿä¸å¤š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    è¿™ä¸ªæ—¶å€™ç”¨$&#123;&#125;å°±è¦æ¯”#&#123;&#125;æ–¹ä¾¿äº†--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å¦‚æœç›´æ¥å†™æˆâ€˜#&#123;mohu&#125;â€™ å› ä¸º#å®é™…ä¸Šæ˜¯å ä½ç¬¦èµ‹å€¼ï¼Œç›¸å½“äºä¸€ä¸ªé—®å¥½?,è¿™æ—¶ä¼šè¢«è§£ææˆ&#x27;%?%&#x27;,ä¼šè¢«å½“æˆå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                select * from t_user where username like &#x27;%$&#123;mohu&#125;%&#x27;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    select * from t_user where username like concat(&#x27;%&#x27;,#&#123;mohu&#125;,&#x27;%&#x27;)--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    è¿™æ—¶ç”±äºæˆ‘ä»¬è®¾ç½®äº†resultTypeï¼Œç¨‹åºä¼šè°ƒç”¨setæ–¹æ³•ï¼Œè€Œæ­¤æ—¶æ‰¾ä¸åˆ°èµ‹å€¼çš„åœ°æ–¹ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    List&lt;User&gt; getUserByLikeByMe(@Param(&quot;mohu&quot;) String mohu);--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByLikeByMe&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">            select * from t_user where username like &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ä»¥åè¿˜æ˜¯ç”¨è¿™ä¸ªæ¯”è¾ƒå¤š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user <span class="keyword">where</span> username <span class="keyword">like</span> &quot;%&quot;#&#123;mohu&#125;&quot;%&quot;</span><br></pre></td></tr></table></figure>

<h4 id="æ‰¹é‡åˆ é™¤"><a href="#æ‰¹é‡åˆ é™¤" class="headerlink" title="æ‰¹é‡åˆ é™¤"></a>æ‰¹é‡åˆ é™¤</h4><p>è¿™ç§æƒ…å†µå°±æ˜¯è¦ç”¨${}äº†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        void deleteByMe(@Param(&quot;ids&quot;) String ids);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByMe&quot;</span>&gt;</span></span><br><span class="line">        delete from t_user where id in ($&#123;ids&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœç”¨#{},å› ä¸ºæ˜¯åœ¨()é‡Œ,è€Œ()é‡Œæ˜¯ä¸èƒ½åŠ å•å¼•å·çš„,æ‰€ä»¥ä¼šæŠ¥é”™,è€Œä½¿ç”¨${}å°±ä¸ä¼šå‡ºé—®é¢˜<br>å½“ç„¶è¿™ä¸æ˜¯å”¯ä¸€è§£,åˆ°åé¢å­¦åˆ°foreachæ—¶ä¼šæœ‰å…¶ä»–æ–¹æ³•</p>
<h4 id="åŠ¨æ€è®¾ç½®è¡¨å"><a href="#åŠ¨æ€è®¾ç½®è¡¨å" class="headerlink" title="åŠ¨æ€è®¾ç½®è¡¨å"></a>åŠ¨æ€è®¾ç½®è¡¨å</h4><p>è¡¨åæ˜¯ä¸èƒ½åŠ ä¸Šå•å¼•å·çš„<br>æ‰€ä»¥è¿™é‡Œä¹Ÿåªèƒ½ä½¿ç”¨$ç¬¦</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    List&lt;User&gt; getUserListByMe(@Param(&quot;tableName&quot;) String tableName);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserListByMe&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from $&#123;tableName&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetUserListByMe</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">SpecialSQLMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SpecialSQLMapper.class);</span><br><span class="line">    List&lt;User&gt; t_user = mapper.getUserListByMe(<span class="string">&quot;t_user&quot;</span>);</span><br><span class="line">    t_user.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è·å–è‡ªå¢çš„ä¸»é”®"><a href="#è·å–è‡ªå¢çš„ä¸»é”®" class="headerlink" title="è·å–è‡ªå¢çš„ä¸»é”®"></a>è·å–è‡ªå¢çš„ä¸»é”®</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥Userå¹¶è¿”å›ä¸»é”®å€¼ï¼ˆidï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertUserByMe</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure>

<p>useGeneratedKeys    è¡¨ç¤ºå½“å‰æ·»åŠ åŠŸèƒ½ä½¿ç”¨è‡ªå¢çš„ä¸»é”®<br>keyProperties        å°†æ·»åŠ çš„æ•°æ®çš„è‡ªå¢ä¸»é”®ä¸ºå®ä½“ç±»å‹çš„å‚æ•°çš„å±æ€§èµ‹å€¼</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        void insertUserByMe(User user);--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    ä¸ºä»€ä¹ˆä¸åœ¨å†™åœ¨è¿”å›å€¼é‡Œï¼Ÿå› ä¸ºå¢ä¸Šæ”¹çš„è¿”å›å€¼å›ºå®šçš„ï¼Œéƒ½æ˜¯å—å½±å“çš„è¡Œæ•°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUserByMe&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">        insert into t_user values (null,#&#123;username&#125;,#&#123;password&#125;,#&#123;age&#125;,#&#123;gender&#125;,#&#123;email&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertByMe</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">SpecialSQLMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(SpecialSQLMapper.class);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="literal">null</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;010203&quot;</span>, <span class="number">23</span>, <span class="string">&quot;ç”·&quot;</span>, <span class="string">&quot;121@qq.com&quot;</span>);</span><br><span class="line">    mapper.insertUserByMe(user);</span><br><span class="line">    System.out.println(user.getId());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å°±å¯ä»¥è·å–åˆ°userçš„idå€¼:</p>
<!-- ![1665540998647](image/ssm_thinking/1665540998647.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221012101641.png" alt="20221012101641"></p>
<h3 id="è‡ªå®šä¹‰æ˜ å°„resultMap"><a href="#è‡ªå®šä¹‰æ˜ å°„resultMap" class="headerlink" title="è‡ªå®šä¹‰æ˜ å°„resultMap"></a>è‡ªå®šä¹‰æ˜ å°„resultMap</h3><p>è¿™ä¸ªå°±æ˜¯è®¾ç½®é‚£ä¸ªé©¼å³°æ˜ å°„<br>å‰é¢çš„æµ‹è¯•éƒ½æ˜¯æŠŠç±»çš„å±æ€§åå†™æˆè·ŸMysqlåˆ—åä¸€è‡´äº†<br>è€Œmysqlä¸­ä¹ æƒ¯ä»¥_ä¸ºåˆ†å‰²,Javaä¸­æ˜¯é©¼å³°<br>è¿™æ—¶å°±è¦è®¾ç½®ä¸€ä¸ªæ˜ å°„-åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶æ–°å»ºä¸¤ä¸ªè¡¨:t_empå’Œt_dept<br>t_empé‡Œçš„å­—æ®µ:</p>
<ol>
<li>emp_id</li>
<li>emp_name</li>
<li>age</li>
<li>gender</li>
<li>dept_id<br>t_dept</li>
<li>dept_id</li>
<li>dept_name</li>
</ol>
<p><strong>å½“å­—æ®µåå’Œå±æ€§åä¸ä¸€è‡´æ—¶,å¦‚ä½•å¤„ç†æ˜ å°„å…³ç³»</strong></p>
<ol>
<li>ä¸ºæŸ¥è¯¢çš„å­—æ®µè®¾ç½®åˆ«å,å’ŒJavaä¸­çš„å±æ€§åä¿æŒä¸€è‡´(ä¸ºä»€ä¹ˆè®¾ç½®åˆ«åå’ŒJavaä¸­çš„ä¸€è‡´å°±è¡Œäº†å‘¢?å› ä¸ºè®¾ç½®äº†åˆ«å,æŸ¥è¯¢å‡ºçš„ç»“æœå°±ä¼šä»¥åˆ«åçš„å½¢å¼åˆ—å‡ºæ¥,è¿™æ—¶ä¸Javaç±»ä¸­çš„å±æ€§åä¸€è‡´,MyBatiså°±å¯ä»¥æ¥æ”¶åˆ°MySqlæŸ¥è¯¢å‡ºçš„ç»“æœ)</li>
<li>å½“å­—æ®µç¬¦åˆMySqlçš„è¦æ±‚-ä½¿ç”¨çš„æ˜¯ä¸‹åˆ’çº¿,è€Œå±æ€§åç¬¦åˆJavaçš„è¦æ±‚-ä½¿ç”¨é©¼å³°<br>æ­¤æ—¶å¯ä»¥åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä¸€ä¸ªå…¨å±€é…ç½®,å¯ä»¥è‡ªåŠ¨å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯æŠŠemp_id æ˜ å°„ä¸ºempId<br>æŠŠemp_nameæ˜ å°„ä¸ºempName<br>ä»¥åç”¨çš„å¤šçš„åº”è¯¥å°±æ˜¯è¿™ä¸€ç§äº†,æ–¹ä¾¿åˆå¥½ç”¨<br>3. ä½¿ç”¨resultMapè‡ªå®šä¹‰æ˜ å°„å¤„ç†<br>ä¸¤ä¸ªå±æ€§:<br>id: å”¯ä¸€æ ‡è¯†<br>type: å¤„ç†æ˜ å°„å…³ç³»çš„å®ä½“ç±»çš„ç±»å‹<br>å¸¸ç”¨çš„æ ‡ç­¾:<br>    id: å¤„ç†ä¸»é”®å’Œå®ä½“ç±»ä¸­å®ç°çš„å…ƒç´ å…³ç³»<br>    result: å¤„ç†æ™®é€šå­—æ®µå’Œå®ä½“ç±»ä¸­å±æ€§çš„æ˜ å°„å…³ç³»<br>    column: è®¾ç½®æ˜ å°„å…³ç³»ä¸­å­—æ®µå,å¿…é¡»æ˜¯sqlæŸ¥è¯¢å‡ºçš„æŸä¸ªå­—æ®µ<br>    property: è®¾ç½®æ˜ å°„å…³ç³»ä¸­çš„å±æ€§çš„å±æ€§å,å¿…é¡»æ˜¯å¤„ç†çš„å®ä½“ç±»ç±»å‹ä¸­çš„å±æ€§å<br>    association: å¤„ç†å¤šå¯¹ä¸€çš„æ˜ å°„å…³ç³»(å¤„ç†å®ä½“ç±»ç±»å‹çš„å±æ€§)<br>    collection: å¤„ç†ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»(å¤„ç†é›†åˆç±»å‹çš„å±æ€§)<br>è™½ç„¶å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•å®ç°,ä½†æ˜¯æˆ‘æ„Ÿè§‰å¥½éº»çƒ¦å•Š,æ¯”å¦‚:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByEmpId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empResultMap&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp where emp_id = #&#123;empId&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="å¤šå¯¹ä¸€çš„æ˜ å°„æƒ…å†µ"><a href="#å¤šå¯¹ä¸€çš„æ˜ å°„æƒ…å†µ" class="headerlink" title="å¤šå¯¹ä¸€çš„æ˜ å°„æƒ…å†µ"></a>å¤šå¯¹ä¸€çš„æ˜ å°„æƒ…å†µ</h4><p>åˆæ˜¯ä¸‰ç§æ–¹å¼:</p>
<ol>
<li>ç›´æ¥ä½¿ç”¨resultMapå¤„ç†</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empAndDeptResultMapOne&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dept.deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¤„ç†äº†æ¯ä¸ªå­—æ®µä»¥åŠDeptä¸­çš„å±æ€§å¯¹åº”å…³ç³»,è¿™é‡Œè¦æ³¨æ„dept_nameå’Œdept.deptIdè¿™ç§å¯¹åº”å…³ç³»</p>
<ol start="2">
<li>ä½¿ç”¨association</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empAndDeptResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å¤„ç†å¤šå¯¹ä¸€çš„æ˜ å°„å…³ç³»ï¼ˆå¤„ç†å®ä½“ç±»ç±»å‹çš„å±æ€§ï¼‰</span></span><br><span class="line"><span class="comment">            property è®¾ç½®éœ€è¦å¤„ç†æ˜ å°„å…³ç³»çš„å±æ€§çš„å±æ€§å</span></span><br><span class="line"><span class="comment">            javaType  è®¾ç½®è¦å¤„ç†çš„å±æ€§çš„ç±»å‹</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯æˆ‘è¯´å®è¯,è¿™ç§å®é™…ä¸Šæ›´éº»çƒ¦äº†ä¸€ç‚¹,ä½†æ˜¯æ¯”ä¸Šä¸€ç§çœ‹èµ·æ¥æ›´æ¸…æ™°</p>
<ol start="3">
<li>åˆ†æ­¥æŸ¥è¯¢</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empAndDeptByStepResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        property  è®¾ç½®éœ€è¦å¤„ç†æ˜ å°„å…³ç³»çš„å±æ€§çš„å±æ€§å</span></span><br><span class="line"><span class="comment">            select    è®¾ç½®åˆ†æ­¥æŸ¥è¯¢çš„sqlçš„å”¯ä¸€æ ‡è¯†</span></span><br><span class="line"><span class="comment">            column    å°†æŸ¥è¯¢å‡ºçš„æŸä¸ªå­—æ®µä½œä¸º åˆ†æ­¥æŸ¥è¯¢çš„sqlæ¡ä»¶</span></span><br><span class="line"><span class="comment">            fetchType  åœ¨å¼€å¯äº†å»¶è¿ŸåŠ è½½çš„ç¯å¢ƒä¸­ï¼Œé€šè¿‡è¯¥å±æ€§è®¾ç½®å½“å‰çš„åˆ†æ­¥æŸ¥è¯¢æ˜¯å¦ä½¿ç”¨å»¶è¿ŸåŠ è½½</span></span><br><span class="line"><span class="comment">            fetchType   eagerç«‹å³åŠ è½½       lazyå»¶è¿ŸåŠ è½½</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">fetchType</span>=<span class="string">&quot;eager&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">select</span>=<span class="string">&quot;com.zzmr.mybatis.mapper.DeptMapper.getEmpAndDeptByStepTwo&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    Emp getEmpAndDeptByStepOne(@Param(&quot;empId&quot;) Integer empId);--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByStepOne&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empAndDeptByStepResultMap&quot;</span>&gt;</span></span><br><span class="line">         select *</span><br><span class="line">         from t_emp</span><br><span class="line">         where emp_id = #&#123;empId&#125;;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ³¨æ„,ä¸‹é¢è¿™ä¸ªstepTwoæ˜¯åœ¨DeptMapperé‡Œé¢ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    Dept getEmpAndDeptByStepTwo(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpAndDeptByStepTwo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from t_dept</span><br><span class="line">        where dept_id = #&#123;deptId&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å°†ä¸¤ä¸ªsqlå…³è”åœ¨ä¸€èµ·å°±æ˜¯åœ¨associationæ ‡ç­¾ä¸­çš„selectå±æ€§ä¸­,è¦å…³è”æ–¹æ³•å<br>è€Œcolumnè¿™ä¸ªå±æ€§,æ˜¯ç”¨æ¥è®¾ç½®ä¸‹ä¸€ä¸ªæŸ¥è¯¢çš„æ¡ä»¶,æ¯”å¦‚è¿™é‡ŒæŠŠdept_idæ”¾è¿›å»,ä¸‹ä¸€ä¸ªæŸ¥è¯¢å°±æ˜¯ç”¨è¿™é‡Œä¼ è¿‡æ¥çš„å‚æ•°æŸ¥è¯¢<br><strong>é‚£å°±æ˜¯,ä»¥åç”¨åˆ°äº†æ¥å¤åˆ¶</strong></p>
<p><strong>ä½†æ˜¯é—®é¢˜ä¹Ÿå‡ºç°äº†,è¿™ä¸ªåˆ†æ­¥æŸ¥è¯¢å¾ˆæ˜æ˜¾æ¯”å‰é¢ä¸¤ç§è¦éº»çƒ¦å¾ˆå¤š,é‚£å®ƒçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆå‘¢</strong><br>ä¼˜ç‚¹æ˜¯<strong>å»¶è¿ŸåŠ è½½</strong><br>å¼€å¯å»¶è¿ŸåŠ è½½è¦åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„settingsæ ‡ç­¾é‡Œ(å’Œé©¼å³°æ˜ å°„æ˜¯åŒä¸€ä¸ªåœ°æ–¹)æ·»åŠ :</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        å¼€å¯å»¶è¿ŸåŠ è½½--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æŒ‰éœ€åŠ è½½--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;aggressiveLazyLoading&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®äº†è¿™ä¸¤ä¸ªæ ‡ç­¾å,å°±æ˜¯å…¨å±€é…ç½®äº†,è€Œè¦æƒ³è®©æŸä¸ªåˆ†æ­¥æŸ¥è¯¢è¿˜æ˜¯ç«‹å³åŠ è½½çš„è¯,å°±å¯ä»¥<strong>åœ¨associationæ ‡ç­¾ä¸­è®¾ç½®fetchTypeå±æ€§</strong><br>è®¾ç½®fetchType&#x3D;â€eagerâ€,å°±ä¼šç«‹å³åŠ è½½<br>é»˜è®¤æ˜¯lazy,å°±æ˜¯å»¶è¿ŸåŠ è½½,<strong>å½“ç„¶,ä½¿ç”¨è¿™ä¸ªæ ‡ç­¾çš„å‰ææ˜¯è®¾ç½®äº†å…¨å±€é…ç½®</strong></p>
<h4 id="ä¸€å¯¹å¤šçš„æ˜ å°„æƒ…å†µ"><a href="#ä¸€å¯¹å¤šçš„æ˜ å°„æƒ…å†µ" class="headerlink" title="ä¸€å¯¹å¤šçš„æ˜ å°„æƒ…å†µ"></a>ä¸€å¯¹å¤šçš„æ˜ å°„æƒ…å†µ</h4><p>ä¸€å¯¹å¤šæ²¡æœ‰çº§è”,åªæœ‰collectionæ ‡ç­¾å’Œåˆ†æ­¥æŸ¥è¯¢<br>è¿™é‡Œè¦æ³¨æ„collectionæ ‡ç­¾ä¸­çš„ofTypeå±æ€§,è¦å†™ä¸Š<strong>é›†åˆå­˜å‚¨çš„ç±»å‹</strong><br><strong>collectionæ ‡ç­¾å®ç°æ–¹å¼</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptAndEmpResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ofType  è®¾ç½®é›†åˆç±»å‹çš„å±æ€§ä¸­å­˜å‚¨çš„æ•°æ®çš„ç±»å‹--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;emp_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;emp_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    Dept getDeptAndEmpByDeptId(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptAndEmpByDeptId&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptAndEmpResultMap&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from t_dept LEFT JOIN t_emp on t_dept.dept_id = t_emp.dept_id </span><br><span class="line">        where t_dept.dept_id = #&#123;deptId&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>åˆ†å¸ƒæŸ¥è¯¢</strong><br>é¦–å…ˆåœ¨éƒ¨é—¨mapperä¸­å†™ä¸Šç¬¬ä¸€æ­¥æŸ¥è¯¢</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;deptAndEmpResultMapByStep&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;emps&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">select</span>=<span class="string">&quot;com.zzmr.mybatis.mapper.EmpMapper.getDeptAndEmpByStepTwo&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"><span class="comment">&lt;!--    Dept getDeptAndEmpByStepOne(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptAndEmpByStepOne&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;deptAndEmpResultMapByStep&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from t_dept</span><br><span class="line">        where dept_id = #&#123;deptId&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å‘˜å·¥mapperä¸­å†™ä¸Šç¬¬äºŒæ­¥æŸ¥è¯¢</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    List&lt;Emp&gt; getDeptAndEmpByStepTwoByMe(@Param(&quot;deptId&quot;) Integer deptId);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDeptAndEmpByStepTwoByMe&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        select * from t_emp where dept_id = #&#123;deptId&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>å½“ç„¶å¯¹åº”çš„æ¥å£ä¸­éƒ½è¦æœ‰ç›¸åº”çš„æŠ½è±¡æ–¹æ³•</strong><br>ResultMapçœ‹å®Œå’¯,è¿˜æ˜¯æŒºæœ‰ç”¨çš„,ä½†æ˜¯ä»¥åä¸çŸ¥é“åˆ°åº•ä¼šä»¥ä»€ä¹ˆä¸ºå¼€å‘åŸºç¡€<br>æ€»ç»“ä¸€å¥è¯,å¦‚æœæ˜¯å¤šå¯¹ä¸€,é‚£å°±æ˜¯association,å¦‚æœæ˜¯ä¸€å¯¹å¤š,é‚£å°±æ˜¯collection,å½“ç„¶ä¸å‡†ç¡®,ç†è§£å°±å¥½<br>æ˜å¤©è§!</p>
<h3 id="åŠ¨æ€Sql"><a href="#åŠ¨æ€Sql" class="headerlink" title="åŠ¨æ€Sql"></a>åŠ¨æ€Sql</h3><p>å°±æ˜¯æ ¹æ®ç‰¹å®šæ¡ä»¶å»æ‹¼æ¥Sqlè¯­å¥ä»¥å®ç°æŸç§æ•ˆæœ</p>
<p>è¿™é‡Œçš„ä¸»è¦é—®é¢˜å°±æ˜¯Sqlæ‹¼æ¥æ—¶å‡ºç°çš„bug,<br>æ¯”å¦‚å¦‚æœç›´æ¥ä½¿ç”¨whereå…³é”®å­—å†™åœ¨æœ€å‰é¢,è€Œåé¢çš„æ¡ä»¶å…¨éƒ½æ˜¯æ— æ•ˆçš„,é‚£å°±ä¼šå¯¼è‡´å¤šäº†ä¸€ä¸ªwhereå…³é”®å­—,è¿™æ—¶sqlè¯­å¥å°±é”™äº†<br>è§£å†³åŠæ³•:</p>
<h4 id="ä½¿ç”¨whereæ ‡ç­¾"><a href="#ä½¿ç”¨whereæ ‡ç­¾" class="headerlink" title="ä½¿ç”¨whereæ ‡ç­¾"></a>ä½¿ç”¨whereæ ‡ç­¾</h4><p>å°±æ˜¯ä¼šè‡ªåŠ¨æ·»åŠ whereå…³é”®å­—,å¦‚æœåé¢çš„æ¡ä»¶éƒ½ä¸æˆç«‹,åˆ™ä¸ä¼šæ·»åŠ whereå…³é”®å­—,è¿˜æœ‰å»æ‰æ¡ä»¶å‰çš„andå…³é”®å­—,<strong>ä½†æ˜¯ä¸èƒ½å»æ‰åé¢çš„and</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        select * from t_emp</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                emp_name = #&#123;empName&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and age = #&#123;age&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null and gender != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and gender = #&#123;gender&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>é‚£å¦‚æœä»¥åç”¨çš„è¯,å°±ç”¨whereæ ‡ç­¾å§,æ„Ÿè§‰trimæŒºéº»çƒ¦çš„,å“ˆå“ˆå“ˆå“ˆè‰¹,å°±æ˜¯è¦æ³¨æ„,ç¬¬ä¸€ä¸ªifé‡Œé¢ä¸èƒ½åŠ ä¸Šand,å…¶ä»–å°±æ²¡å•¥äº†</strong><br>ä½†æ˜¯trimæ ‡ç­¾è¿˜æ˜¯è¦å­¦çš„å•Š</p>
<h4 id="trimæ ‡ç­¾"><a href="#trimæ ‡ç­¾" class="headerlink" title="trimæ ‡ç­¾"></a>trimæ ‡ç­¾</h4><p>é¦–å…ˆæ˜¯trimæ ‡ç­¾çš„å››ä¸ªå±æ€§<br>prefixï¼Œsuffix  åœ¨æ ‡ç­¾ä¸­å†…å®¹å‰&#x2F;åé¢æ·»åŠ æŒ‡å®šå†…å®¹<br>prefixOverrides,suffixOverriders åœ¨æ ‡ç­¾ä¸­å†…å®¹å‰&#x2F;åé¢å»æ‰æŒ‡å®šå†…å®¹<br>prefix åœ¨æ ‡ç­¾ä¸­å†…å®¹å‰æ·»åŠ æŒ‡å®šå†…å®¹:<br>æ¯”å¦‚è¯´ä¸‹é¢çš„,ç”¨trimæ ‡ç­¾ä»£æ›¿whereæ ‡ç­¾,</p>
<ol>
<li>ä½¿ç”¨prefix&#x3D;â€whereâ€ç»™sqlæ·»åŠ whereå…³é”®å­—</li>
<li>ä½¿ç”¨suffixOverrides&#x3D;â€andâ€è‡ªåŠ¨åˆ é™¤è¯­å¥åå¤šä½™çš„and</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    select * from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            emp_name = #&#123;empName&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            age = #&#123;age&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null and gender != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            gender = #&#123;gender&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="choose-when-otherwiseæ ‡ç­¾"><a href="#choose-when-otherwiseæ ‡ç­¾" class="headerlink" title="choose,when,otherwiseæ ‡ç­¾"></a>choose,when,otherwiseæ ‡ç­¾</h4><p>ç”¨çš„ä¸å¤š,ä½†æ˜¯è¦çœ‹å¾—æ˜ç™½<br>é€†å‘å·¥ç¨‹é‡Œé¢è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç å°±ä¼šæœ‰å¾ˆå¤šçš„choose,when,otherwise<br><strong>è·Ÿif.else.if.elseå¾ˆåƒ</strong><br><strong>whenæœ€å°‘è®¾ç½®ä¸€ä¸ª,otherwiseæœ€å¤šè®¾ç½®ä¸€ä¸ª</strong></p>
<p>è‹¥ç¬¬ä¸€ä¸ªwhenæ¡ä»¶ç¬¦åˆ,é‚£åé¢çš„æƒ…å†µéƒ½ä¸ä¼šæ‰§è¡Œäº†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    List&lt;Emp&gt; getEmpByChoose(Emp emp);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByChoose&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">        select * from t_emp</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;empName!=null and empName != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                    emp_name = #&#123;empName&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;age!=null and age!=&#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                    age = #&#123;age&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;gender!=null and gender != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">                    gender = #&#123;gender&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚è¿™ä¸ª,å½“æµ‹è¯•é‡Œå†™ä¸Š:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetEmpByChoose</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">DynamicSQLMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="number">21</span> , <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    List&lt;Emp&gt; list = mapper.getEmpByChoose(emp);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶,å› ä¸ºç¬¬ä¸€ä¸ªâ€å¼ ä¸‰â€å·²ç»åŒ¹é…ä¸Šäº†,é‚£åé¢çš„çš„21,è¿˜æœ‰â€ç”·â€å°±æ²¡ç”¨äº†,å› æ­¤ç°åœ¨æ‰§è¡Œå®Œçš„ç»“æœæ˜¯è¿™æ ·çš„,å°±ç®—åé¢çš„ä¸åŒ¹é…(æŸ¥è¯¢çš„æ˜¯21,ä½†å®é™…ä¸Šæ˜¯20),ä¹Ÿèƒ½æŸ¥å‡ºæ¥</p>
<!-- ![1665989172103](image/ssm_thinking/1665989172103.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221017144614.png" alt="20221017144614"></p>
<h4 id="forEachæ ‡ç­¾"><a href="#forEachæ ‡ç­¾" class="headerlink" title="forEachæ ‡ç­¾"></a>forEachæ ‡ç­¾</h4><p>è¿™ä¸ªæ ‡ç­¾è¿˜æ˜¯å¾ˆé‡è¦çš„,æ‰¹é‡æ“ä½œä¼šç”¨åˆ°<br>collection:ä¼ è¿‡æ¥çš„é›†åˆ,è¿™é‡Œä½¿ç”¨äº†@Paramæ³¨è§£,æ‰€ä»¥å¯ä»¥ç›´æ¥å†™empsæ¥è·å–ä¼ è¿‡æ¥çš„é›†åˆ,è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„,æ‰€ä»¥ä»¥åè¿˜æ˜¯è¦å¤šç”¨ç”¨@paramæ³¨è§£<br>item,å°±æ˜¯é›†åˆçš„æ¯ä¸€é¡¹<br>è¿™é‡Œä¸èƒ½ç›´æ¥ä½¿ç”¨empName,è€Œæ˜¯è¦ç”¨emp.empName,æ˜¯å› ä¸ºè¿™é‡Œå¹¶ä¸æ˜¯å®ä½“ç±»,è€Œæ˜¯é›†åˆ,å¾ªç¯çš„æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªå®ä½“ç±»,æ‰€ä»¥è¦ç”¨emp.empNanme<br>è¿˜æœ‰å°±æ˜¯æ¯ä¸ªæ·»åŠ é¡¹æ˜¯è¦ç”¨é€—å·åˆ†å‰²çš„,è¿™é‡Œä¸èƒ½ç›´æ¥åœ¨è¯­å¥åé¢æˆ–è€…å‰é¢æ·»åŠ é€—å·,å¯ä»¥ä½¿ç”¨<strong>separatorå±æ€§</strong>æ„ä¸ºä»¥ä»€ä¹ˆå­—ç¬¦åˆ†å‰²</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    void insertMoreEmp(@Param(&quot;emps&quot;) List&lt;Emp&gt; emps);--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertMoreEmp&quot;</span>&gt;</span></span><br><span class="line">        insert into t_emp values</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;emps&quot;</span> <span class="attr">item</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            (null,#&#123;emp.empName&#125;,#&#123;emp.age&#125;,#&#123;emp.gender&#125;,null)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¦æ³¨æ„ä½¿ç”¨äº†<strong>Arrays.asList</strong>æ–¹æ³•,å¿«é€Ÿå°†ä¸€äº›é¡¹å°è£…ä¸ºä¸€ä¸ªé›†åˆ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertMoreEmp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">DynamicSQLMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;zzmr1&quot;</span>,<span class="number">20</span> , <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;zzmr2&quot;</span>,<span class="number">20</span> , <span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;zzmr3&quot;</span>,<span class="number">20</span> , <span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">    List&lt;Emp&gt; emps = Arrays.asList(emp1, emp2, emp3);</span><br><span class="line">    mapper.insertMoreEmp(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰æ‰¹é‡åˆ é™¤çš„æ“ä½œ<br>è¿™é‡Œseparator&#x3D;â€orâ€æ˜¯å› ä¸ºåˆ é™¤è¯­å¥ä¸å¯èƒ½ä½¿ç”¨é€—å·æ¥åˆ†éš”,è¯­æ³•ä¸å¯¹,ä¹Ÿä¸å¯èƒ½æœ‰äººçš„idæ˜¯è¿™ä¸ªåˆæ˜¯é‚£ä¸ª,æ‰€ä»¥è¦ç”¨oræ¥åˆ†éš”,è¿™éƒ½æ˜¯mysqlä¸­å­¦è¿‡çš„äº†,è€Œä¸”ç”±äºoræ˜¯å…³é”®å­—,æ‰€ä»¥ä¸¤è¾¹è¦æœ‰ç©ºæ ¼,è¿™é‡Œseparatorä¼šè‡ªåŠ¨åŠ ç©ºæ ¼</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMoreEmp&quot;</span>&gt;</span></span><br><span class="line">            delete from t_emp where </span><br><span class="line">            <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;empIds&quot;</span> <span class="attr">item</span>=<span class="string">&quot;empId&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">                emp_id = #&#123;empId&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteMoreEmp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">    <span class="type">DynamicSQLMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(DynamicSQLMapper.class);</span><br><span class="line">    Integer[] emps = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">16</span>,<span class="number">17</span>&#125;;</span><br><span class="line">    mapper.deleteMoreEmp(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„,åªéœ€è¦åœ¨Integeræ•°ç»„ä¸­å†™ä¸Šè¦åˆ é™¤çš„id,å°±OKäº†<br>è¿™é‡Œä»€ä¹ˆopenè¿˜æœ‰closeæ ‡ç­¾å°±ä¸æƒ³ç”¨äº†,ç”¨inæ²¡æœ‰è¿™æ ·å†™æ–¹ä¾¿</p>
<h4 id="sqlæ ‡ç­¾"><a href="#sqlæ ‡ç­¾" class="headerlink" title="sqlæ ‡ç­¾"></a>sqlæ ‡ç­¾</h4><p>è¿˜æœ‰ä¸€ä¸ªæ ‡ç­¾å«sqlæ ‡ç­¾<br>é‡Œé¢æ”¾ä¸Šå­—æ®µ,ä¸€èˆ¬æ˜¯ä¸€ä¸ªè¡¨çš„æ‰€æœ‰å­—æ®µæˆ–è€…æŸäº›å­—æ®µ,ç”¨åˆ°çš„æ—¶å€™ç›´æ¥ç”¨includeå¼•å…¥(å¦‚ä¸‹æ“ä½œ)<br>è¿˜æœ‰å°±æ˜¯ä½¿ç”¨*å·ä¼šå½±å“æ•ˆç‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span></span><br><span class="line">    emp_id,emp_name,age,gender,dept_id</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    List&lt;Emp&gt; getEmpByCondition(Emp emp);--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmpByCondition&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Emp&quot;</span>&gt;</span></span><br><span class="line">    select <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;empColumns&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> from t_emp</span><br><span class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;where&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;empName != null and empName != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            emp_name = #&#123;empName&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age != null and age != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            age = #&#123;age&#125; and</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null and gender != &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">            gender = #&#123;gender&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå·²è®²å®Œ,åé¢å°±æ˜¯é‡å¤´æˆäº†,ç¼“å­˜è®°å¾—ä¹‹å‰å­¦çš„æ—¶å€™éƒ½æ²¡å¬æ‡‚<br>ä»€ä¹ˆä¸€çº§ç¼“å­˜äºŒçº§ç¼“å­˜</p>
<h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><h4 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h4><p>ä¸€çº§ç¼“å­˜å°±æ˜¯é€šè¿‡åŒä¸€ä¸ªSqlSessionæŸ¥è¯¢åˆ°çš„æ•°æ®,å¦‚æœä½¿ç”¨åŒä¸€ä¸ªSqlSessionæŸ¥è¯¢æ•°æ®,æ­¤æ—¶ä¼šä»ç¼“å­˜ä¸­ç›´æ¥è·å–<br><strong>ä¸€çº§ç¼“å­˜æ˜¯é»˜è®¤å¼€å¯çš„</strong></p>
<p><strong>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µ</strong></p>
<ol>
<li>ä¸åŒçš„SqlSessionå¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜</li>
<li>åŒä¸€ä¸ªSqlSessionä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒ</li>
<li>åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»ä½•ä¸€æ¬¡å¢åˆ æ”¹æ“ä½œ</li>
<li>åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç†äº†ç¼“å­˜</li>
</ol>
<p>æµ‹è¯•ä¸€<br>è¿™æ ·èƒ½æµ‹è¯•ç¬¬ä¸€ä¸ªæ¡ä»¶,mapper1å¯¹åº”sqlSession1,è€Œmapper2å¯¹åº”sqlSession2,è¿™æ—¶emp1å’Œemp2ä¼šé€šè¿‡ä¸€æ¡sqlæŸ¥å‡º,emp3ä¼šé€šè¿‡å¦ä¸€æ¡sqlæŸ¥å‡º<br>è€Œç¬¬äºŒä¸ªæ¡ä»¶ä¹Ÿä¸èƒ½æµ‹è¯•å§,æŸ¥è¯¢æ¡ä»¶éƒ½ä¸åŒäº†,ä¸Šä¸€æ¬¡çš„æŸ¥è¯¢ç»“æœ,è¿™ä¸€æ¬¡æ€ä¹ˆå¯èƒ½ç”¨çš„åˆ°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCacheByMe</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CacheMapper.class);</span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession2.getMapper(CacheMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp1</span> <span class="operator">=</span> mapper1.getEmpByIdByMe(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp1);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp2</span> <span class="operator">=</span> mapper1.getEmpByIdByMe(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp2);</span><br><span class="line"></span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp3</span> <span class="operator">=</span> mapper2.getEmpByIdByMe(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>æ€ä¹ˆæ„Ÿè§‰è¿™å—å¹¶ä¸æ˜¯å¾ˆé‡è¦</em></p>
<p>æµ‹è¯•æ¡ä»¶ä¸‰<br>åœ¨è¿›è¡Œå¢åˆ æ”¹ä¹‹å,ä¸€çº§ç¼“å­˜å°±å¤±æ•ˆäº†,æŸ¥è¯¢ç›¸åŒçš„æ•°æ®ä¹Ÿæ˜¯ä¼šé‡æ–°æŸ¥è¯¢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCacheByMe</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CacheMapper.class);</span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession2.getMapper(CacheMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp1</span> <span class="operator">=</span> mapper1.getEmpByIdByMe(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•æ¡ä»¶ä¸‰ï¼Œä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´è¿›è¡Œäº†å¢åˆ æ”¹æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    mapper1.insertEmp(<span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>,<span class="string">&quot;zzmr&quot;</span>,<span class="number">12</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp2</span> <span class="operator">=</span> mapper1.getEmpByIdByMe(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Emp emp3 = mapper2.getEmpByIdByMe(1);</span></span><br><span class="line">    <span class="comment">//System.out.println(emp3);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•æ¡ä»¶4,<strong>ä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç†äº†ç¼“å­˜</strong>,è¿™ä¸ªæ²¡å•¥è¯´çš„å§,ç¼“å­˜éƒ½æ¸…ç†äº†,è¦é‡æ–°æŸ¥è¯¢ä¹Ÿæ˜¯å¾ˆæ­£å¸¸çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCacheByMe</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line"></span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CacheMapper.class);</span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession2.getMapper(CacheMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp1</span> <span class="operator">=</span> mapper1.getEmpByIdByMe(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•æ¡ä»¶ä¸‰ï¼Œä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´è¿›è¡Œäº†å¢åˆ æ”¹æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//mapper1.insertEmp(new Emp(null,&quot;zzmr&quot;,12,&quot;ç”·&quot;));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰‹åŠ¨æ¸…ç†ç¼“å­˜ï¼Œæµ‹è¯•æ¡ä»¶å››</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    sqlSession1.clearCache();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp2</span> <span class="operator">=</span> mapper1.getEmpByIdByMe(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Emp emp3 = mapper2.getEmpByIdByMe(1);</span></span><br><span class="line">    <span class="comment">//System.out.println(emp3);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å¯æ˜¯è¦æ¯”ç¬”è®°é‡Œå†™çš„æ¸…æ¥š,æ¯ç§æµ‹è¯•éƒ½ä¿ç•™äº†,åƒç¬”è®°é‡Œæˆ‘å†™çš„æˆ‘éƒ½çœ‹ä¸æ˜ç™½äº†<br>OK,ä¸‹é¢çœ‹äºŒçº§ç¼“å­˜!!!</p>
<h4 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h4><p><strong>äºŒçº§ç¼“å­˜æ—¶SqlSessionFactoryçº§åˆ«çš„</strong>,é€šè¿‡åŒä¸€ä¸ªSqlSessionFactoryåˆ›å»ºçš„SqlSessionæŸ¥è¯¢çš„ç»“æœä¼šè¢«ç¼“å­˜,æ­¤åè‹¥æŸ¥è¯¢ç›¸åŒçš„æ•°æ®,ç»“æœå°±ä¼šä»äºŒçº§ç¼“å­˜ä¸­è·å–<br>äºŒçº§ç¼“å­˜å¼€å¯çš„æ¡ä»¶:</p>
<ol>
<li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­,è®¾ç½®å…¨å±€é…ç½®å±æ€§cacheEnabled&#x3D;â€trueâ€,é»˜è®¤ä¸ºtrue,ä¸éœ€è¦è®¾ç½®</li>
<li>åœ¨æ˜ å°„æ–‡ä»¶ä¸­è®¾ç½® <code>&lt;cache/&gt;</code></li>
<li><strong>äºŒçº§ç¼“å­˜å¿…é¡»åœ¨SqlSessionå…³é—­æˆ–æäº¤ä¹‹åæœ‰æ•ˆ</strong></li>
<li>æŸ¥è¯¢çš„æ•°æ®æ‰€è½¬æ¢çš„å®ä½“ç±»ç±»å‹å¿…é¡»å®ç°åºåˆ—åŒ–çš„æ¥å£</li>
</ol>
<p><strong>ä½¿äºŒçº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µ</strong><br>ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†ä»»æ„çš„å¢åˆ æ”¹,ä¼šä½¿ä¸€çº§å’ŒäºŒçº§ç¼“å­˜åŒæ—¶å¤±æ•ˆ</p>
<p><em>åˆšæœäº†ä¸€ä¸‹,éƒ½è¯´MyBatisçš„ç¼“å­˜ä¸å»ºè®®ä½¿ç”¨,ä¸€çº§è¿˜å¯ä»¥,ä½†æ˜¯äºŒçº§æ˜¯ä¸æ¨èä½¿ç”¨çš„</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCache</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(is);</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession1</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper1</span> <span class="operator">=</span> sqlSession1.getMapper(CacheMapper.class);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp1</span> <span class="operator">=</span> mapper1.getEmpById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * éªŒè¯äºŒçº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    mapper1.insertEmp(<span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>,<span class="string">&quot;zzmr&quot;</span>,<span class="number">12</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line"></span><br><span class="line">    sqlSession1.close();</span><br><span class="line"></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession2</span> <span class="operator">=</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">    <span class="type">CacheMapper</span> <span class="variable">mapper2</span> <span class="operator">=</span> sqlSession2.getMapper(CacheMapper.class);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp2</span> <span class="operator">=</span> mapper2.getEmpById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(emp2);</span><br><span class="line">    sqlSession2.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å°±èƒ½éªŒè¯äºŒçº§ç¼“å­˜</p>
<p>ä½†åˆ«å¿˜äº†è¿˜æœ‰ç¬¬4ä¸ªæ¡ä»¶,â€æŸ¥è¯¢çš„æ•°æ®æ‰€è½¬æ¢çš„å®ä½“ç±»ç±»å‹å¿…é¡»å®ç°åºåˆ—åŒ–çš„æ¥å£â€<br>è¿™ä¸ªæ˜¯è¦è®©å®ä½“ç±»å®ç°Serializableæ¥å£,åªéœ€è¦åœ¨å®ä½“ç±»åé¢åŠ ä¸Šå°±å¥½äº†,å…¶ä»–éƒ½ä¸ç”¨æ”¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Emp</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶è¿è¡Œçš„æ—¥å¿—é‡Œä¼šæœ‰ä¸€ä¸ª<strong>Cache Hit Ratio</strong>,ä¹Ÿå°±æ˜¯ç¼“å­˜å‘½ä¸­ç‡,åªè¦ä¸ä¸ºé›¶,é‚£å°±æ˜¯ä»ç¼“å­˜ä¸­è·å–çš„æ•°æ®<br><strong>åªæœ‰äºŒçº§ç¼“å­˜æ‰ä¼šè¾“å‡ºç¼“å­˜å‘½ä¸­ç‡</strong></p>
<p><strong>äºŒçº§ç¼“å­˜ç›¸å…³é…ç½®</strong></p>
<ol>
<li>evlctionå±æ€§: ç¼“å­˜å›æ”¶ç­–ç•¥,é»˜è®¤æ˜¯LRU<ul>
<li>LRU(Least Recently Used) æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„:ç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡</li>
<li>FiFO(First in First out) å…ˆè¿›å…ˆå‡º:æŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬</li>
<li>SOFT è½¯å¼•ç”¨: ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€çš„å¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡</li>
<li>WEAK å¼±å¼•ç”¨: æ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€çš„å¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡</li>
</ul>
</li>
<li>flushintervalå±æ€§: åˆ·æ–°é—´éš”,å•ä½æ¯«ç§’,é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®,ä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”,ç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°</li>
<li>sizeå±æ€§: å¼•ç”¨æ•°ç›®,æ­£æ•´æ•° ä»£è¡¨ç¼“å­˜æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå°‘ä¸ªå¯¹è±¡,å¤ªå¤§å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º</li>
<li>readOnlyå±æ€§,åªè¯»,true&#x2F;false<ul>
<li>true åªè¯»ç¼“å­˜,ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹,å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹,è€…æä¾›äº†å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿</li>
<li>false è¯»å†™ç¼“å­˜,ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´(é€šè¿‡åºåˆ—åŒ–),è¿™å›æ»¡ä¸€ä¸‹,ä½†æ˜¯å®‰å…¨,å› æ­¤é»˜è®¤æ˜¯false</li>
</ul>
</li>
</ol>
<p><strong>MyBatisç¼“å­˜æŸ¥è¯¢é¡ºåº</strong><br>å…ˆæŸ¥äºŒçº§ç¼“å­˜ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜ä¸­å¯èƒ½ä¼šæœ‰å…¶ä»–ç¨‹åºå·²ç»æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œå¯ä»¥æ‹¿æ¥ç›´æ¥ä½¿ç”¨<br>å¦‚æœäºŒçº§ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œå†æŸ¥è¯¢ä¸€çº§ç¼“å­˜<br>å¦‚æœä¸€çº§ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æŸ¥æ•°æ®åº“<br><strong>SqlSessionå…³é—­ä¹‹åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®ä¼šå†™å…¥äºŒçº§ç¼“å­˜</strong></p>
<h4 id="æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜"><a href="#æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜" class="headerlink" title="æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜"></a>æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜</h4><p>è¯´å®è¯æ„Ÿè§‰æ²¡ç”¨<br>ä¾èµ–:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Mybatis EHCacheæ•´åˆåŒ… --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- slf4jæ—¥å¿—é—¨é¢çš„ä¸€ä¸ªå…·ä½“å®ç° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶,åŒæ ·æ”¾åœ¨resourcesç›®å½•ä¸‹<br>å¿…é¡»å«ehcache.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;../config/ehcache.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç£ç›˜ä¿å­˜è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;D:\zzmr\ehcache&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span></span></span><br><span class="line"><span class="tag">            <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;1000&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">maxElementsOnDisk</span>=<span class="string">&quot;10000000&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">overflowToDisk</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">diskExpiryThreadIntervalSeconds</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">defaultCache</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨mapperæ˜ å°„æ–‡ä»¶ä¸­åŠ å…¥</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰logback.xmlæ—¥å¿—é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šæ—¥å¿—è¾“å‡ºçš„ä½ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºçš„æ ¼å¼ --&gt;</span> <span class="comment">&lt;!-- æŒ‰ç…§é¡ºåºåˆ†åˆ«æ˜¯ï¼š æ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€çº¿ç¨‹åç§°ã€æ‰“å°æ—¥å¿—çš„ç±»ã€æ—¥å¿—ä¸»ä½“å†…å®¹ã€æ¢è¡Œ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%d&#123;HH:mm:ss.SSS&#125;] [%-5level] [%thread] [%logger] [%msg]%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®å…¨å±€æ—¥å¿—çº§åˆ«ã€‚æ—¥å¿—çº§åˆ«æŒ‰é¡ºåºåˆ†åˆ«æ˜¯ï¼š DEBUGã€INFOã€WARNã€ERROR --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šä»»ä½•ä¸€ä¸ªæ—¥å¿—çº§åˆ«éƒ½åªæ‰“å°å½“å‰çº§åˆ«å’Œåé¢çº§åˆ«çš„æ—¥å¿—ã€‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŒ‡å®šæ‰“å°æ—¥å¿—çš„appenderï¼Œè¿™é‡Œé€šè¿‡â€œSTDOUTâ€å¼•ç”¨äº†å‰é¢é…ç½®çš„appender --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ ¹æ®ç‰¹æ®Šéœ€æ±‚æŒ‡å®šå±€éƒ¨æ—¥å¿—çº§åˆ« --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.zzmr.mybatis.mapper&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€»ç»“ä¸€å¥è¯,ä»¥åç”¨ç¼“å­˜å°±ç”¨redisäº†,è€Œè¿™äº›ç”¨ä¸åˆ°</strong></p>
<h3 id="é€†å‘å·¥ç¨‹"><a href="#é€†å‘å·¥ç¨‹" class="headerlink" title="é€†å‘å·¥ç¨‹"></a>é€†å‘å·¥ç¨‹</h3><p>é€†å‘å·¥ç¨‹:åˆ›å»ºå¥½æ•°æ®è¡¨,ç„¶åå†ç”Ÿæˆjavaç±»<br>è¿™å°±æ˜¯é€†å‘å·¥ç¨‹<br>è€Œæ­£å‘å·¥ç¨‹æ˜¯æ ¹æ®javaç±»ç”Ÿæˆæ•°æ®åº“çš„<br>?<br>çœ‹äº†ä¸€ä¸‹ä¹‹å‰å†™çš„ä¸œè¥¿,é‚£æ˜¯ä¸ªå•¥å•Š,åªæŠŠé…ç½®æ–‡ä»¶æ”¾è¿›å»äº†,å…¶ä»–å•¥éƒ½æ²¡å†™,æ€ä¹ˆå¼€å¯éƒ½ä¸çŸ¥é“</p>
<h4 id="ç²¾ç®€ç‰ˆ"><a href="#ç²¾ç®€ç‰ˆ" class="headerlink" title="ç²¾ç®€ç‰ˆ"></a>ç²¾ç®€ç‰ˆ</h4><p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- junitæµ‹è¯• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- log4jæ—¥å¿— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ§åˆ¶Mavenåœ¨æ„å»ºè¿‡ç¨‹ä¸­ç›¸å…³é…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ„å»ºè¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ’ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å…·ä½“æ’ä»¶ï¼Œé€†å‘å·¥ç¨‹çš„æ“ä½œæ˜¯ä»¥æ„å»ºè¿‡ç¨‹ä¸­æ’ä»¶å½¢å¼å‡ºç°çš„ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- æ’ä»¶çš„ä¾èµ– --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- é€†å‘å·¥ç¨‹çš„æ ¸å¿ƒä¾èµ– --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶è¿˜æ˜¯é‚£å‡ ä¸ª,è¿™ç©æ„ä¸å½±å“é€†å‘å·¥ç¨‹çš„é…ç½®,æ‰€ä»¥ä¸ç”¨æ”¾é‡Œé¢äº†</p>
<p>generatorConfig.xml<br>é€†å‘å·¥ç¨‹çš„å¿…å¤‡é…ç½®æ–‡ä»¶,é‡Œé¢é…ç½®äº†å‡ ä¸ªå¾ˆé‡è¦çš„é¡¹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span> <span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- targetRuntime: æ‰§è¡Œç”Ÿæˆçš„é€†å‘å·¥ç¨‹çš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">                MyBatis3Simple: ç”ŸæˆåŸºæœ¬çš„CRUDï¼ˆæ¸…æ–°ç®€æ´ç‰ˆï¼‰</span></span><br><span class="line"><span class="comment">                MyBatis3: ç”Ÿæˆå¸¦æ¡ä»¶çš„CRUDï¼ˆå¥¢åå°Šäº«ç‰ˆï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3Simple&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span></span></span><br><span class="line"><span class="tag">                <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/ssm?serverTimezone=UTC&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">password</span>=<span class="string">&quot;010203&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- javaBeançš„ç”Ÿæˆç­–ç•¥--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    ç›®æ ‡åŒ…å’Œç›®æ ‡ç›®å½•    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zzmr.mybatis.pojo&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--      enableSubPackages  æ˜¯å¦èƒ½å¤Ÿä½¿ç”¨å­åŒ…ï¼Œç”¨äºå°† â€˜ç‚¹â€™ è¯‘ä¸ºä¸‹ä¸€çº§ç›®å½•è€Œä¸æ˜¯ç›®å½•çš„ä¸€éƒ¨åˆ†      --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--      trimString    ç”¨äºå»æ‰å­—æ®µå‰åçš„ç©ºæ ¼æ¥ç”Ÿæˆå¯¹åº”çš„å±æ€§      --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- SQLæ˜ å°„æ–‡ä»¶çš„ç”Ÿæˆç­–ç•¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zzmr.mybatis.mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Mapperæ¥å£çš„ç”Ÿæˆç­–ç•¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.zzmr.mybatis.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">&quot;.\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- é€†å‘åˆ†æçš„è¡¨ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- tableNameè®¾ç½®ä¸º*å·ï¼Œå¯ä»¥å¯¹åº”æ‰€æœ‰è¡¨ï¼Œæ­¤æ—¶ä¸å†™domainObjectName --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- domainObjectNameå±æ€§æŒ‡å®šç”Ÿæˆå‡ºæ¥çš„å®ä½“ç±»çš„ç±»å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_emp&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Emp&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_dept&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Dept&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶å†™å¥½ä¹‹åå°±å¯ä»¥è·‘èµ·æ¥äº†</p>
<p><strong>ç‚¹å‡»å³ä¸Šè§’çš„maven,æ‰¾åˆ°è¯¥æ¨¡å—,ç‚¹å‡»Plugins,æ‰¾åˆ°mybatis-generator</strong><br>åŒå‡»æ‰§è¡Œ</p>
<!-- ![1666162501050](image/ssm_thinking/1666162501050.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20221019145644.jpg" alt="20221019145644"></p>
<p>ç„¶åä»£ç å°±è‡ªåŠ¨ç”Ÿæˆäº†</p>
<!-- ![1666162726096](image/ssm_thinking/1666162726096.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221019145848.png" alt="20221019145848"></p>
<p>ç„¶åæˆ‘å°±æ˜¯æµ‹è¯•å•Š<br>æµ‹è¯•selectAllæ–¹æ³•,å´å‘ç°è¾“å‡ºçš„æ˜¯åœ°å€,åŸæ¥æ˜¯<strong>toStringæ–¹æ³•æ²¡æœ‰é‡å†™</strong><br>æ‰€ä»¥è¿™ä¸ªç®€æ´ç‰ˆæ˜¯ä¸ç”Ÿæˆ<strong>toStringæ–¹æ³•å—</strong><br>å§æ§½,<strong>æœ‰å‚æ„é€ </strong>ä¹Ÿæ²¡æœ‰è‡ªåŠ¨ç”Ÿæˆ,è¿™ä¸ªç®€æ´ç‰ˆæœ‰ç‚¹å¤ªç®€æ´äº†å•Š</p>
<p>è¿˜çœŸæ˜¯<br>é¡ºä¾¿æŠŠæµ‹è¯•ä»£ç ä¹Ÿæ”¾ç€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.mapper.EmpMapper;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.pojo.Emp;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleTest</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteByPrimaryKey</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.deleteByPrimaryKey(<span class="number">22</span>);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>,<span class="string">&quot;zzmr&quot;</span>,<span class="number">20</span>,<span class="string">&quot;ç”·&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.insert(emp);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectPrimaryKey</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> mapper.selectByPrimaryKey(<span class="number">1</span>);</span><br><span class="line">        System.out.println(emp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        List&lt;Emp&gt; emps = mapper.selectAll();</span><br><span class="line">        emps.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ„Ÿè§‰ä¼˜ç‚¹ä¸å¤ªç¬¦åˆæ–¹æ³•åäº†ï¼Œå®é™…ä¸Šç”¨çš„æ—¶å€™è¦å…ˆåˆ›å»ºå‘˜å·¥å¯¹è±¡ï¼Œå†æ‰§è¡Œæ–¹æ³•ï¼Œå°†å‘˜å·¥å¯¹è±¡æ–¹æ³•æ–¹æ³•ä¸­</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateByPrimaryKey</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">23</span>,<span class="string">&quot;æ¨æ™‹&quot;</span>,<span class="number">20</span>,<span class="string">&quot;ç”·&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.updateByPrimaryKey(emp);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠŠç”Ÿæˆçš„æ‰€æœ‰æ–¹æ³•éƒ½æµ‹è¯•ä¸€éäº†,åº”è¯¥æ²¡å•¥é—®é¢˜,çœ‹çœ‹åé¢é‚£ä¸ªä»€ä¹ˆå®Œæ•´ç‰ˆå•Š<br>å…ˆè¯´ä¸€ä¸‹è¿™ä¸ªç®€æ´ç‰ˆçš„ç‰¹ç‚¹:</p>
<ol>
<li>æ²¡æœ‰é‡å†™æœ‰å‚æ„é€ ,toStringæ–¹æ³•</li>
<li>åªèƒ½å•è¡¨æŸ¥è¯¢,ä¸èƒ½å¤šè¡¨è”æŸ¥</li>
</ol>
<h4 id="å®Œæ•´ç‰ˆ"><a href="#å®Œæ•´ç‰ˆ" class="headerlink" title="å®Œæ•´ç‰ˆ"></a>å®Œæ•´ç‰ˆ</h4><p>åªéœ€è¦æŠŠgeneratorConfig.xmlä¸­çš„MyBatis3Simpleæ”¹æˆMyBatis3å°±å¥½äº†<br>å…¶ä»–ä¸å˜,å°±èƒ½ç”Ÿæˆä¸€å¤§å †ä¸œè¥¿<br>æƒ³èµ·æ¥äº†,ä¹‹å‰ç¬¬ä¸€æ¬¡å­¦çš„æ—¶å€™å°±æ˜¯é…ç½®é”™äº†,ç®€æ´ç‰ˆææˆäº†å®Œæ•´ç‰ˆå“ˆå“ˆå“ˆå“ˆ<br>è¿™ä¸ªå®Œæ•´ç‰ˆçš„ä¸œè¥¿å°±æ˜¯å¤š<br>å…¨æ˜¯æ¡ä»¶å•¥çš„</p>
<p>è¯´äººè¯å°±æ˜¯,åŒæ ·çš„æ“ä½œå¯ä»¥ä½¿ç”¨çš„æ–¹æ³•æ›´å¤šäº†,ä¹Ÿæ›´å®Œæ•´äº†<br>ä»€ä¹ˆé€‰æ‹©æ€§ä¿®æ”¹æè¿·ç³Šäº†<br>ä¸€ä¸ªæ˜¯å¦‚æœä¸ºnull,å°±ä¸ä¼šä¿®æ”¹,è¿™ä¸ªæ˜¯é€‰æ‹©æ€§çš„<br>ä¸€ä¸ªæ˜¯å¦‚æœä¸ºnull,è¿˜æ˜¯ä¼šä¿®æ”¹ä¸ºnull,è¿™ä¸ªæ˜¯æ™®é€šçš„</p>
<p><strong>å®Œæ•´ç‰ˆç”Ÿæˆçš„å®ä½“ç±»ä¹Ÿæ˜¯æ²¡æœ‰toStringæ–¹æ³•çš„</strong></p>
<p><strong>è¿˜è¦æ³¨æ„è‡ªå·±åœ¨å®ä½“ç±»ä¸­å†™ä¸Šæœ‰å‚&#x2F;æ— å‚æ„é€ </strong></p>
<p><strong>é€‰æ‹©æ€§ä¿®æ”¹,å°±æ˜¯å½“ä¿®æ”¹æ—¶æ²¡æœ‰ä¿®æ”¹æŸä¸ªå­—æ®µæ—¶,æ˜¯ä¸ä¼šåŠ¨è¯¥å­—æ®µçš„,è€Œæ™®é€šä¿®æ”¹,å°±ä¼šå…¨éƒ¨è¦†ç›–</strong></p>
<p>è€Œè¿™ä¸ªselectByExampleæ–¹æ³•,è¦å…ˆåˆ›å»ºExampleå¯¹è±¡,ç„¶åç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ æ¡ä»¶<br><strong>å¯ä»¥æ·»åŠ çš„æ¡ä»¶è´¼å¤š</strong></p>
<!-- ![1666174048472](image/ssm_thinking/1666174048472.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221019180730.png" alt="20221019180730"></p>
<p>æµ‹è¯•æ™šä¸Šè·‘å®Œæ­¥å›æ¥å†æµ‹<br>è·‘å®Œæ­¥å›æ¥ä¹Ÿæ²¡æµ‹<br>ä»Šå¤©æµ‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.mybatis.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.mapper.EmpMapper;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.pojo.Emp;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.pojo.EmpExample;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.mybatis.utils.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CompleteTest</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªCountByExampleï¼Œå°±æ˜¯æ ¹æ®æ¡ä»¶æŸ¥è¯¢æœ‰å¤šå°‘æ¡æ•°æ®ï¼Œæ¡ä»¶æ˜¯ â€œåå­—ä¸ºå¼ ä¸‰â€ï¼Œå°±æ˜¯æŸ¥è¯¢åå­—ä¸ºå¼ ä¸‰çš„æœ‰å¤šå°‘ä¸ªè®°å½•</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testCountByExample</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">EmpExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpExample</span>();</span><br><span class="line">        example.createCriteria().andEmpNameEqualTo(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.countByExample(example);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  deleteByExample æ ¹æ®æ¡ä»¶åˆ é™¤ï¼Œæ¯”å¦‚è¿™ä¸ªã€‚æ¡ä»¶æ˜¯å¹´é¾„ä¸º12 çš„ï¼Œå°±ä¼šåˆ é™¤å¹´é¾„ä¸º12çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">testDeleteByExample</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">EmpExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpExample</span>();</span><br><span class="line">        example.createCriteria().andAgeEqualTo(<span class="number">12</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.deleteByExample(example);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªæ²¡å•¥è¯´çš„å§ï¼Œæ ¹æ®ä¸»é”®åˆ é™¤å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteByPrimaryKey</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.deleteByPrimaryKey(<span class="number">23</span>);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šçš„æ’å…¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>,<span class="string">&quot;ZZMR123&quot;</span>,<span class="number">20</span>,<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> mapper.insert(emp);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€‰æ‹©æ€§æ’å…¥</span></span><br><span class="line"><span class="comment">     * ä»€ä¹ˆæ˜¯é€‰æ‹©æ€§æ’å…¥å‘¢ï¼Œå…¶å®å°±æ˜¯å¦‚æœè¿™ä¸ªå­—æ®µç»™å®ƒèµ‹å€¼ï¼Œé‚£å°±ä¼šåœ¨selecté‡Œé¢å†™ä¸Šï¼Œå¦‚æœå…¨å¡«nullï¼Œ</span></span><br><span class="line"><span class="comment">     * è¿™ä¸ªè¯­å¥å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºç›¸å½“äºselect from äº†ï¼Œselectåé¢æ²¡æœ‰è·Ÿç€å­—æ®µï¼Œå°±æŠ¥é”™äº†ï¼Œè€Œæ™®é€šçš„insertä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertSelective</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">insert</span> <span class="operator">=</span> mapper.insertSelective(<span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="literal">null</span>, <span class="string">&quot;ZZMR1&quot;</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>));</span><br><span class="line">        System.out.println(insert);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByExample</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ²¡æœ‰æ¡ä»¶-å°±ä¼šæŸ¥è¯¢å…¨éƒ¨æ•°æ®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/*List&lt;Emp&gt; emps = mapper.selectByExample(null);</span></span><br><span class="line"><span class="comment">        emps.forEach(System.out::println);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">EmpExample</span> <span class="variable">example</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpExample</span>();</span><br><span class="line">        <span class="comment">//æ¡ä»¶å°±ç›´æ¥åœ¨åé¢andä¸Šå°±okäº†ï¼Œè¿™ä¹Ÿå¤ªæ–¹ä¾¿äº†</span></span><br><span class="line">        example.createCriteria().andEmpNameEqualTo(<span class="string">&quot;å¼ ä¸‰&quot;</span>).andGenderEqualTo(<span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">        <span class="comment">//åŠ â€æˆ–è€…â€œçš„æ¡ä»¶ï¼š     è¿™æ ·å°±æ‹¼æˆäº†ï¼šå§“åä¸ºå¼ ä¸‰ï¼Œæ€§åˆ«ä¸ºå¥³æˆ–è€…å¹´é¾„å¤§äº26çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">        example.or().andAgeGreaterThan(<span class="number">26</span>);</span><br><span class="line">        List&lt;Emp&gt; emps = mapper.selectByExample(example);</span><br><span class="line">        emps.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByPrimaryKey</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> mapper.selectByPrimaryKey(<span class="number">1</span>);</span><br><span class="line">        System.out.println(emp);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ä¸»é”®ä¿®æ”¹-æ™®é€š</span></span><br><span class="line"><span class="comment">     * æ²¡é—®é¢˜å•Šæ²¡é—®é¢˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateByPrimaryKey</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">23</span>,<span class="string">&quot;ZZMR&quot;</span>,<span class="number">20</span>,<span class="literal">null</span>);</span><br><span class="line">        mapper.updateByPrimaryKey(emp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»ˆäºçŸ¥é“é€‰æ‹©æ€§ä¿®æ”¹æ˜¯å•¥æ„æ€äº†</span></span><br><span class="line"><span class="comment">     * æ¯”å¦‚è¿™ä¸ªï¼Œå¦‚æœåŸæ¥çš„å‘˜å·¥æ€§åˆ«ä¸ºâ€ç”·â€œçš„è¯ï¼Œè¿™è¾¹å†™ä¸Šnullï¼Œæ˜¯ä¸ä¼šå»ä¿®æ”¹åŸæ¥çš„å€¼çš„ï¼Œè€Œæ™®é€šä¿®æ”¹çš„è¯ï¼Œå°±ä¼šæŠŠä¹‹å‰ç»™è¦†ç›–</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateByPrimaryKeySelective</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession();</span><br><span class="line">        <span class="type">EmpMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(EmpMapper.class);</span><br><span class="line">        <span class="type">Emp</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Emp</span>(<span class="number">23</span>,<span class="string">&quot;ZZMR1&quot;</span>,<span class="number">20</span>,<span class="literal">null</span>);</span><br><span class="line">        mapper.updateByPrimaryKeySelective(emp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ†é¡µæ’ä»¶"><a href="#åˆ†é¡µæ’ä»¶" class="headerlink" title="åˆ†é¡µæ’ä»¶"></a>åˆ†é¡µæ’ä»¶</h3><p>ä¾ç¨€è®°å¾—è¿™ä¸ªæ˜¯çœŸçš„éš¾<br>ä½†æ˜¯è¿™ä¸ªMyBatisç®€åŒ–äº†å¾ˆå¤šäº†</p>
<h4 id="é…ç½®åˆ†é¡µæ’ä»¶"><a href="#é…ç½®åˆ†é¡µæ’ä»¶" class="headerlink" title="é…ç½®åˆ†é¡µæ’ä»¶"></a>é…ç½®åˆ†é¡µæ’ä»¶</h4><p>å…ˆåŠ ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®åˆ†é¡µæ’ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¦æ³¨æ„æ’ä»¶æ”¾çš„ä½ç½®,è¿™ä¸ªæ ‡ç­¾è¦æ”¾åœ¨environmentsæ ‡ç­¾ä¸Šé¢</p>
<p>è€Œä½¿ç”¨çš„æ­¥éª¤ä¹Ÿå¾ˆç®€å•<br><strong>åœ¨æŸ¥è¯¢ä¹‹å‰å¼€å¯åˆ†é¡µåŠŸèƒ½</strong><br>PageHelper.startPage(1,4);<br>è¿™å°±ç›¸å½“äºå¼€å¯äº†åˆ†é¡µåŠŸèƒ½,è€Œä¸”è·å–å½“å‰é¡µä¸º1çš„å†…å®¹,æ¯é¡µæœ‰4ä¸ªæ•°æ®<br>ä¸è¿‡,è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„å¯¹è±¡â€“page<br>ä¸Šé¢çš„æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªpageå¯¹è±¡<br>è€Œpageå¯¹è±¡ä¸­æœ‰éå¸¸å¤šçš„æ•°æ®:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Page&#123;count=<span class="literal">true</span>, pageNum=<span class="number">1</span>, pageSize=<span class="number">4</span>, startRow=<span class="number">0</span>, endRow=<span class="number">4</span>, total=<span class="number">32</span>, pages=<span class="number">8</span>, reasonable=<span class="literal">false</span>, pageSizeZero=<span class="literal">false</span>&#125;[Emp&#123;empId=<span class="number">1</span>, empName=<span class="string">&#x27;1&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;, Emp&#123;empId=<span class="number">2</span>, empName=<span class="string">&#x27;23&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;, Emp&#123;empId=<span class="number">3</span>, empName=<span class="string">&#x27;4&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;, Emp&#123;empId=<span class="number">4</span>, empName=<span class="string">&#x27;45&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;]</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ä¸ªpageInfoå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PageInfo&lt;Emp&gt; pageInfo = <span class="keyword">new</span> <span class="title class_">PageInfo</span>&lt;&gt;(emps,<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé‡Œé¢ä¹Ÿå¾ˆå¤šæ•°æ®,æ¯”pageä¸­çš„æ•°æ®è¿˜è¦å¤š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PageInfo&#123;</span><br><span class="line">    pageNum=<span class="number">1</span>, pageSize=<span class="number">4</span>, size=<span class="number">4</span>, startRow=<span class="number">1</span>, endRow=<span class="number">4</span>, total=<span class="number">32</span>, pages=<span class="number">8</span>, list=Page&#123;</span><br><span class="line">        count=<span class="literal">true</span>, pageNum=<span class="number">1</span>, pageSize=<span class="number">4</span>, startRow=<span class="number">0</span>, endRow=<span class="number">4</span>, total=<span class="number">32</span>, pages=<span class="number">8</span>, reasonable=<span class="literal">false</span>, pageSizeZero=<span class="literal">false</span>&#125;</span><br><span class="line">[Emp&#123;empId=<span class="number">1</span>, empName=<span class="string">&#x27;1&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;, Emp&#123;empId=<span class="number">2</span>, empName=<span class="string">&#x27;23&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;, Emp&#123;empId=<span class="number">3</span>, empName=<span class="string">&#x27;4&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;, Emp&#123;empId=<span class="number">4</span>, empName=<span class="string">&#x27;45&#x27;</span>, age=<span class="literal">null</span>, gender=<span class="string">&#x27;null&#x27;</span>&#125;], </span><br><span class="line">prePage=<span class="number">0</span>, nextPage=<span class="number">2</span>, isFirstPage=<span class="literal">true</span>, isLastPage=<span class="literal">false</span>, hasPreviousPage=<span class="literal">false</span>, hasNextPage=<span class="literal">true</span>, navigatePages=<span class="number">5</span>, navigateFirstPage=<span class="number">1</span>, navigateLastPage=<span class="number">5</span>, navigatepageNums=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªpageInfoå¯¹è±¡é‡Œé¢å­˜çš„æ•°æ®æ˜¯çœŸçš„å¤šå•Š<br>æŒºæœ‰ç”¨çš„<br>å¥½äº†<br>MyBatisçœ‹å®Œäº†,åˆä¸€é.</p>
<h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><p>è¿™å‡ å¤©å¿™ç€æ‰“æ¸¸æˆ,å¿™ç€å†™äººå·¥æ™ºèƒ½å®éªŒ(è™½ç„¶å†™ä¸æ˜ç™½),å—¯,2022å¹´10æœˆ22æ—¥ 15ç‚¹57åˆ†<br>ç»§ç»­çœ‹å’¯<br>ä»€ä¹ˆIOC,AOP<br>IOC: åè½¬èµ„æºè·å–æ–¹å‘,æŠŠâ€™è‡ªå·±åˆ›å»ºèµ„æº,å‘ç¯å¢ƒç´¢å–èµ„æºâ€™å˜æˆç¯å¢ƒå°†èµ„æºå‡†å¤‡å¥½,æˆ‘ä»¬äº«å—èµ„æºæ³¨å…¥<br>AOP: é¢å‘åˆ‡é¢ç¼–ç¨‹,åœ¨ä¸ä¿®æ”¹ä»£ç åŠŸèƒ½çš„åŸºç¡€ä¸Šå¢å¼ºä»£ç åŠŸèƒ½<br>Spring IOCæ˜¯ä¸€ä¸ªå®¹å™¨,å› ä¸ºå®ƒåŒ…å«å¹¶ç®¡ç†ç»„ä»¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ,ç»„ä»¶äº«å—åˆ°å®¹å™¨åŒ–çš„ç®¡ç†,æ›¿ç¨‹åºå‘˜å±è”½äº†ç»„ä»¶åˆ›å»ºè¿‡ç¨‹ä¸­çš„å¤§é‡ç»†èŠ‚,æå¤§é™ä½äº†ä½¿ç”¨é—¨æ§›,å¤§å¹…æé«˜äº†å¼€å‘æ•ˆç‡</p>
<h3 id="IOCå®¹å™¨"><a href="#IOCå®¹å™¨" class="headerlink" title="IOCå®¹å™¨"></a>IOCå®¹å™¨</h3><p>Inversion of Control åè½¬æ§åˆ¶<br>è€ŒDI: Dependency Injection ä¸ºä¾èµ–æ³¨å…¥<br>å³ä¸ºIOCçš„ä¸€ç§å…·ä½“å®ç°</p>
<h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><p>çœ‹å›¾å§,ä¸œè¥¿æœ‰ç‚¹å¤š,ä½†æ˜¯åˆä¸å¤š</p>
<!-- ![1666594117191](image/ssm_thinking/1666594117191.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20221024144839.jpg" alt="20221024144839"></p>
<p>ç”¨çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯ClassPathXmlApplicationContextç±»</p>
<!-- ![1666594306444](image/ssm_thinking/1666594306444.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221024145148.png" alt="20221024145148"></p>
<h4 id="åŸºäºXMLç®¡ç†bean"><a href="#åŸºäºXMLç®¡ç†bean" class="headerlink" title="åŸºäºXMLç®¡ç†bean"></a>åŸºäºXMLç®¡ç†bean</h4><p>è¿™é‡Œå°±è¦å¼ºè°ƒäº†,ä¸€å…±ä¸¤ç§ç®¡ç†æ–¹å¼,åŸºäºXMLå’ŒåŸºäºæ³¨è§£,ä¸¤ç§éƒ½éå¸¸é‡è¦,ä»¥åéƒ½ä¼šç”¨åˆ°</p>
<p>æµç¨‹æ˜¯ä»€ä¹ˆ?</p>
<ol>
<li>Javaç±»</li>
<li>Springé…ç½®æ–‡ä»¶-applocationContext.xml<br>åœ¨é‡Œé¢é…ç½®ä¸Šbeanæ ‡ç­¾</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;helloworld&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.HelloWorld&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶,IOCå®¹å™¨ä¸­å°±å¯ä»¥è·å–åˆ°HelloWorldç±»äº†,idä¸ºhelloworld<br>3. ä½¿ç”¨<br>è¿™é‡Œnewçš„æ˜¯ClassPathXmlApplicationContextç±»,é‡Œé¢æ”¾çš„ç›´æ¥æ˜¯é…ç½®æ–‡ä»¶çš„åå­—,æ‰€ä»¥è¯´,è¿™ä¸ªé…ç½®æ–‡ä»¶æ˜¯å®šä½åˆ°resourceç›®å½•ä¸‹çš„<br>æ›´ç²¾ç¡®åœ°è¯´,åœ¨æ‰“åŒ…å,resourceç›®å½•ä¼šå’ŒjavaåŒ…æ‰“åŒ…åœ¨ä¸€èµ·,æ‰€ä»¥å¯ä»¥ç›´æ¥è®¿é—®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testHelloWorld</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//            è·å–IOCå®¹å™¨</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"><span class="comment">//    è·å–IOCå®¹å™¨ä¸­çš„beanå¯¹è±¡</span></span><br><span class="line">    <span class="type">HelloWorld</span> <span class="variable">helloworld</span> <span class="operator">=</span> (HelloWorld) ioc.getBean(<span class="string">&quot;helloworld&quot;</span>);</span><br><span class="line">    helloworld.sayHello();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†…å®¹çªç„¶å°±å¤šèµ·æ¥äº†<br>IOCè¦å­¦çš„ä¸œè¥¿å¾ˆå¤šå•Š<br><strong>IOCå®¹å™¨è·å–å¯¹è±¡å®é™…ä¸Šæ˜¯æ ¹æ®åå°„å®ç°çš„,è¿™æ—¶å°±å¿…é¡»è¦è¦æ±‚Beanç±»æœ‰æ— å‚æ„é€ ,æ²¡æœ‰çš„è¯å°±ä¼šå‡ºé”™</strong></p>
<p>ä¸‹é¢çœ‹è·å–Beançš„ä¸‰ç§æ–¹å¼</p>
<ol>
<li>æ ¹æ®idè·å–,è¿™ä¸ªå°±æ˜¯ä¸Šé¢å†™çš„é‚£ç§</li>
<li>æ ¹æ®beançš„ç±»å‹è·å–<br><strong>è¦æ±‚è¯¥IOCå®¹å™¨ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªç±»å‹åŒ¹é…çš„bean</strong><br>å¦‚æœå¤šäº†,å°±ä¼šæŠ¥: NoUniqueBeanDefinitionException<br>å¦‚æœå°‘äº†,å°±æ˜¯ä¸€ä¸ªéƒ½æ²¡æœ‰,å°±ä¼šæŠ¥:<br>NoSuchBeanDefinitionException<br>æ‰€ä»¥è¿˜æ˜¯è¦æœ‰ä¸”åªæœ‰ä¸€ä¸ª</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">studentOne</span> <span class="operator">=</span> ioc.getBean(Student.class);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ ¹æ®beançš„idå’Œç±»å‹è·å–</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">studentOne</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;studentOne&quot;</span>, Student.class);</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªéƒ½ç”¨ä¸Šäº†å±äºæ˜¯,<br>è¿™æ ·å†™çš„å¥½å¤„æ˜¯å¯ä»¥ç›´æ¥è·å–Studentå¯¹è±¡äº†,æ­¥ç”¨è¿›è¡Œå¼ºè½¬,ä¹Ÿä¸ä¼šå‡ºç°æ ¹æ®ç±»å‹è·å–beanå‡ºç°çš„é—®é¢˜</p>
<p><strong>é‚£ä»¥åç”¨ä»€ä¹ˆè·å–æ–¹å¼æ¯”è¾ƒå¤šå‘¢,ç”¨æ ¹æ®ç±»å‹è·å–</strong><br>å› ä¸ºæ²¡æœ‰è°ä¼šæŠŠä¸€ä¸ªJavaç±»é…ç½®å¤šä¸ªbeanå§</p>
<p><strong>ç»„ä»¶ç±»å®ç°äº†æ¥å£,æ ¹æ®æ¥å£ç±»å‹å¯ä»¥è·å–bean,å‰ææ˜¯beanå”¯ä¸€</strong></p>
<h4 id="ä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥"><a href="#ä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥" class="headerlink" title="ä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥"></a>ä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥</h4><p>å°±æ˜¯é‚£ä¸ªDI</p>
<blockquote>
<p>è¯´ç™½äº†,ä¾èµ–æ³¨å…¥å°±æ˜¯ç»™ç±»ä¸­çš„æŸäº›å±æ€§èµ‹å€¼çš„è¿‡ç¨‹-ä¹Ÿæ˜¯å†™bean<br>å¦‚ä½•èµ‹å€¼?â€”-ä½¿ç”¨çš„æ˜¯æˆå‘˜å˜é‡çš„setæ–¹æ³•,å¦‚æœæ²¡æœ‰setæ–¹æ³•,æ˜¯ä¸èƒ½ç»™å±æ€§èµ‹å€¼çš„</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentTwo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        property    é€šè¿‡æˆå‘˜å˜é‡çš„setæ–¹æ³•è¿›è¡Œèµ‹å€¼</span></span><br><span class="line"><span class="comment">                name        è®¾ç½®éœ€è¦å¤åˆ¶çš„å±æ€§åï¼ˆå’Œsetæ–¹æ³•æœ‰å…³ï¼‰</span></span><br><span class="line"><span class="comment">                value       è®¾ç½®ä¸ºå±æ€§æ‰€èµ‹çš„å€¼</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1001&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;å¼ ä¸‰&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;23&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªâ€ä¾èµ–æ³¨å…¥â€,å†™ä¸Šå‚æ•°ä¹‹å,å†æ¬¡ä½¿ç”¨IOCå®¹å™¨æ¥è·å–è¯¥ç±»çš„å¯¹è±¡æ—¶,å°±ä¼šè·å–æ³¨å…¥åçš„å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testIOCByMe</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–IOCå®¹å™¨</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-ioc.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–bean</span></span><br><span class="line">    <span class="type">Student</span> <span class="variable">studentTwo</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;studentTwo&quot;</span>, Student.class);</span><br><span class="line"></span><br><span class="line">    System.out.println(studentTwo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<!-- ![1666687169065](image/ssm_thinking/1666687169065.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221025163931.png" alt="20221025163931"></p>
<h4 id="ä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥"><a href="#ä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥" class="headerlink" title="ä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥"></a>ä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥</h4><blockquote>
<p>è¿™ä¸ªå°±æ˜¯ä½¿ç”¨ç±»çš„æ„é€ æ–¹æ³•æ¥å®ç°æˆå‘˜å˜é‡çš„èµ‹å€¼çš„<br><strong>è¿™é‡Œè¦æ³¨æ„,å¦‚æœä½¿ç”¨æ„é€ å™¨æ³¨å…¥,å› ä¸ºæ˜¯ä½¿ç”¨äº†æ„é€ æ–¹æ³•,æ‰€ä»¥é‡Œé¢çš„æ¯ä¸ªå±æ€§çš„é¡ºåºè¦å’Œæ„é€ æ–¹æ³•ä¸€è‡´,ä¸ä¸€è‡´å°±ä¼šå‡ºç°ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜</strong></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentThree&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;1002&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;æå››&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;å¥³&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;24&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testIOCByMe</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–IOCå®¹å™¨</span></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-ioc.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–bean</span></span><br><span class="line">    <span class="type">Student</span> <span class="variable">studentThree</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;studentThree&quot;</span>, Student.class);</span><br><span class="line"></span><br><span class="line">    System.out.println(studentThree);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¦æ³¨æ„çš„åœ°æ–¹,å¦‚æœå‡ºç°ä¸¤ä¸ªæ„é€ æ–¹æ³•,è€ŒæŸä¸ªå‚æ•°ä¸åŒ,ä½†å‚æ•°çš„ç±»å‹ç›¸åŒ,è¿™æ—¶å¯ä»¥æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªæ„é€ æ–¹æ³•,éœ€è¦ç”¨åˆ°nameå±æ€§<br>æ¯”å¦‚è¿™é‡Œæ·»åŠ äº†ä¸€ä¸ªå…·æœ‰åˆ†æ•°çš„æ„é€ æ–¹æ³•<br>è¿˜æœ‰ä¸€ä¸ªå…·æœ‰å¹´é¾„çš„æ„é€ æ–¹æ³•</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(Integer sid, String sname,  String gender,Double score)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.sid = sid;</span><br><span class="line">    <span class="built_in">this</span>.sname = sname;</span><br><span class="line">    <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    <span class="built_in">this</span>.score = score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(Integer sid, String sname,  String gender,Integer age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.sid = sid;</span><br><span class="line">    <span class="built_in">this</span>.sname = sname;</span><br><span class="line">    <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨nameå±æ€§æ¥æŒ‡å®šäº†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentThree&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;1002&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;æå››&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;å¥³&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;24&quot;</span> <span class="attr">name</span>=<span class="string">&quot;score&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨nameæŒ‡å®šè¿™ä¸ªargæ˜¯ç»™å“ªä¸ªå±æ€§èµ‹å€¼â€”ç»™scoreèµ‹å€¼</p>
<blockquote>
<p><strong>ä»¥ä¸Šä¸¤ç§æ–¹å¼å“ªç§ç”¨çš„å¤š?å½“ç„¶æ˜¯ç¬¬ä¸€ç§,ä½¿ç”¨propertyèµ‹å€¼</strong></p>
</blockquote>
<h4 id="ç‰¹æ®Šå€¼å¤„ç†"><a href="#ç‰¹æ®Šå€¼å¤„ç†" class="headerlink" title="ç‰¹æ®Šå€¼å¤„ç†"></a>ç‰¹æ®Šå€¼å¤„ç†</h4><h5 id="ä¸ºå±æ€§èµ‹å€¼ä¸ºnull"><a href="#ä¸ºå±æ€§èµ‹å€¼ä¸ºnull" class="headerlink" title="ä¸ºå±æ€§èµ‹å€¼ä¸ºnull"></a>ä¸ºå±æ€§èµ‹å€¼ä¸ºnull</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentFour_two&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1003&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç‹äº”&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">null</span>&gt;</span><span class="tag">&lt;/<span class="name">null</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;23&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ˜¯ä¸èƒ½ç›´æ¥åœ¨valueé‡Œå†™ä¸Šnullçš„,ä¸ç„¶ä¼šå˜æˆå­—ç¬¦ä¸²null,æ­£ç¡®çš„æ–¹æ³•æ˜¯åœ¨propertyæ ‡ç­¾ä¸­å†™ä¸Šnullæ ‡ç­¾,æ­¤æ—¶å°±å¯¹åº”genderä¸ºnull,ä¸ºç©º</strong></p>
<h5 id="xmlå®ä½“"><a href="#xmlå®ä½“" class="headerlink" title="xmlå®ä½“"></a>xmlå®ä½“</h5><p>è¿™é‡Œè¦è®°ä½å¤§äºå·å’Œå°äºå·<br>å°äºå·: &amp;lt;<br>å¤§äºå·: &amp;gt;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentFour_three&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1003&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&lt;ç‹äº”&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;23&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>CDåŒº</strong><br>å¤§å†™CD,å›è½¦,å³å¯å¿«é€Ÿç”Ÿæˆ<br>&lt;![CDATA[]]&gt;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentFour_three&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1003&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;ç‹äº”&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;23&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="ä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼"><a href="#ä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼" class="headerlink" title="ä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼"></a>ä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼</h5><p>ç¬¬ä¸€ç§æ–¹å¼:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentFive_two&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1004&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;èµµå…­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;14&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;clazz&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;clazzTwo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;clazzTwo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Clazz&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é«˜ä¸€ä¸€ç­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¹Ÿæ²¡ä»€ä¹ˆéš¾çš„,ä¸»è¦æ˜¯è¦ç»™ç±»ç±»å‹çš„å±æ€§å•ç‹¬å†™ä¸€ä¸ªbean,ç„¶åç”¨refæ¥å¼•ç”¨å³å¯</p>
</blockquote>
<p>ç¬¬äºŒç§æ–¹å¼<br>çº§è”æ–¹å¼,è¦ä¿è¯æå‰ä¸ºclazzå±æ€§èµ‹å€¼æˆ–è€…å®ä¾‹åŒ–<br>æ„Ÿè§‰è¿™ä¸ªæ¯”è¾ƒé¸¡è‚‹äº†,ç›¸å½“äºå¯¹clazzTwoä¸­çš„å†…å®¹è¿›è¡Œäº†ä¿®æ”¹,è¿˜æ˜¯ç¦»ä¸å¼€clazzç±»</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;clazzTwo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Clazz&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é«˜ä¸€ä¸€ç­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentFive_three&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1004&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;èµµå…­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;14&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;clazz&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;clazzTwo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;clazz.cid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;clazz.cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é«˜äºŒäºŒç­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å“ªä¸ªç”¨çš„å¤š?æ˜¯ç¬¬ä¸€ç§å¼•ç”¨å¤–éƒ¨çš„bean,è¿˜æœ‰å°±æ˜¯ä½¿ç”¨å†…éƒ¨çš„bean,è€Œçº§è”è¿™ç§æ–¹å¼ç”¨çš„ä¸å¤š</p>
</blockquote>
<p>ç¬¬ä¸‰ç§-ä½¿ç”¨å†…éƒ¨bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentFive_four&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1004&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;èµµå…­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;14&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;clazz&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;clazzInner&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Clazz&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é«˜ä¸€äºŒç­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯,å†…éƒ¨beanåªèƒ½åœ¨è¿™ä¸ªç±»ä¸­ä½¿ç”¨,åœ¨<strong>IOCæ˜¯æ— æ³•ç›´æ¥è·å–è¯¥beançš„</strong></p>
</blockquote>
<h5 id="ä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼"><a href="#ä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼" class="headerlink" title="ä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼"></a>ä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼</h5><blockquote>
<p>è¿™é‡Œè¦æ³¨æ„ä½¿ç”¨çš„æ˜¯arrayæ ‡ç­¾,ä¹Ÿæ˜¯ä½¿ç”¨çš„å†…éƒ¨bean<br>è¿˜æœ‰å°±æ˜¯arrayæ ‡ç­¾ä¸­æœ‰valueå’Œref,å¦‚æœæ˜¯å­—é¢ç±»ç±»å‹çš„å±æ€§,å°±ç›´æ¥ç”¨value,å¦‚æœæ˜¯å¼•ç”¨ç±»å‹çš„,å°±è¦ç”¨ref</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentFive_five&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1004&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;èµµå…­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;14&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç”·&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;clazz&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;clazzInner&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Clazz&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é«˜ä¸€äºŒç­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>æŠ½çƒŸ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>å–é…’<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>çƒ«å¤´<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>å­¦ä¹ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="ä¸ºé›†åˆç±»å‹èµ‹å€¼"><a href="#ä¸ºé›†åˆç±»å‹èµ‹å€¼" class="headerlink" title="ä¸ºé›†åˆç±»å‹èµ‹å€¼"></a>ä¸ºé›†åˆç±»å‹èµ‹å€¼</h5><p>ä¹Ÿä¸éš¾</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;clazzThree&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Clazz&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é«˜ä¸‰ä¸‰ç­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;students&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;studentOne&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;studentTwo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;studentThree&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testIOCByMeTwo</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-ioc.xml&quot;</span>);</span><br><span class="line">    <span class="type">Clazz</span> <span class="variable">clazz</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;clazzThree&quot;</span>, Clazz.class);</span><br><span class="line">    System.out.println(clazz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœ:</p>
<!-- ![1666753680163](image/ssm_thinking/1666753680163.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221026110803.png" alt="20221026110803"></p>
<blockquote>
<p>é…ç½®ä¸€ä¸ªé›†åˆç±»å‹çš„bean,éœ€è¦ä½¿ç”¨utilçº¦æŸ</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®ä¸€ä¸ªé›†åˆç±»å‹çš„beanï¼Œéœ€è¦ä½¿ç”¨utilçš„çº¦æŸ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;studentList&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;studentOne&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;studentTwo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;studentThree&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ—¶,åªéœ€è¦å¼•ç”¨å³å¯</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;clazzThree&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Clazz&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é«˜ä¸‰ä¸‰ç­&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;studentList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="ä¸ºmapé›†åˆç±»å‹çš„å±æ€§èµ‹å€¼"><a href="#ä¸ºmapé›†åˆç±»å‹çš„å±æ€§èµ‹å€¼" class="headerlink" title="ä¸ºmapé›†åˆç±»å‹çš„å±æ€§èµ‹å€¼"></a>ä¸ºmapé›†åˆç±»å‹çš„å±æ€§èµ‹å€¼</h5><p>ç”¨èµ·æ¥ä¹Ÿæ²¡ä»€ä¹ˆéš¾çš„<br>ç¬¬ä¸€ç§æ–¹å¼:</p>
<blockquote>
<p>è®¾ç½®teacherçš„bean</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;teacherOne&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10084&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åå­—1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;teacherTwo&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100844&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åå­—äºŒ&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨map</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;teacherMap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;10084&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;teacherOne&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;100844&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;teacherTwo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§æ–¹å¼:<br>å’Œutil:listæœ‰ç‚¹ç›¸ä¼¼</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">util:map</span> <span class="attr">id</span>=<span class="string">&quot;teacherMapTwo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;10084&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;teacherOne&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;100844&quot;</span> <span class="attr">value-ref</span>=<span class="string">&quot;teacherTwo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">util:map</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ—¶:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;teacherMap&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;teacherMapTwo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="på‘½åç©ºé—´"><a href="#på‘½åç©ºé—´" class="headerlink" title="på‘½åç©ºé—´"></a>på‘½åç©ºé—´</h5><p>è¿™ä¸ªæ²¡å•¥è¯´çš„,ç”¨çš„ä¹Ÿä¸å¤š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;studentSix&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">p:sid</span>=<span class="string">&quot;1005&quot;</span> <span class="attr">p:sname</span>=<span class="string">&quot;å°æ˜&quot;</span> <span class="attr">p:teacherMap-ref</span>=<span class="string">&quot;teacherMap&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Springç®¡ç†æ•°æ®æº"><a href="#Springç®¡ç†æ•°æ®æº" class="headerlink" title="Springç®¡ç†æ•°æ®æº"></a>Springç®¡ç†æ•°æ®æº</h4><p>æ·»åŠ ä¾èµ–-mysqlé©±åŠ¨å’Œæ•°æ®åº“è¿æ¥æ± (æ•°æ®æº)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ•°æ®æº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å®ç°:<br>è¿™ä¸ªlocationé‡Œé¢ç›´æ¥å†™ä¸Šæ–‡ä»¶å,æ˜¯å› ä¸ºè¿™ä¸ªè·¯å¾„åŒæ ·å®šä½åˆ°resourceç›®å½•,ä¹Ÿå°±æ˜¯æ‰“åŒ…åçš„ç±»ç›®å½•</p>
<blockquote>
<p>è¿˜æœ‰å°±æ˜¯è¿™ä¸ªpropertyå¯ä»¥è®¾ç½®ä¸€äº›æ•°æ®åº“è¿æ¥æ± çš„å±æ€§,æ€»ä¹‹å°±æ˜¯mybatisé…ç½®æ–‡ä»¶ä¸­èƒ½è®¾ç½®çš„,springä¹Ÿéƒ½èƒ½è®¾ç½®</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥jdbc.properties ä¹‹åå°±å¯ä»¥é€šè¿‡$&#123;key&#125; çš„æ–¹å¼è®¿é—®value--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDataSource</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-datasource.xml&quot;</span>);</span><br><span class="line">    <span class="type">DruidDataSource</span> <span class="variable">data</span> <span class="operator">=</span> ioc.getBean(DruidDataSource.class);</span><br><span class="line">    System.out.println(data.getConnection());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>èƒ½è¾“å‡ºä¸€ä¸²åœ°å€å°±è¡Œ,å°±è¯æ˜è·å–æˆåŠŸ</p>
<blockquote>
<p>ä¸Šé¢éœ€è¦æ³¨æ„çš„å°±æ˜¯ä¸€ä¸ªcontext:property-placeholderæ ‡ç­¾,è´Ÿè´£å¼•å…¥jdbc.propertiesæ–‡ä»¶,ä»¥åå¼•å…¥propertiesæ–‡ä»¶å…¨æ˜¯ç”¨çš„è¿™ä¸ªæ ‡ç­¾</p>
</blockquote>
<h4 id="beançš„ä½œç”¨åŸŸ"><a href="#beançš„ä½œç”¨åŸŸ" class="headerlink" title="beançš„ä½œç”¨åŸŸ"></a>beançš„ä½œç”¨åŸŸ</h4><p>è¯´æ˜¯ä½œç”¨åŸŸ,ä½†æ˜¯æ„Ÿè§‰æ›´åƒæ˜¯beanç»™åˆ›å»ºJavaå¯¹è±¡æŒ‡å®šçš„ç±»å‹<br>å†™ä¸Šscope&#x3D;â€singletonâ€ å°±æ˜¯å•ä¾‹æ¨¡å¼<br>scope&#x3D;â€prototypeâ€ å°±æ˜¯å¤šä¾‹æ¨¡å¼</p>
<blockquote>
<p>å•ä¾‹å’Œå¤šä¾‹çš„åŒºåˆ«:å•ä¾‹,è¡¨ç¤ºè·å–è¯¥beanæ‰€å¯¹åº”çš„å¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ª,å¤šä¾‹,è¡¨ç¤ºè·å–è¯¥beanæ‰€å¯¹åº”çš„å¯¹è±¡éƒ½ä¸æ˜¯åŒä¸€ä¸ª<br><strong>ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨å•ä¾‹,å¤šä¾‹ä½¿ç”¨çš„ä¸å¤š</strong></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.pojo.Student&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean id=&quot;student&quot; class=&quot;com.zzmr.spring.pojo.Student&quot; scope=&quot;prototype&quot;&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sid&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2009124101&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ¨æ™‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testScope</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-scope.xml&quot;</span>);</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student1</span> <span class="operator">=</span> ioc.getBean(Student.class);</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student2</span> <span class="operator">=</span> ioc.getBean(Student.class);</span><br><span class="line">    <span class="comment">//System.out.println(student1.equals(student2));</span></span><br><span class="line">    System.out.println(student1==student2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="beanç”Ÿå‘½å‘¨æœŸ"><a href="#beanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="beanç”Ÿå‘½å‘¨æœŸ"></a>beanç”Ÿå‘½å‘¨æœŸ</h4><p>æ„Ÿè§‰ä¹Ÿæ²¡ä»€ä¹ˆçœ‹çš„<br>ä¸»è¦æ˜¯çœ‹æ¯ä¸ªæ–¹æ³•æ‰§è¡Œçš„é¡ºåº</p>
<ol>
<li>å®ä¾‹åŒ–-è°ƒç”¨æ— å‚æ„é€ </li>
<li>ä¾èµ–æ³¨å…¥-è°ƒç”¨setæ–¹æ³•</li>
<li>åˆå§‹åŒ–-è°ƒç”¨initMethod()æ–¹æ³•,æ–¹æ³•åæ˜¯è‡ªå®šä¹‰çš„<ul>
<li>è¦åœ¨beanæ ‡ç­¾ä¸­å†™ä¸Šinit-methodå±æ€§</li>
</ul>
</li>
<li>é”€æ¯(ä½¿ç”¨åé”€æ¯)-è°ƒç”¨destoryMethod()æ–¹æ³•,æ–¹æ³•åæ˜¯è‡ªå®šä¹‰çš„<ul>
<li>è¦åœ¨beanæ ‡ç­¾ä¸­å†™ä¸ŠdestoryMethodå±æ€§</li>
</ul>
</li>
</ol>
<p>ä»£ç å•¥çš„çœ‹åŸæ¥çš„ç¬”è®°</p>
<p><strong>IOCå®¹å™¨åˆ›å»ºæ—¶å°±ä¼šåˆ›å»ºbean,è€Œä¸æ˜¯è·å–beanæ—¶æ‰åˆ›å»ºå¯¹è±¡-å‰ææ˜¯é»˜è®¤ä¸ºå•ä¾‹,å¦‚æœä¿®æ”¹ä¸ºå¤šä¾‹prototype,è¿™æ—¶åˆ›å»ºIOCå®¹å™¨å¹¶ä¸ä¼šåˆ›å»ºbeanå¯¹è±¡,è¦åœ¨è·å–beanæ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡-æ‰§è¡Œä¸‰ä¸ªæ­¥éª¤</strong></p>
<blockquote>
<p>åç½®å¤„ç†å™¨<br>beançš„åç½®å¤„ç†å™¨ä¼šåœ¨ç”Ÿå‘½å‘¨æœŸçš„åˆå§‹è™å•Šå‰åæ·»åŠ é¢å¤–çš„æ“ä½œ<br>éœ€è¦å®ç°BeanProcessoræ¥å£ä¸”é…ç½®åˆ°IOCå®¹å™¨ä¸­<br><strong>é…ç½®å®Œ,IOCå®¹å™¨ä¸­æ‰€æœ‰çš„beanéƒ½ä¼šæœ‰è¿™ä¸ªåŠŸèƒ½</strong></p>
</blockquote>
<p>é…ç½®:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBeanPostProcessor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.process.MyBeanPostProcessor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.process;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.BeansException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.config.BeanPostProcessor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeanPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="comment">//æ­¤æ–¹æ³•åœ¨beançš„ç”Ÿå‘½å‘¨æœŸåˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;MyBeanPostProcessor----&gt;åç½®å¤„ç†å™¨çš„postProcessBeforeInitialization&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">        <span class="comment">//æ­¤æ–¹æ³•åœ¨beançš„ç”Ÿå‘½å‘¨æœŸåˆå§‹åŒ–ä¹‹åæ‰§è¡Œ</span></span><br><span class="line">        System.out.println(<span class="string">&quot;MyBeanPostProcessor----&gt;åç½®å¤„ç†å™¨çš„postProcessAfterInitialization&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¿™ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ä¸é‡å†™æ˜¯ä¸ä¼šæŠ¥çº¢çš„,è¿™ä¹Ÿè¯´æ˜:<strong>æ–¹æ³•æœ‰é»˜è®¤çš„æ–¹æ³•ä½“æˆ–è€…ç”¨staticé™æ€ä¿®é¥°äº†</strong><br>æ‰“å¼€æºæ–‡ä»¶å¯çœ‹åˆ°:<br>è¯´æ˜æ˜¯æœ‰é»˜è®¤çš„æ–¹æ³•ä½“</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">default</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">	<span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">default</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException &#123;</span><br><span class="line">	<span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="FactoryBean"><a href="#FactoryBean" class="headerlink" title="FactoryBean"></a>FactoryBean</h4><blockquote>
<p>ä¸€å¥è¯æ€»ç»“,é…ç½®FactoryBeanç±»å‹çš„bean,åœ¨è·å–bean(getBean)æ—¶å¾—åˆ°çš„ä¸æ˜¯classå±æ€§,è€Œæ˜¯geObject()æ–¹æ³•çš„è¿”å›å€¼</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.factory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.FactoryBean;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * FactoryBeanæ˜¯ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç±»å®ç°è¯¥æ¥å£</span></span><br><span class="line"><span class="comment"> * å…¶ä¸­æœ‰ä¸‰ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="comment"> * getObject()  æä¾›ä¸€ä¸ªå¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†</span></span><br><span class="line"><span class="comment"> * getObjectType()  è®¾ç½®æ‰€æä¾›å¯¹è±¡çš„ç±»å‹</span></span><br><span class="line"><span class="comment"> * isSingleton()    æ‰€æä¾›çš„å¯¹è±¡æ˜¯å¦å•ä¾‹</span></span><br><span class="line"><span class="comment"> * å½“æŠŠFactoryBeançš„å®ç°ç±»é…ç½®ä¸ºbeanæ—¶ï¼Œä¼šå°†å½“å‰ç±»ä¸­getObject()  æ–¹æ³•æ‰€è¿”å›çš„å¯¹è±¡äº¤ç»™IOCå®¹å™¨ç®¡ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> User.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®FactoryBean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.factory.UserFactoryBean&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFactoryBean</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-factory.xml&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> ioc.getBean(User.class);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿™ä¸ªæ—¶å€™å°±ä¸ç”¨å•ç‹¬é…ç½®UserBeanäº†,FactoryBeanç›´æ¥ä»£æ›¿äº†è¿™ç§å½¢å¼,ä»¥åSpringæ•´åˆMyBatisä¹Ÿæ˜¯ä½¿ç”¨çš„è¿™ç§æ–¹å¼</strong></p>
<h4 id="åŸºäºxmlçš„è‡ªåŠ¨è£…é…"><a href="#åŸºäºxmlçš„è‡ªåŠ¨è£…é…" class="headerlink" title="åŸºäºxmlçš„è‡ªåŠ¨è£…é…"></a>åŸºäºxmlçš„è‡ªåŠ¨è£…é…</h4><blockquote>
<p>è‡ªåŠ¨è£…é…,è¿™å—å°±æ˜¯å¾ˆé‡è¦çš„äº†<br><em>åˆšæ‰å›é¡¾äº†ä¸€ä¸‹ä¹‹å‰å†™çš„ä¹¦åŸbooké¡¹ç›®,ç®—ä¸ä¸Šé¡¹ç›®å§,ç»ˆäºèƒ½è·‘èµ·æ¥äº†,åŸæ¥æ˜¯å°‘äº†ä¸€ä¸ªjaråŒ…,å¯¼å…¥é‚£ä¸ªjaråŒ…å°±okäº†</em></p>
</blockquote>
<p>é‚£ä¸ªBä¸‰å±‚æ¶æ„,Controllerå±‚è°ƒç”¨serviceå±‚,serviceå±‚è°ƒç”¨daoå±‚,daoå’Œæ•°æ®åº“è¿›è¡Œäº¤äº’</p>
<blockquote>
<p>å…ˆçœ‹çœ‹æ‰‹åŠ¨è£…é…,ä¸æ˜¯å•Š,æ˜¯åŸå§‹æ–¹å¼<br>ä»€ä¹ˆController,Service,Dao,éƒ½è¿˜æ˜¯åŸæ¥çš„ä¸œè¥¿<br>ä¸»è¦æ˜¯é…ç½®:<br>è¿˜æ˜¯ä»¥å‰çš„æ–¹å¼-<strong>å¼•ç”¨å¤–éƒ¨bean</strong></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userController&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.controller.UserController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.service.impl.UserServiceImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAutowire</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-autowire-xml.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserController</span> <span class="variable">userController</span> <span class="operator">=</span> ioc.getBean(UserController.class);</span><br><span class="line">    userController.saveUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>è‡ªåŠ¨è£…é…</strong></p>
</blockquote>
<ol>
<li>autowireå±æ€§è®¾ç½®è‡ªåŠ¨è£…é…çš„ç­–ç•¥<ul>
<li>no,defaultè¡¨ç¤ºä¸è£…é…,å°±ç›¸å½“äºæ²¡æœ‰é…ç½®</li>
<li>byType,æ ¹æ®ç±»å‹,åœ¨controllerçš„beanä¸­é…ç½®æ—¶,ç›¸å½“äºä¼šè‡ªåŠ¨è£…é…service,å°±æ˜¯Controllerä¸­ç”¨åˆ°serviceæ—¶,iocå®¹å™¨ä¼šè‡ªåŠ¨åŒ¹é…å¯¹åº”ç±»å‹çš„bean(service),æ­¤æ—¶å°±èƒ½å®ç°è‡ªåŠ¨è£…é…çš„æ•ˆæœ</li>
<li>byName,æ ¹æ®å±æ€§å,å½“ä¸€ä¸ªç±»å¯¹åº”çš„beanæœ‰å¤šä¸ªæ—¶,å°±å¯ä»¥ç”¨åˆ°byName,å½“ç„¶,è°æ²¡äº‹ä¼šæŠŠä¸€ä¸ªç±»é…ç½®å¤šä¸ªbean</li>
</ul>
</li>
</ol>
<blockquote>
<p>ä¸‹é¢æ˜¯byTypeçš„æ¼”ç¤º</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userController&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.controller.UserController&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.service.impl.UserServiceImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.spring.dao.impl.UserDaoImpl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨æ„:<br>è‹¥é€šè¿‡ç±»å‹æ²¡æœ‰æ‰¾åˆ°ä»»ä½•ä¸€ä¸ªç±»å‹åŒ¹é…çš„bean,æ­¤æ—¶ä¸è£…é…,å±æ€§ä½¿ç”¨é»˜è®¤å€¼<br>è‹¥é€šè¿‡ç±»å‹æ‰¾åˆ°äº†å¤šä¸ªç±»å‹åŒ¹é…çš„bean,æ­¤æ—¶ä¼šæŠ›å¼‚å¸¸:noUniqueBeanDefinitionException<br>æ€»ç»“å°±æ˜¯,byTypeç”¨çš„æœ€å¤š,byNameç”¨çš„å¾ˆå°‘,ä¸€èˆ¬ä¸ç”¨</p>
</blockquote>
<h4 id="åŸºäºæ³¨è§£ç®¡ç†bean"><a href="#åŸºäºæ³¨è§£ç®¡ç†bean" class="headerlink" title="åŸºäºæ³¨è§£ç®¡ç†bean"></a>åŸºäºæ³¨è§£ç®¡ç†bean</h4><ol>
<li>ç»™ç±»å’Œå±æ€§åŠ ä¸Šæ³¨è§£(æ ‡è®°)</li>
<li>åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰«æç»„ä»¶<br>è¿™æ ·å°±æˆäº†å•Š<br>æ²¡å•¥éš¾çš„</li>
</ol>
<p><strong>4ä¸ªå¸¸ç”¨æ³¨è§£</strong></p>
<blockquote>
<p>@Component:å°†ç±»æ ‡è¯†ä¸ºæ™®é€šç»„ä»¶<br>@Controller:å°†ç±»æ ‡è¯†ä¸ºæ§åˆ¶å±‚ç»„ä»¶<br>@Service:å°†ç±»æ ‡è¯†ä¸ºä¸šåŠ¡å±‚ç»„ä»¶<br>@Repository:å°†ç±»æ ‡è¯†ä¸ºæŒä¹…å±‚ç»„ä»¶<br><strong>è¿™å››ä¸ªæ³¨è§£,åŠŸèƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„,æ˜¯ä¸ºäº†ä¾¿äºç¨‹åºå‘˜åŒºåˆ†æ‰å†™æˆè¿™æ ·</strong></p>
</blockquote>
<h5 id="æ‰«æ"><a href="#æ‰«æ" class="headerlink" title="æ‰«æ"></a>æ‰«æ</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.spring&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ²¡å•¥å¤æ‚çš„,ä¸»è¦æ˜¯ä¸€äº›ç»†èŠ‚è¦è®°ä½<br><strong>è¯´çš„ç›´ç™½ä¸€ç‚¹,å°±æ˜¯ä¸€ä¸ªç±»åŠ äº†ä¸Šé¢çš„æ³¨è§£,é‚£è¿™ä¸ªç±»åœ¨iocå®¹å™¨ä¸­å°±æœ‰äº†å¯¹åº”çš„bean</strong></p>
<blockquote>
<p><em>è¿™ä¸ªæ€ä¹ˆè¯´å‘¢,å¯ä»¥é€šè¿‡æ¥å£è·å–bean,ä½†æ˜¯ç»™ä¸€ä¸ªå®ç°ç±»è®¾ç½®äº†beançš„è¯,å°±ä¼šå‡ºç°æ‰¾ä¸åˆ°åŒ¹é…çš„ç±»,ä¼šæŠŠå®ç°ç±»å’Œæ¥å£éƒ½æ‰¾å‡ºæ¥,å°±å¾ˆå¥‡æ€ª,ä¸çŸ¥é“æ€ä¹ˆäº†å°±å‡ºç°äº†è¿™ä¸ªbug,åˆä¸çŸ¥é“å’‹äº†è¿™ä¸ªbugå°±æ²¡äº†,å¥‡æ€ª</em></p>
</blockquote>
<p>è¿˜è¦æ³¨æ„ä¸€ä¸ªäº‹</p>
<blockquote>
<p>ä»¥åSpringMVCè¦æ‰«æçš„æ˜¯æ§åˆ¶å±‚,è€ŒSpringè¦æ‰«æé™¤äº†æ§åˆ¶å±‚ä»¥å¤–çš„æ‰€æœ‰ç»„ä»¶<br>æ‰€ä»¥å°±è¦æ³¨æ„ä¸€ä¸ªä¸œè¥¿,å°±æ˜¯æ‰«ææ’é™¤</p>
</blockquote>
<p>springæ‰«ææ’é™¤æ§åˆ¶å±‚:</p>
<blockquote>
<p>æ ¹æ®æ³¨è§£æ¥æ’é™¤-annotation</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ‰«æç»„ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.spring&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å¯ä»¥å®ç°æ’é™¤æ‰æ§åˆ¶å±‚äº†</p>
<blockquote>
<p>æ ¹æ®ç±»å‹æ¥æ’é™¤-assignable<br><strong>åªéœ€è¦æŠŠå…¨ç±»åå†™åœ¨expressionä¸­å°±è¡Œ</strong></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ‰«æç»„ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.spring&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;assignable&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;com.zzmr.spring.controller.UserController&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä»¥åç”¨å“ªä¸ªå¤š?ç”¨ç¬¬ä¸€ä¸ªæ ¹æ®æ³¨è§£æ’é™¤æ¯”è¾ƒå¤š,å› ä¸ºç­‰åˆ°SSMæ•´åˆæ—¶,Springè´Ÿè´£æ‰«æé™¤äº†æ§åˆ¶å±‚ä¹‹å¤–çš„æ‰€æœ‰ç±»å‹,è€Œæ§åˆ¶å±‚ä¼šæœ‰å¾ˆå¤šç±»,æ­¤æ—¶ä¸€ä¸ªä¸€ä¸ªæ’é™¤å¾ˆéº»çƒ¦,å¹¶æ²¡æœ‰ç›´æ¥ç”¨æ³¨è§£æ’é™¤æ–¹ä¾¿</strong></p>
<p>åŒ…å«çš„,æˆ‘æ„Ÿè§‰å°±æ²¡å¿…è¦å†™äº†<br>ä½†è¿˜æ˜¯å†™ä¸€ä¸‹å§,ä¸‡ä¸€ä»¥åç¢°åˆ°äº†<br>å†™åŒ…å«<strong>å‰ææ˜¯åœ¨context-component-scanæ ‡ç­¾ä¸­è®¾ç½®use-default-filters&#x3D;â€falseâ€</strong>,å› ä¸ºæ‰«ææ ‡ç­¾é»˜è®¤æ˜¯æ‰«ææ•´ä¸ªåŒ…çš„,éƒ½æ‰«ææ•´ä¸ªåŒ…äº†,å†è®¾ç½®ä¸€ä¸ªåŒ…å«,ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰,æ‰€ä»¥è¦æŠŠé»˜è®¤æ‰«ææ•´ä¸ªåŒ…ç»™å…³äº†,å°±å¯ä»¥å®ç°åªæ‰«æç‰¹å®šçš„åŒ…äº†</p>
<blockquote>
<p>åŒæ ·æ˜¯æ ¹æ®æ³¨è§£åŒ…å«:</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ‰«æç»„ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.spring&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ ¹æ®ç±»å‹åŒ…å«:</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ‰«æç»„ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.spring&quot;</span> <span class="attr">use-default-filters</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;assignable&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;com.zzmr.spring.controller.UserController&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>beançš„id<br>ä½¿ç”¨æ³¨è§£åŠ æ‰«æ,é‚£æ¯ä¸ªbeançš„idæ˜¯ä»€ä¹ˆ?<br><strong>é€šè¿‡æ³¨è§£+æ‰«ææ‰€é…ç½®çš„beançš„id,é»˜è®¤å€¼ä¸ºç±»çš„å°é©¼å³°,å³ç±»å‹çš„é¦–å­—æ¯ä¸ºå°å†™çš„ç»“æœ</strong></p>
</blockquote>
<p>è·å–æµ‹è¯•<br>è¿™é‡Œä¸ºä»€ä¹ˆè¦ç”¨Implå®ç°ç±»?å› ä¸ºåŠ æ³¨è§£çš„åœ°æ–¹æ˜¯å®ç°ç±»ä¸Šå•Š,IOCåªæœ‰å®ç°ç±»çš„beançš„id,å¹¶ä¸èƒ½æ‰¾åˆ°æ¥å£ä¸Šçš„id</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testByMe</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-ioc-annotation.xml&quot;</span>);</span><br><span class="line">    <span class="type">UserController</span> <span class="variable">userController</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;userController&quot;</span>,UserController.class);</span><br><span class="line">    System.out.println(userController);</span><br><span class="line">    <span class="comment">//å¯ä»¥ç”¨æ¥å£è·å–ï¼Œä½†æ˜¯å‰ææ˜¯è¿™ä¸ªæ¥å£è¦æœ‰å¯¹åº”çš„å®ç°ç±»</span></span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;userServiceImpl&quot;</span>,UserService.class);</span><br><span class="line">    System.out.println(userService);</span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> ioc.getBean(<span class="string">&quot;userDaoImpl&quot;</span>,UserDao.class);</span><br><span class="line">    System.out.println(userDao);</span><br><span class="line">    <span class="comment">//userController.saveUser();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿˜å¯ä»¥è‡ªå®šä¹‰åå­—<br>å°±æ˜¯åœ¨æ³¨è§£ååŠ ä¸Šæ‹¬å·,ç„¶åç”¨åŒå¼•å·æ¡†ä½è‡ªå®šä¹‰idå†…å®¹,è¿™æ—¶,å¯¹åº”çš„UserControllerçš„beançš„idå°±å˜æˆäº†userControllerByTest,ä½†æ˜¯ä¸€èˆ¬æ²¡å¿…è¦æ”¹å§,æ²¡å•¥ä½œç”¨</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller(&quot;userControllerByTest&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å½“ç„¶æŸäº›ç‰¹æ®Šæƒ…å†µè¿˜æ˜¯ä¼šç”¨åˆ°çš„,æ¯”å¦‚åœ¨SpringMVCä¸­ä½¿ç”¨çš„æ–‡ä»¶ä¸Šä¼ è§£æå™¨,å°±å¿…é¡»è®¾ç½®id</strong></p>
<h5 id="åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…"><a href="#åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…" class="headerlink" title="åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…"></a>åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…</h5><p><em>åŸæ¥ç¬”è®°å†™çš„æ˜¯ä¸ªå•¥å•Š,ä¸€å¨å±</em></p>
<blockquote>
<p>ç›´æ¥æ‹¿ä¾‹å­è¯´è¯,åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…,é¦–å…ˆå°±æ˜¯è¦ç”¨åˆ°@Autowired,æ¯”å¦‚,è¦åœ¨Controllerä¸­åˆ›å»ºServiceå¯¹è±¡,ä¹‹å‰æ˜¯åœ¨xmlä¸­çš„beanä¸­å®ç°è‡ªåŠ¨è£…é…çš„,è€Œç°åœ¨æ˜¯æ ¹æ®æ³¨è§£å®ç°,æ‰€ä»¥è¦åœ¨å£°æ˜Serviceå¯¹è±¡æ—¶åŠ ä¸Š@Autowiredæ³¨è§£:</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserService userService;</span><br></pre></td></tr></table></figure>

<p>ä¹‹å‰æ‹¿xmlå®ç°è‡ªåŠ¨è£…é…æ—¶è¦æ±‚å¿…é¡»æœ‰setæ–¹æ³•,è€ŒåŸºäºæ³¨è§£å®ç°å°±ä¸éœ€è¦æœ‰setæ–¹æ³•äº†</p>
<ol>
<li>@AutoWiredèƒ½å¤Ÿæ ‡è¯†çš„ä½ç½®<ul>
<li>æ ‡è¯†åœ¨æˆå‘˜å˜é‡ä¸Š-æ­¤æ—¶ä¸éœ€è¦è®¾ç½®æˆå‘˜å˜é‡çš„setæ–¹æ³•(è€å¸ˆæ¨èçš„)</li>
<li>æ ‡è¯†åœ¨setæ–¹æ³•ä¸Š</li>
<li>æ ‡è¯†åœ¨ä¸ºå½“å‰æˆå‘˜å˜é‡èµ‹å€¼çš„æœ‰å‚æ„é€ ä¸Š<br>è¿™ç©æ„è¿˜æ˜¯æœ‰è®²ç©¶çš„,ç°é˜¶æ®µè¿˜æ˜¯æ ‡è¯†åœ¨æˆå‘˜å˜é‡ä¸Šå§</li>
</ul>
</li>
<li>@Autowiredæ³¨è§£çš„åŸç†<ul>
<li>byTypeè¿˜æ˜¯byName?è‚¯å®šæ˜¯byType,æˆ–è€…è¯´é»˜è®¤æ˜¯byType,å› ä¸ºè¿™ä¸ªæ³¨è§£æ˜¯åŠ åœ¨æˆå‘˜å˜é‡serviceä¸Šçš„,è€Œiocç®¡ç†çš„beanæ˜¯serviceçš„å®ç°ç±»-serviceImpl,åå­—éƒ½ä¸åŒ¹é…,byNameæ˜¯æ‰¾ä¸åˆ°çš„,æ‰€ä»¥@Autowiredæ³¨è§£çš„é»˜è®¤å®ç°æ˜¯byType</li>
<li>å¦‚æœæœ‰å¤šä¸ªç±»å‹åŒ¹é…çš„bean,æ­¤æ—¶ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºbyNameçš„æ–¹å¼å®ç°è‡ªåŠ¨è£…é…</li>
<li>è‹¥byTypeå’ŒbyNameçš„æ–¹å¼éƒ½æ— æ³•å®ç°è‡ªåŠ¨è£…é…,å³IOCå®¹å™¨ä¸­æœ‰å¤šä¸ªç±»å‹åŒ¹é…çš„bean,ä¸”è¿™äº›beançš„idå’Œè¦èµ‹å€¼çš„å±æ€§çš„å±æ€§åéƒ½ä¸ä¸€è‡´,æ­¤æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸-NoUniqueBeanDefinitionException,æ­¤æ—¶å¯ä»¥åœ¨è¦èµ‹å€¼çš„å±æ€§ä¸Š,æ·»åŠ ä¸€ä¸ª@Qualifier(â€œâ€)æ³¨è§£,ç„¶åæ‹¬å·é‡ŒæŒ‡å®šä¸ŠæŸä¸€ä¸ªbeançš„id,æ¥èµ‹å€¼å°±å¥½äº†</li>
</ul>
</li>
</ol>
<blockquote>
<p>ä½†ä¸Šé¢çš„æƒ…å†µä¼šå‡ºç°å—,å¾ˆå°çš„å‡ ç‡å§,å“ªæœ‰byTypeä¸è¡Œ,byNameåˆä¸è¡Œçš„å“ˆå“ˆå“ˆå“ˆå“ˆ<br>ä»¥åçš„çœŸå®æƒ…å†µæ˜¯,ä¸€ä¸ªç±»å‹çš„beanåªä¼šé…ç½®ä¸€æ¬¡,è€Œä¸ä¼šé…ç½®è¿™ä¹ˆå¤š<br><strong>ä»¥åçš„ç”¨æ³•å°±æ˜¯,åœ¨æ¯ä¸ªå±‚ä¸ŠåŠ ä¸Šè¯¥æœ‰çš„æ³¨è§£,ç„¶ååœ¨éœ€è¦èµ‹å€¼çš„æˆå‘˜å˜é‡ä¸ŠåŠ ä¸Š@Autowiredæ³¨è§£,å…¶ä»–å•¥éƒ½ä¸éœ€è¦å•Šå“ˆå“ˆå“ˆ</strong></p>
</blockquote>
<ol start="3">
<li>ç‰¹æ®Šçš„æƒ…å†µ<ul>
<li>@Autowiredæ³¨è§£æœ‰ä¸€ä¸ªrequiredå±æ€§,é»˜è®¤æ˜¯true,è¦æ±‚å¿…é¡»å®Œæˆè‡ªåŠ¨è£…é…,è®¾ç½®æˆfalse,æ­¤æ—¶èƒ½è£…é…åˆ™è£…é…,ä¸èƒ½è£…é…åˆ™ä½¿ç”¨é»˜è®¤å€¼</li>
</ul>
</li>
</ol>
<p>IOCç»ˆäºçœ‹å®Œäº†!</p>
<h3 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h3><h4 id="åœºæ™¯æ¨¡æ‹Ÿ"><a href="#åœºæ™¯æ¨¡æ‹Ÿ" class="headerlink" title="åœºæ™¯æ¨¡æ‹Ÿ"></a>åœºæ™¯æ¨¡æ‹Ÿ</h4><p>æ¨¡æ‹Ÿä»€ä¹ˆ,å°±æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªç¨‹åº,è¿™ä¸ªç¨‹åºé‡Œæœ‰ä¸€äº›éè¿ç»­æ‰§è¡Œçš„ä»£ç ,è¿™äº›ä»£ç ä¹Ÿä¸æ˜¯æ ¸å¿ƒä»£ç ,ä½†æ˜¯å°±æ˜¯å¿…é¡»è¦ç”¨,æ¯”å¦‚:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ—¥å¿—ï¼šæ–¹æ³•åï¼šadd  å‚æ•°ï¼š&quot;</span> + i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i + j;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ–¹æ³•å†…éƒ¨, result:&quot;</span> + result);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;æ—¥å¿—ï¼šæ–¹æ³•åï¼šadd  ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åƒé‡Œé¢çš„ä¸¤è¡Œæ—¥å¿—ä»£ç ,ä¸€ä¸ªæ–¹æ³•é‡Œå°±éœ€è¦å†™ä¸Šä¸¤ä¸ª,å››ä¸ªæ–¹æ³•å°±éœ€è¦å†™ä¸Šå…«ä¸ª,è€Œä¸”ç”±äºæ˜¯éè¿ç»­æ‰§è¡Œçš„ä»£ç ,ä¹Ÿä¸èƒ½åƒJDBCUtilsä¸€æ ·å°è£…</p>
<blockquote>
<p>é—®é¢˜å°±å‡ºç°äº†,æ¯”å¦‚ç°åœ¨è¦å»æ›´æ”¹æ—¥å¿—çš„æ ¼å¼,é‚£å°±è¦å»æ›´æ”¹æ‰€æœ‰ä½¿ç”¨åˆ°åœ°æ–¹,è¿™å°±å¯¼è‡´ç»´æŠ¤æˆæœ¬å¤§å¤§å¢åŠ <br>æ‰€ä»¥å°±è¦è§£è€¦<br>é‡ç‚¹å°±æ˜¯å¦‚ä½•è§£è€¦,å¦‚ä½•æŠŠè¿™äº›ä»£ç æŠ½å–å‡ºæ¥,å†æ”¾å›å».</p>
</blockquote>
<p>å¼•å…¥â€ä»£ç†â€<br>ä½¿ç”¨ä»£ç†å‰:</p>
<!-- ![1667030350739](image/ssm_thinking/1667030350739.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221029155912.png" alt="20221029155912"></p>
<p>ä½¿ç”¨ä»£ç†å:</p>
<!-- ![1667030310977](image/ssm_thinking/1667030310977.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221029155834.png" alt="20221029155834"></p>
<blockquote>
<p>è¿™æ¬¡ç®—æ˜¯æ˜ç™½äº†,ç›¸å½“äºä»€ä¹ˆå‘¢<br>å½“å‡†å¤‡è°ƒç”¨addæ–¹æ³•æ—¶,ä¼šå…ˆè°ƒç”¨ä»£ç†çš„addæ–¹æ³•,ä»£ç†çš„addæ–¹æ³•ä¼šè®°å½•ä¸‹addçš„å‚æ•°,ä»¥åŠæ–¹æ³•å,ç„¶åè°ƒç”¨ç›®æ ‡çš„addæ–¹æ³•,è¿™æ—¶è®¡ç®—,å°†ç»“æœè¿”å›ç»™ä»£ç†æ–¹æ³•,ä»£ç†æ–¹æ³•å†æ•´åˆä¸€ä¸‹,ç„¶åè¿”å›ç»™è°ƒç”¨è€…</p>
</blockquote>
<h5 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="headerlink" title="é™æ€ä»£ç†"></a>é™æ€ä»£ç†</h5><p><em>é™æ€ä»£ç†è¿˜æ˜¯å¾ˆç®€å•çš„</em><br><strong>è¿™è¿˜æ˜¯è¦æ³¨æ„ä¸€ç‚¹,ä»£ç†ç±»è¦å’Œç›®æ ‡ç±»å®ç°ç›¸åŒçš„æ¥å£</strong></p>
<p>æ­¤æ—¶çš„ç›®æ ‡æ–¹æ³•(è¢«ä»£ç†çš„)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CalculatorByMeImpl</span> <span class="keyword">implements</span> <span class="title class_">CalculatorByMe</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i + j;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•å†…éƒ¨, result:&quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i - j;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•å†…éƒ¨, result:&quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mul</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i * j;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•å†…éƒ¨, result:&quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">div</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i / j;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•å†…éƒ¨, result:&quot;</span> + result);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç†ç±»:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CalculatorStaticProxyByMe</span> <span class="keyword">implements</span> <span class="title class_">CalculatorByMe</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CalculatorByMeImpl target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CalculatorStaticProxyByMe</span><span class="params">(CalculatorByMeImpl target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œæ–¹æ³•åï¼šadd, å‚æ•°ï¼š&quot;</span> + i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> target.add(i, j);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œç»“æœï¼šresult,ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œæ–¹æ³•åï¼šsub, å‚æ•°ï¼š&quot;</span> + i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> target.sub(i, j);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œç»“æœï¼šresult,ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">mul</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œæ–¹æ³•åï¼šmul, å‚æ•°ï¼š&quot;</span> + i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> target.mul(i, j);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œç»“æœï¼šresult,ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">div</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œæ–¹æ³•åï¼šdiv, å‚æ•°ï¼š&quot;</span> + i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> target.div(i, j);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œç»“æœï¼šresult,ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testByProxy</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">CalculatorStaticProxyByMe</span> <span class="variable">cal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CalculatorStaticProxyByMe</span>(<span class="keyword">new</span> <span class="title class_">CalculatorByMeImpl</span>());</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> cal.sub(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¦åˆ›å»ºçš„æ˜¯ä»£ç†å¯¹è±¡,è€Œä¸æ˜¯ç›®æ ‡å¯¹è±¡</p>
<p>æ­¤æ—¶è¿˜å¯ä»¥å¢åŠ ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œæ–¹æ³•åï¼šadd, å‚æ•°ï¼š&quot;</span> + i + <span class="string">&quot;,&quot;</span> + j);</span><br><span class="line">        result = target.add(i, j);</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼Œç»“æœï¼šresult,ï¼š&quot;</span> + result);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ—¥å¿—ï¼šå‡ºç°å¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ‰€ä»¥è¯´é™æ€ä»£ç†ç¡®å®å®ç°äº†è§£è€¦,ä½†æ˜¯ç”±äºä»£ç éƒ½æ˜¯å†™æ­»äº†,å®Œå…¨ä¸å…·å¤‡ä»»ä½•çš„çµæ´»æ€§,å°±æ‹¿æ—¥å¿—åŠŸèƒ½æ¥è¯´,å°†æ¥å…¶ä»–åœ°æ–¹ä¹Ÿéœ€è¦é™„åŠ æ—¥å¿—,é‚£è¿˜å¾—å†å£°æ˜æ›´å¤šä¸ªé™æ€ä»£ç†ç±»,é‚£å°±äº§ç”Ÿäº†å¤§é‡é‡å¤çš„ä»£ç ,æ—¥å¿—åŠŸèƒ½è¿˜æ˜¯åˆ†æ•£çš„,æ²¡æœ‰ç»Ÿä¸€ç®¡ç†<br>æå‡ºè¿›ä¸€æ­¥çš„éœ€æ±‚,å°†æ—¥å¿—åŠŸèƒ½é›†ä¸­åˆ°ä¸€ä¸ªä»£ç†ç±»ä¸­,å°†æ¥æœ‰ä»»ä½•æ—¥å¿—éœ€è¦,éƒ½é€šè¿‡è¿™ä¸€ä¸ªä»£ç†ç±»æ¥å®ç°,è¿™å°±éœ€è¦ä½¿ç”¨åŠ¨æ€ä»£ç†æŠ€æœ¯</p>
</blockquote>
<h5 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h5><p>è¿™é‡Œå¼•å…¥Proxyç±»,ä»¥åŠProxy.newProxyInstance(),é‡Œé¢æœ‰ä¸‰ä¸ªå‚æ•°,ç¬¬ä¸€ä¸ªClassLoaderç±»åŠ è½½å™¨,ä½ è¿˜è®°å¾—ç±»åŠ è½½å™¨æ˜¯ä»€ä¹ˆå—</p>
<ul>
<li>ClassLoader loader    æŒ‡å®šåŠ è½½åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»çš„ç±»åŠ è½½å™¨          åªéœ€è¦è·å–æŸä¸ªç±»å‹çš„classå¯¹è±¡,ä¸éœ€è¦è·å–å¯¹è±¡çš„å®ç°ç±»å¯¹è±¡,é‚£å¦‚ä½•è·å–ç±»åŠ è½½å™¨?</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ProxyFactoryByMe.class.getClassLoader();</span><br><span class="line"><span class="comment">//è¿˜å¯ä»¥è¿™æ ·</span></span><br><span class="line"><span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader();</span><br></pre></td></tr></table></figure>

<ul>
<li>Class[] interfaces    è·å–ç›®æ ‡å¯¹è±¡å®ç°çš„æ‰€æœ‰æ¥å£çš„classå¯¹è±¡çš„æ•°ç»„</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt;[] interfaces = target.getClass().getInterfaces();</span><br></pre></td></tr></table></figure>

<ul>
<li>InvocatonHandler h    è®¾ç½®ä»£ç†ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¦‚ä½•é‡å†™,è¿™é‡Œä½¿ç”¨äº†åŒ¿åå†…éƒ¨ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">InvocationHandler</span> <span class="variable">h</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * proxy    è¡¨ç¤ºä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">         * method   è¡¨ç¤ºè¦é‡å†™çš„æŠ½è±¡æ–¹æ³•/è¦æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">         * args     è¡¨ç¤ºè¦æ‰§è¡Œçš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ—¥å¿— ï¼Œ æ–¹æ³•ï¼š&quot;</span>+method.getName()+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;å‚æ•°ï¼š&quot;</span>+ Arrays.toString(args));</span><br><span class="line"></span><br><span class="line">            result = method.invoke(target, args);</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;æ—¥å¿— ï¼Œ æ–¹æ³•ï¼š&quot;</span>+method.getName()+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;ç»“æœï¼šï¼š&quot;</span>+ result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        <span class="comment">//    å¼‚å¸¸</span></span><br><span class="line">            System.out.println(<span class="string">&quot;æ—¥å¿— ï¼Œ æ–¹æ³•ï¼š&quot;</span>+method.getName()+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;å¼‚å¸¸ï¼šï¼š&quot;</span>+ e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç»“æŸ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„è¿˜æ˜¯JDKåŠ¨æ€ä»£ç†<br>æµ‹è¯•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testByProxyFactory</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ProxyFactoryByMe</span> <span class="variable">proxyFactoryByMe</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyFactoryByMe</span>(<span class="keyword">new</span> <span class="title class_">CalculatorByMeImpl</span>());</span><br><span class="line">    <span class="type">CalculatorByMe</span> <span class="variable">proxy</span> <span class="operator">=</span> (CalculatorByMe) proxyFactoryByMe.getProxy();</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> proxy.div(<span class="number">2</span>, -<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åŠ¨æ€ä»£ç†çš„ä»£ç (å·¥å‚)</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationTargetException;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyFactoryByMe</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProxyFactoryByMe</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ClassLoader classLoader = ProxyFactoryByMe.class.getClassLoader();</span></span><br><span class="line">        <span class="comment">//è¿˜å¯ä»¥è¿™æ ·</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="built_in">this</span>.getClass().getClassLoader();</span><br><span class="line">        Class&lt;?&gt;[] interfaces = target.getClass().getInterfaces();</span><br><span class="line"></span><br><span class="line">        <span class="type">InvocationHandler</span> <span class="variable">h</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * proxy    è¡¨ç¤ºä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="comment">                 * method   è¡¨ç¤ºè¦é‡å†™çš„æŠ½è±¡æ–¹æ³•/è¦æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">                 * args     è¡¨ç¤ºè¦æ‰§è¡Œçš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line"></span><br><span class="line">                <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;æ—¥å¿— ï¼Œ æ–¹æ³•ï¼š&quot;</span>+method.getName()+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;å‚æ•°ï¼š&quot;</span>+ Arrays.toString(args));</span><br><span class="line"></span><br><span class="line">                    result = method.invoke(target, args);</span><br><span class="line"></span><br><span class="line">                    System.out.println(<span class="string">&quot;æ—¥å¿— ï¼Œ æ–¹æ³•ï¼š&quot;</span>+method.getName()+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;ç»“æœï¼šï¼š&quot;</span>+ result);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                <span class="comment">//    å¼‚å¸¸</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;æ—¥å¿— ï¼Œ æ–¹æ³•ï¼š&quot;</span>+method.getName()+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;å¼‚å¸¸ï¼šï¼š&quot;</span>+ e);</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;ç»“æŸ&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(classLoader, interfaces, h);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ä¸ªcglibåŠ¨æ€ä»£ç†,æœ€ç»ˆç”Ÿæˆçš„ä»£ç†ç±»,æ±‡é›†æˆç›®æ ‡ç±»,å¹¶ä¸”å’Œç›®æ ‡ç±»åœ¨ç›¸åŒçš„åŒ…ä¸‹<br>ä½†æ˜¯è¿™ä¸ªä¸æ˜¯å¾ˆé‡è¦<br>æ‰€ä»¥å°±ç®—äº†å•Š</p>
<blockquote>
<p>JavaåŠ¨æ€ä»£ç†å’Œcglibæ¯”è¾ƒ</p>
</blockquote>
<ol>
<li>ç”Ÿæˆä»£ç†ç±»æŠ€æœ¯ä¸åŒ<ul>
<li>javaåŠ¨æ€ä»£ç†ï¼šjdkè‡ªå¸¦ç±»ProxyGeneratorç”Ÿæˆclasså­—èŠ‚ç </li>
<li>cglibï¼šé€šè¿‡ASMæ¡†æ¶ç”Ÿæˆclasså­—èŠ‚ç æ–‡ä»¶</li>
</ul>
</li>
<li>ç”Ÿæˆä»£ç†ç±»çš„æ–¹å¼ä¸åŒ<ul>
<li>javaåŠ¨æ€ä»£ç†ï¼šä»£ç†ç±»ç»§æ‰¿java.lang.reflect.Proxyï¼Œå®ç°è¢«ä»£ç†ç±»çš„æ¥å£</li>
<li>cglibï¼šä»£ç†ç±»ç»§æ‰¿è¢«ä»£ç†ç±»ï¼Œå®ç°net.sf.cglib.proxy.Factory</li>
</ul>
</li>
<li>ç”Ÿæˆç±»æ•°é‡ä¸åŒ<ul>
<li>javaåŠ¨æ€ä»£ç†ï¼šç”Ÿæˆä¸€ä¸ªproxyç±»</li>
<li>cglibï¼šç”Ÿæˆä¸€ä¸ªproxyï¼Œä¸¤ä¸ªfastclassç±»</li>
</ul>
</li>
<li>è°ƒç”¨æ–¹å¼ä¸åŒ<ul>
<li>javaåŠ¨æ€ä»£ç†ï¼šä»£ç†ç±»-&gt;InvocationHandler-&gt;åå°„è°ƒç”¨è¢«ä»£ç†ç±»æ–¹æ³•</li>
<li>cglibï¼šä»£ç†ç±»-&gt;MethodInterceptor-&gt;è°ƒç”¨ç´¢å¼•ç±»invoke-&gt;ç›´æ¥è°ƒç”¨è¢«ä»£ç†ç±»æ–¹æ³•</li>
</ul>
</li>
<li>æ€§èƒ½æ¯”è¾ƒ<br>ç½‘ä¸Šæ‰¾åˆ°æ¯”è¾ƒå¤šçš„è¯´æ˜å¦‚ä¸‹ï¼š</li>
</ol>
<blockquote>
<p>åœ¨ jdk6ä¹‹å‰æ¯”ä½¿ç”¨ Javaåå°„æ•ˆç‡è¦é«˜ï¼Œåœ¨ jdk6ã€jdk7ã€jdk8 é€æ­¥å¯¹ JDK åŠ¨æ€ä»£ç†ä¼˜åŒ–ä¹‹åï¼Œåœ¨è°ƒç”¨æ¬¡æ•°è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼ŒJDK ä»£ç†æ•ˆç‡ é«˜äº CGLIB ä»£ç†æ•ˆç‡ã€‚åªæœ‰å½“è¿›è¡Œå¤§é‡è°ƒç”¨çš„æ—¶å€™ï¼Œjdk6 å’Œ jdk7 æ¯” CGLIB ä»£ç†æ•ˆç‡ä½ä¸€ç‚¹ï¼Œä½†æ˜¯åˆ° jdk8 çš„æ—¶å€™ï¼Œjdk ä»£ç†æ•ˆç‡é«˜äº CGLIB ä»£ç†ï¼Œæ€»ä¹‹ï¼Œæ¯ä¸€æ¬¡ jdk ç‰ˆæœ¬å‡çº§ï¼ŒJDK ä»£ç†æ•ˆç‡ éƒ½å¾—åˆ°æå‡ï¼Œè€Œ CGLIB ä»£ç†æ•ˆç‡ ç¡®æœ‰ç‚¹è·Ÿä¸ä¸Šæ­¥ä¼ã€‚</p>
</blockquote>
<p><em>æ‰‹å†™åŠ¨æ€ä»£ç†ä»¥åæ˜¯ç”¨çš„ä¸å¤šçš„,é‚£ä¸ºä»€ä¹ˆè¦å†™?å› ä¸ºAOPçš„å®ç°åŸç†å°±æ˜¯è¿™ä¹ˆæ¥çš„,æ‰€ä»¥ä»¥åè¦ä½¿ç”¨åŠ¨æ€ä»£ç†,å°±ç›´æ¥ä½¿ç”¨AOPäº†,å¹¶ä¸éœ€è¦æ‰‹å†™,æ‰‹å†™åªæ˜¯ä¸ºäº†æ›´å¥½å¾—å­¦ä¹ AOP</em></p>
<p>å¥½äº†,é©¬ä¸Šè¿›å…¥æ­£å¼çš„AOP</p>
<h4 id="AOPæ¦‚å¿µ"><a href="#AOPæ¦‚å¿µ" class="headerlink" title="AOPæ¦‚å¿µ"></a>AOPæ¦‚å¿µ</h4><p>AOPæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³,ä¹Ÿå°±æ˜¯æ‰€è°“çš„<strong>é¢å‘åˆ‡é¢ç¼–ç¨‹</strong>,å®ƒæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ç§è¡¥å……å’Œå®Œå–„,å®ƒä»¥é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†æ–¹å¼å®ç°åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ç»™ç¨‹åºåŠ¨æ€ç»Ÿä¸€æ·»åŠ é¢å¤–åŠŸèƒ½çš„ä¸€ç§æŠ€æœ¯</p>
<h5 id="ç›¸å…³æœ¯è¯­"><a href="#ç›¸å…³æœ¯è¯­" class="headerlink" title="ç›¸å…³æœ¯è¯­"></a>ç›¸å…³æœ¯è¯­</h5><p>åˆæ˜¯ä¸€å †æ¯ç‡¥æ— å‘³çš„æ¦‚å¿µ,è¿™äº›ä¸œè¥¿ä¸å®ç°,æ˜¯å¾ˆéš¾è®°ä½çš„,æˆ‘å‘ç°æˆ‘ç°åœ¨æ˜¯æƒŠé†’è¶Šæ¥è¶Šå·®äº†</p>
<p>å®³</p>
<blockquote>
<p><strong>æ¨ªåˆ‡å…³æ³¨ç‚¹</strong></p>
</blockquote>
<p>ä»€ä¹ˆæ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹?ç®€å•ç†è§£å°±æ˜¯é‚£äº›å’Œæ ¸å¿ƒä¸šåŠ¡æ— å…³çš„ä»£ç ,æ¯”å¦‚å‰é¢çš„æ—¥å¿—ä»£ç ,é‚£ä¸¤è¡Œæ—¥å¿—ä»£ç å°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹</p>
<blockquote>
<p><strong>é€šçŸ¥</strong></p>
</blockquote>
<p>æ¯ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹ä¸Šè¦åšçš„äº‹æƒ…éƒ½éœ€è¦å†™ä¸€ä¸ªæ–¹æ³•æ¥å®ç°,è¿™æ ·çš„æ–¹æ³•å°±å«é€šçŸ¥æ–¹æ³•,<strong>ä¹Ÿå°±æ˜¯ä¹‹å‰å†™çš„æ—¥å¿—çš„ä»£ç ,å°±ç›¸å½“äºé€šçŸ¥,åªæ˜¯åˆ†ç±»æœ‰å¾ˆå¤š,æ¯”å¦‚ä¹‹å‰å†™åœ¨æ ¸å¿ƒä»£ç å‰çš„,å°±æ˜¯å‰ç½®é€šçŸ¥,è¿™é€šçŸ¥åˆåˆ†ä¸ºå¥½å‡ ç§</strong></p>
<ol>
<li>å‰ç½®é€šçŸ¥:åœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>å‰</strong>æ‰§è¡Œ</li>
<li>è¿”å›é€šçŸ¥:åœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>æˆåŠŸç»“æŸ</strong>åæ‰§è¡Œ(å¯¿ç»ˆæ­£å¯)</li>
<li>å¼‚å¸¸é€šçŸ¥:åœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>å¼‚å¸¸ç»“æŸ</strong>åæ‰§è¡Œ(æ­»äºéå‘½)</li>
<li>åç½®é€šçŸ¥:åœ¨è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•<strong>æœ€ç»ˆç»“æŸ</strong>åæ‰§è¡Œ(ç›–æ£ºå®šè®º)</li>
<li>ç¯ç»•é€šçŸ¥:ä½¿ç”¨try.catch&#x2F;finallyç»“æ„å›´ç»•æ•´ä¸ªè¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•,åŒ…æ‹¬ä¸Šé¢çš„å››ç§é€šçŸ¥å¯¹åº”çš„æ‰€æœ‰ä½ç½®</li>
</ol>
<blockquote>
<p><strong>åˆ‡é¢</strong></p>
</blockquote>
<p>å°è£…é€šçŸ¥æ–¹æ³•çš„ç±»,è¿™ä¸ªä¹‹å‰å¥½åƒæ²¡æœ‰</p>
<blockquote>
<p><strong>ç›®æ ‡</strong></p>
</blockquote>
<p>è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡</p>
<blockquote>
<p><strong>ä»£ç†</strong></p>
</blockquote>
<p>å‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„ä»£ç†å¯¹è±¡</p>
<blockquote>
<p><strong>è¿æ¥ç‚¹</strong></p>
</blockquote>
<p>æŠŠæ–¹æ³•æ’æˆä¸€æ’ï¼Œæ¯ä¸ªæ¨ªåˆ‡ä½ç½®çœ‹æˆä¸ºxè½´æ–¹å‘ï¼ŒæŠŠæ–¹æ³•ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œçš„é¡ºåºçœ‹æˆyè½´,xè½´å’Œyè½´çš„äº¤å‰ç‚¹å°±æ˜¯è¿æ¥ç‚¹</p>
<blockquote>
<p><strong>åˆ‡å…¥ç‚¹</strong></p>
</blockquote>
<p>å®šä½è¿æ¥ç‚¹çš„æ–¹å¼<br><em>æŠŠè¿æ¥ç‚¹çœ‹ä½œæ•°æ®åº“ä¸­çš„è®°å½•,é‚£ä¹ˆåˆ‡å…¥ç‚¹å°±æ˜¯æŸ¥è¯¢è®°å½•çš„SQLè¯­å¥,Springçš„AOPæŠ€æœ¯å¯ä»¥é€šè¿‡åˆ‡å…¥ç‚¹å®šä½åˆ°ç‰¹å®šçš„è¿æ¥ç‚¹</em></p>
<p>æ‰€ä»¥AOPçš„ä¸€ä¸ªéå¸¸é‡è¦çš„æ“ä½œå°±æ˜¯<strong>æŠ½,å’Œå¥—</strong></p>
<h5 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h5><ul>
<li>ç®€åŒ–ä»£ç :æŠŠæ–¹æ³•ä¸­å›ºå®šä½ç½®çš„é‡å¤çš„ä»£ç æŠ½å–å‡ºæ¥,è®©è¢«æŠ½å–çš„æ–¹æ³•æ›´ä¸“æ³¨äºè‡ªå·±çš„æ ¸å¿ƒåŠŸèƒ½,æé«˜å†…èšæ€§</li>
<li>ä»£ç å¢å¼º,æŠŠç‰¹å®šçš„åŠŸèƒ½å°è£…åˆ°åˆ‡é¢ç±»ä¸­,çœ‹å“ªé‡Œæœ‰éœ€è¦,å°±å¾€ä¸Šå¥—,è¢«å¥—ç”¨äº†åˆ‡é¢é€»è¾‘çš„æ–¹æ³•å°±è¢«åˆ‡é¢ç»™å¢å¼ºäº†</li>
</ul>
<h4 id="åŸºäºæ³¨è§£çš„AOP"><a href="#åŸºäºæ³¨è§£çš„AOP" class="headerlink" title="åŸºäºæ³¨è§£çš„AOP"></a>åŸºäºæ³¨è§£çš„AOP</h4><p>ä¸‰ç§å®ç°æ–¹å¼</p>
<ol>
<li>åŠ¨æ€ä»£ç†</li>
<li>cglib</li>
<li>Aspectj(æœ¬è´¨ä¸Šæ˜¯é™æ€ä»£ç†)</li>
</ol>
<blockquote>
<p>æ³¨æ„äº‹é¡¹:<br>åˆ‡é¢ç±»å’Œç›®æ ‡ç±»éƒ½éœ€è¦äº¤ç»™IOCå®¹å™¨ç®¡ç†<br>åˆ‡é¢ç±»å¿…é¡»é€šè¿‡@Aspectæ³¨è§£æ ‡è¯†ä¸ºä¸€ä¸ªåˆ‡é¢<br>åœ¨Springé…ç½®æ–‡ä»¶ä¸­è®¾ç½®&lt;aop:aspect-autoproxy&#x2F;&gt;å¼€å¯åŸºäºæ³¨è§£çš„AOP</p>
</blockquote>
<p>äº¤ç»™IOCå®¹å™¨ç®¡ç†,è¿™é‡Œæ˜¯ä½¿ç”¨æ³¨è§£,æ‰€ä»¥åªéœ€è¦åœ¨æ™®é€šç±»ä¸Šé¢åŠ ä¸Š@Componentæ³¨é‡Š</p>
<p>ä»£ç†ç±»çš„ä»£ç :<br>è¿™ä¸ªåªæ˜¯å‰ç½®çš„,å…ˆçœ‹ä¸ªæ ·å­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.aop.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoggerAspectByMe</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;execution(public int com.zzmr.spring.aop.annotation.CalculatorImpl.add(int,int))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeAdviceMethod</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;LoggerAspect,Before&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¦‚æœç›´æ¥ä½¿ç”¨IOCè·å–ç›®æ ‡å¯¹è±¡,æ˜¯è·å–ä¸åˆ°çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBefore</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;aop-annotation.xml&quot;</span>);</span><br><span class="line">    <span class="type">CalculatorImpl</span> <span class="variable">calculator</span> <span class="operator">=</span> ioc.getBean(CalculatorImpl.class);</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> calculator.add(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™ä¼šç›´æ¥æŠ¥é”™-NoSuchBeanDefinitionException<br>è¯´æ˜åªè¦æ·»åŠ äº†ä»£ç†å¯¹è±¡,é‚£å°±ä¸èƒ½ç›´æ¥è·å–ç›®æ ‡å¯¹è±¡äº†,è€Œè¦ä½¿ç”¨ç›®æ ‡å¯¹è±¡çš„æ¥å£(ä»£ç†å¯¹è±¡)æ¥è·å–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBefore</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;aop-annotation.xml&quot;</span>);</span><br><span class="line">    <span class="type">Calculator</span> <span class="variable">calculator</span> <span class="operator">=</span> ioc.getBean(Calculator.class);</span><br><span class="line">    calculator.add(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™å°±ä¸ä¼šæŠ¥é”™äº†</p>
<p>é—®é¢˜ä¹Ÿå‡ºç°äº†,çœ‹ä¸Šé¢çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(public int com.zzmr.spring.aop.annotation.CalculatorImpl.add(int,int))&quot;)</span></span><br></pre></td></tr></table></figure>

<p>è¿™å°±ç›¸å½“äºæ–¹æ³•å†™æ­»äº†,åªèƒ½å®šä½åˆ°addæ–¹æ³•é‡Œé¢äº†</p>
<blockquote>
<p>æ”¹è¿›<br>ç°åœ¨è¦æŠŠå‰ç½®é€šçŸ¥åŠ å…¥åˆ°Calculatorçš„æ¯ä¸€ä¸ªæ–¹æ³•ä¸­,è¯¥æ€ä¹ˆåš?<br><strong>å¯¹åˆ‡å…¥ç‚¹è¡¨è¾¾å¼è¿›è¡Œæ”¹è¿›</strong><br>ç¬¬ä¸€ä¸ªæ˜Ÿå·ï¼Œè¡¨ç¤ºä»»ä½•è®¿é—®ä¿®é¥°ç¬¦ï¼Œä»»æ„è¿”å›ç±»å‹<br>ç¬¬äºŒä¸ªæ˜Ÿå·ï¼Œè¡¨ç¤ºç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•<br>æ‹¬å·é‡Œé¢è¡¨ç¤ºæ–¹æ³•å‚æ•°ç±»å‹åˆ—è¡¨,å°±æ˜¯ä¸Šé¢çš„int intï¼Œè¿™é‡Œå†™ä¸Šä¸¤ä¸ªç‚¹ï¼Œå°±æ˜¯ä¸ç®¡å‚æ•°ç±»å‹</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(* com.zzmr.spring.aop.annotation.CalculatorImpl.*(..))&quot;)</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±èƒ½ç»™æŒ‡å®šç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•åŠ ä¸Šé€šçŸ¥äº†</p>
<p>ä»¥æ­¤ç±»æ¨,åœ¨ç±»çš„ä½ç½®ä¸Šå†™ä¸Šæ˜Ÿå·,å°±ä»£è¡¨å½“å‰åŒ…ä¸‹æ‰€æœ‰çš„ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(* com.zzmr.spring.aop.annotation.*.*(..))&quot;)</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶è¿˜æœ‰é—®é¢˜,æ€ä¹ˆåœ¨é€šçŸ¥æ–¹æ³•ä¸­è·å–è¿æ¥ç‚¹ä¿¡æ¯?å°±æ˜¯è·å–è¢«ä»£ç†çš„ç›®æ ‡æ–¹æ³•çš„ä¿¡æ¯,è¿™é‡Œéœ€è¦åœ¨é€šçŸ¥æ–¹æ³•ä¸­æ·»åŠ JoinPointå‚æ•°</p>
<ul>
<li>JoinPoint.getSignature()å¯ä»¥è·å–è¿æ¥ç‚¹å¯¹åº”æ–¹æ³•çš„ç­¾åä¿¡æ¯(å†…å«æ–¹æ³•å)</li>
<li>JoinPoint.getArgs()å¯ä»¥è·å–å¯¹åº”æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</li>
<li><em>é‚£å¦‚ä½•è·å–æ–¹æ³•çš„è¿”å›ç±»å‹?æœ‰ä¸€ä¸ªMethodSignature,å¯ä»¥é€šè¿‡signatureè·å–</em></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MethodSignature</span> <span class="variable">methodSignature</span> <span class="operator">=</span> (MethodSignature) signature;</span><br><span class="line">System.out.println(<span class="string">&quot;æ–¹æ³•çš„è¿”å›ç±»å‹ï¼š&quot;</span> + methodSignature.getReturnType());</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(* com.zzmr.spring.aop.annotation.CalculatorImpl.*(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeAdviceMethod</span><span class="params">(JoinPoint joinPoint)</span> &#123;</span><br><span class="line">    <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> joinPoint.getSignature();</span><br><span class="line">    Object[] args = joinPoint.getArgs();</span><br><span class="line">    System.out.println(<span class="string">&quot;LoggerAspect,Before&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;LoggerAspect,æ–¹æ³•åï¼š&quot;</span>+signature.getName()+<span class="string">&quot;,&quot;</span>+<span class="string">&quot;å‚æ•°åˆ—è¡¨&quot;</span>+ Arrays.toString(args));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testBefore</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;aop-annotation.xml&quot;</span>);</span><br><span class="line">    <span class="type">Calculator</span> <span class="variable">calculator</span> <span class="operator">=</span> ioc.getBean(Calculator.class);</span><br><span class="line">    calculator.add(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;============&quot;</span>);</span><br><span class="line">    calculator.sub(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;============&quot;</span>);</span><br><span class="line">    calculator.mul(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;============&quot;</span>);</span><br><span class="line">    calculator.div(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœ:</p>
<!-- ![1667199322700](image/ssm_thinking/1667199322700.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221031145525.png" alt="20221031145525"></p>
<blockquote>
<p><strong>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡ç”¨</strong></p>
</blockquote>
<p>å¾ˆç®€å•,åªéœ€è¦å†™ä¸€ä¸ªæ–¹æ³•,åœ¨æ–¹æ³•çš„ä¸Šé¢å†™ä¸Š@Pointcutæ³¨è§£,é‡Œé¢å†™ä¸Šè¦é‡ç”¨çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å³å¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut(&quot;execution(* com.zzmr.spring.aop.annotation.CalculatorImpl.*(..))&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pointCut</span><span class="params">()</span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ—¶:<br>ä½¿ç”¨æ—¶ä¹Ÿå¾ˆç®€å•,åªéœ€è¦åœ¨åŸæ¥å†™åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„åœ°æ–¹æ¢æˆæ–¹æ³•åå³å¯,è¿™ä¸ªæ–¹æ³•åå°±æ˜¯åŠ äº†Pointcutæ³¨è§£çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@After(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterAdviceMethod</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;åç½®é€šçŸ¥&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å‰ç½®é€šçŸ¥:@Before()</li>
<li>åç½®é€šçŸ¥:@After()<br>åç½®é€šçŸ¥æ˜¯åœ¨å“ªé‡Œçš„é€šçŸ¥?æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œä¹‹åå°±æ‰§è¡Œ,è¿˜æ˜¯finallyé‡Œæ‰§è¡Œ?<br>è¿™ä¸ªæ—¶å€™è°ƒç”¨divæ–¹æ³•,æ‰§è¡Œ1&#x2F;0,æ­¤æ—¶è‹¥åç½®é€šçŸ¥èƒ½è¾“å‡º,åˆ™ä»£è¡¨æ˜¯åœ¨finallyä¸­,åä¹‹æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å<br>éªŒè¯ç»“æœæ˜¯å¯ä»¥è¾“å‡º,ä»£è¡¨æ˜¯åœ¨finallyä¸­</li>
<li>è¿”å›é€šçŸ¥:@AfterReturning()<br>è¿”å›é€šçŸ¥æ˜¯åœ¨æ–¹æ³•è¿”å›åæ‰§è¡Œçš„,æ­¤æ—¶å†æµ‹è¯•div(1,0),å°±ä¼šå‘ç°æ­¤æ—¶çš„è¿”å›é€šçŸ¥æ˜¯ä¸ä¼šæ‰§è¡Œ,æ‰€ä»¥è¿”å›é€šçŸ¥æ˜¯æ–¹æ³•è¿”å›ä¹‹åæ‰§è¡Œçš„<br>æ—¢ç„¶æ˜¯è¿”å›é€šçŸ¥,é‚£å°±åº”è¯¥å¯ä»¥è·å–æ–¹æ³•çš„è¿”å›å€¼,æ­¤æ—¶è¦åœ¨æ³¨è§£ä¸­å†™ä¸Š returning &#x3D; â€œresultâ€ , ç„¶ååœ¨æ–¹æ³•å‚æ•°ä¸­åŠ ä¸ŠObject result ,è¿™ä¸ªåå­—éšä¾¿å–ï¼Œä½†æ˜¯è¦ä¿è¯ä¸Šä¸‹ä¸€è‡´</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AfterReturning(value = &quot;pointCut()&quot;, returning = &quot;result&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturningAdviceMethod</span><span class="params">(JoinPoint joinPoint, Object result)</span> &#123;</span><br><span class="line">    <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> joinPoint.getSignature();</span><br><span class="line">    System.out.println(<span class="string">&quot;è¿”å›é€šçŸ¥,æ–¹æ³•ï¼š&quot;</span> + signature.getName() + <span class="string">&quot;,&quot;</span> + <span class="string">&quot;ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>å¼‚å¸¸é€šçŸ¥:@AfterThrowing()<br>è‹¥è¦è·å–ç›®æ ‡å¯¹è±¡æ–¹æ³•çš„å¼‚å¸¸,åªéœ€è¦é€šè¿‡throwingå±æ€§,ä¸Šä¸‹ä¸€è‡´,å³å¯(Throwableå’ŒExceptionéƒ½è¡Œ),ç›´æ¥è¾“å‡ºex,å°±å¯ä»¥è·å–å¼‚å¸¸ä¿¡æ¯</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AfterThrowing(value = &quot;pointCut()&quot;,throwing = &quot;ex&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowingAdviceMethod</span><span class="params">(JoinPoint joinPoint,Throwable ex)</span>&#123;</span><br><span class="line">    <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> joinPoint.getSignature();</span><br><span class="line">    System.out.println(<span class="string">&quot;å¼‚å¸¸é€šçŸ¥ï¼Œæ–¹æ³•åï¼š&quot;</span>+signature.getName()+<span class="string">&quot;ï¼Œ å¼‚å¸¸ï¼š&quot;</span>+ex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æ¯”å¦‚è¿˜æ˜¯1&#x2F;0,çœ‹ç»“æœ:</p>
<!-- ![1667285964274](image/ssm_thinking/1667285964274.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221101145926.png" alt="20221101145926"></p>
<p>è¿™é‡Œè¿˜è¦æ³¨æ„:<br>Springçš„é€šçŸ¥é¡ºåºå’Œç‰ˆæœ¬æœ‰å…³:</p>
<ul>
<li>Springç‰ˆæœ¬5.3.xä»¥å‰<ul>
<li>å‰ç½®é€šçŸ¥</li>
<li>ç›®æ ‡æ“ä½œ</li>
<li>åç½®é€šçŸ¥</li>
<li>è¿”å›é€šçŸ¥æˆ–å¼‚å¸¸é€šçŸ¥</li>
</ul>
</li>
<li>Springç‰ˆæœ¬5.3.xä»¥å<ul>
<li>å‰ç½®é€šçŸ¥</li>
<li>ç›®æ ‡æ“ä½œ</li>
<li>è¿”å›é€šçŸ¥æˆ–å¼‚å¸¸é€šçŸ¥</li>
<li>åç½®é€šçŸ¥</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>ç¯ç»•é€šçŸ¥</strong><br>ç›¸å½“äºä¹‹å‰å‡ ç§é€šçŸ¥çš„æ•´åˆ<br>ä½†åˆå¾ˆåƒä¹‹å‰çš„åŠ¨æ€ä»£ç†,çœ‹çœ‹ä»£ç å°±çŸ¥é“å“ªé‡Œåƒäº†<br>@Around()<br>è¦åœ¨é€šçŸ¥æ–¹æ³•ä¸­å†™ä¸ŠProceedingJoinPointå‚æ•°,ç„¶ååœ¨tryä¸­å†™ä¸ŠjoinPoint.proceed()å°±æ˜¯ç›®æ ‡æ–¹æ³•æ‰§è¡Œäº†,è¿˜æœ‰é‡ç‚¹å°±æ˜¯è¯¥é€šçŸ¥æ–¹æ³•çš„ç±»å‹è¦å’Œç›®æ ‡æ–¹æ³•çš„è¿”å›ç±»å‹ä¸€è‡´</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;pointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">aroundAdviceMethod</span><span class="params">(ProceedingJoinPoint joinPoint)</span> &#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•é€šçŸ¥ï¼šå‰ç½®é€šçŸ¥&quot;</span>);</span><br><span class="line">        <span class="comment">//è¡¨ç¤ºç›®æ ‡å¯¹è±¡æ–¹æ³•çš„æ‰§è¡Œ</span></span><br><span class="line">        result = joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•é€šçŸ¥ï¼šè¿”å›é€šçŸ¥&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•é€šçŸ¥ï¼šå¼‚å¸¸é€šçŸ¥&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç¯ç»•é€šçŸ¥ï¼šåç½®é€šçŸ¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½†æ˜¯ä»¥åç”¨çš„è¯è¦ä¹ˆæ˜¯å››ä¸ªæ™®é€šçš„,è¦ä¹ˆå°±æ˜¯ä¸€ä¸ªç¯ç»•,ä¸å¯èƒ½åŒæ—¶ç”¨ä¸¤ç§</strong></p>
<h5 id="åˆ‡é¢çš„ä¼˜å…ˆçº§"><a href="#åˆ‡é¢çš„ä¼˜å…ˆçº§" class="headerlink" title="åˆ‡é¢çš„ä¼˜å…ˆçº§"></a>åˆ‡é¢çš„ä¼˜å…ˆçº§</h5><p>ä¸Šé¢å†™çš„æ˜¯æ—¥å¿—åŠŸèƒ½çš„åˆ‡é¢,è€Œä»¥åè¿˜æœ‰äº‹åŠ¡åŠŸèƒ½çš„åˆ‡é¢,éªŒè¯åŠŸèƒ½çš„åˆ‡é¢</p>
<p>æ¯ä¸ªåˆ‡é¢éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§:@Order()<br>æ‹¬å·é‡Œé¢çš„æ•°å€¼è¶Šå°,ä¼˜å…ˆçº§è¶Šé«˜,é»˜è®¤çš„æ•°å€¼æ˜¯intçš„æœ€å¤§å€¼,æ‰€ä»¥,å¦‚æœæƒ³å†™ä¸€ä¸ªåˆ‡é¢,è¿™ä¸ªåˆ‡é¢æ¯”ä¹‹å‰çš„åˆ‡é¢å…ˆæ‰§è¡Œçš„è¯,åªéœ€è¦åœ¨è¯¥åˆ‡é¢ä¸Šçš„Order()é‡Œé¢å†™ä¸Šæ¯”ä¸Šä¸€ä¸ªåˆ‡é¢çš„ä¼˜å…ˆçº§æ•°å€¼å°çš„å³å¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.aop.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ValidateAspectByMe</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.zzmr.spring.aop.annotation.CalculatorImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeMethod</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ValidateAspect---&gt;å‰ç½®é€šçŸ¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶,ValidateAspectByMeå°±è¦æ¯”ä¹‹å‰çš„åˆ‡é¢ä¼˜å…ˆçº§é«˜äº†,å¯ä»¥å…ˆæ‰§è¡Œ</p>
<h4 id="åŸºäºXMLçš„AOP"><a href="#åŸºäºXMLçš„AOP" class="headerlink" title="åŸºäºXMLçš„AOP"></a>åŸºäºXMLçš„AOP</h4><p>è¿™ä¸ªåªæ˜¯äº†è§£,ä»¥åç”¨å¤§éƒ¨åˆ†æ—¶å€™ä½¿ç”¨åŸºäºæ³¨è§£çš„AOP<br>ç¬‘æ­»,æˆ‘æ‰å‘ç°,ä¹‹å‰çœ‹çš„æ—¶å€™,ç”šè‡³æ²¡æœ‰åˆ›å»ºè¿™ä¸ªçš„åŒ…(com.zzmr.spring.aop.xml),ä»£ç éƒ½æ²¡æ•²,ç¬”è®°ä¹Ÿæ²¡å†™<br>çœ‹å›¾å§,é‡Œé¢éƒ½æœ‰å“ˆå“ˆå“ˆ</p>
<!-- ![1667296309795](image/ssm_thinking/1667296309795.png) -->

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221101175157.png" alt="20221101175157"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.spring.aop.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®åŸºäºXMLçš„AOP--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;pointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.zzmr.spring.aop.xml.CalculatorImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å°†IOCå®¹å™¨ä¸­çš„æŸä¸ªbeanè®¾ç½®ä¸ºåˆ‡é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;loggerAspectByMe&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;beforeAdviceMethod&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:before</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;afterAdviceMethod&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturningAdviceMethod&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;result&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-returning</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;afterThrowingAdviceMethod&quot;</span>  <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointCut&quot;</span> <span class="attr">throwing</span>=<span class="string">&quot;ex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:after-throwing</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">&quot;aroundAdviceMethod&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;pointCut&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:around</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ²¡å•¥éš¾çš„,ä¹Ÿæ²¡å•¥éœ€è¦æ³¨æ„çš„å“ˆå“ˆå“ˆå“ˆ</p>
<p>æµ‹è¯•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.aop.xml.Calculator;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopXMLTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testXML</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ioc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;aop-xml.xml&quot;</span>);</span><br><span class="line">        <span class="type">Calculator</span> <span class="variable">bean</span> <span class="operator">=</span> ioc.getBean(Calculator.class);</span><br><span class="line">        bean.add(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é©¬ä¸Šå°±æ˜¯AOPçš„åº”ç”¨äº†<br>å—¯<br>åŠ æ²¹<br>2022å¹´11æœˆ1æ—¥ 18ç‚¹13åˆ†</p>
<h3 id="å£°æ˜å¼äº‹åŠ¡"><a href="#å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡"></a>å£°æ˜å¼äº‹åŠ¡</h3><p>ä¸‹é¢å°±åˆ°äº†ç»™äº‹åŠ¡ä»£ç å®ç°AOPäº†</p>
<p>ä½†æ˜¯åœ¨é‚£ä¹‹å‰,è¦å…ˆå­¦ä¹ ä¸€ä¸‹JdbcTemplate,è¿™ä¸ªæ˜¯Springå°è£…çš„JDBC,ä½†æ˜¯è¿™ä¸ªåªæ˜¯äº†è§£ä¸€ä¸‹,ä»¥åè¿˜æ˜¯ç”¨MyBatisç”¨çš„å¤š</p>
<p>åˆ›å»ºä¸€ä¸ªspring-jdbc.xmlé…ç½®æ–‡ä»¶<br>é‡Œé¢è¦æ·»åŠ è¿™ä¸ªbean,å› ä¸ºJdbcTemplateæ˜¯ç¬¬ä¸‰æ–¹jaråŒ…,ä¸èƒ½ä½¿ç”¨æ³¨è§£çš„æ–¹å¼è®©IOCç®¡ç†,æ‰€ä»¥åªèƒ½æ˜¯ä½¿ç”¨xmlçš„æ–¹å¼å®ç°.è¿˜æœ‰è¿æ¥æ•°æ®åº“çš„ä¸€äº›bean,æ•°æ®æº,åŒæ—¶ä¹Ÿè¦å¼•å…¥jdbc.properties</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼•å…¥jdbc.properties--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰ä¸€ä¸ªå°çš„æ³¨æ„ç‚¹,å°±æ˜¯Springæœ‰ä¸€ä¸ªæ•´åˆçš„junit,è¦å¼•å…¥ä¾èµ–:<br><strong>ä½†æ˜¯ä¹‹å‰çš„Junitçš„ä¾èµ–è¿˜æ˜¯ä¸èƒ½ä¸¢æ‰çš„,è¿˜æ˜¯è¦ä¿ç•™</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spring æµ‹è¯•ç›¸å…³ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åç»™æµ‹è¯•ç±»ä¸Šæ·»åŠ ä¸Šä¸¤ä¸ªæ³¨è§£</p>
<ol>
<li>&#x2F;&#x2F;æŒ‡å®šå½“å‰æµ‹è¯•ç±»åœ¨springçš„æµ‹è¯•ç¯å¢ƒä¸­æ‰§è¡Œï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡æ³¨å…¥çš„æ–¹å¼ç›´æ¥è·å–IOCå®¹å™¨ä¸­çš„bean<br>@RunWith(SpringJUnit4ClassRunner.class)</li>
<li>&#x2F;&#x2F;è®¾ç½®Springæµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶<br>@ContextConfiguration(â€œclasspath:spring-jdbc.xmlâ€)</li>
</ol>
<p>å¤§ç™½è¯è¯´ç€ä¸æ¸…æ¥š,è¿˜æ˜¯ç›´æ¥çœ‹ä»£ç å§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŒ‡å®šå½“å‰æµ‹è¯•ç±»åœ¨springçš„æµ‹è¯•ç¯å¢ƒä¸­æ‰§è¡Œï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡æ³¨å…¥çš„æ–¹å¼ç›´æ¥è·å–IOCå®¹å™¨ä¸­çš„bean</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">//è®¾ç½®Springæµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="meta">@ContextConfiguration(&quot;classpath:spring-jdbc.xml&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcTemplateTestTwo</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into t_user values(null,?,?,?,?,?)&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,<span class="string">&quot;jimmy&quot;</span>,<span class="string">&quot;010203&quot;</span>,<span class="number">23</span>,<span class="string">&quot;ç”·&quot;</span>,<span class="string">&quot;123456@163.com&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œé‡ç‚¹å°±æ˜¯Springçš„æµ‹è¯•æ–¹æ³•,å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸¤ä¸ªæ³¨è§£æ¥å®ç°è‡ªåŠ¨è£…é…æŸä¸ªç»„ä»¶,æ¯”å¦‚è¿™ä¸ªJdbcTemplate,åƒä¹‹å‰çš„é‚£ä¸ªä»€ä¹ˆIOCå®¹å™¨ä¹Ÿä¸€æ ·,å°±ä¸ç”¨å†™ä¸€ä¸ªæµ‹è¯•æ–¹æ³•å°±å†™ä¸€ä¸ªApplicationContextäº†</p>
<p>ä¸‹é¢çœ‹æŸ¥è¯¢çš„æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢ï¼Œè€å¸ˆè¯´è¦å¦ä¸€ä¸ªè§†é¢‘è®²ï¼Œé‚£å°±å…ˆå¬å§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetUserById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_user where id = ?&quot;</span>;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(User.class), <span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetAllUser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from t_user&quot;</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; userList = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(User.class));</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCount</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select count(*) from t_user&quot;</span>;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿéå¸¸ç®€å•<br>å‰é¢é“ºå«äº†è¿™ä¹ˆå¤š,ç°åœ¨ç»ˆäºåˆ°å£°æ˜å¼äº‹åŠ¡äº†<br>å…ˆçœ‹ç¼–ç¨‹å¼äº‹åŠ¡çš„ç¼ºç‚¹,ç¼–ç¨‹å¼äº‹åŠ¡,é¡¾åæ€ä¹‰,äº‹åŠ¡çš„å®ç°æ˜¯é è‡ªå·±ç¼–ç¨‹æ¥å®ç°çš„,æ¯”è¾ƒç¹ç,è€Œä¸”ä»£ç å¤ç”¨æ€§ä¸é«˜</p>
<p>è€Œå£°æ˜å¼äº‹åŠ¡æ­£æ˜¯è§£å†³è¿™ä¸€ç—›ç‚¹è€Œå‡ºç°çš„<br>å£°æ˜å¼äº‹åŠ¡çš„ä¼˜ç‚¹:</p>
<ol>
<li>æé«˜å¼€å‘æ•ˆç‡</li>
<li>æ¶ˆé™¤äº†å†—ä½™ä»£ç </li>
<li>æ¡†æ¶ä¼šç»¼åˆè€ƒè™‘ç›¸å…³é¢†åŸŸä¸­åœ¨å®é™…å¼€å‘ç¯å¢ƒä¸‹æœ‰å¯èƒ½é‡åˆ°çš„å„ç§é—®é¢˜.è¿›è¡Œäº†å¥å£®æ€§,æ€§èƒ½ç­‰å„ä¸ªæ–¹é¢çš„ä¼˜åŒ–</li>
</ol>
<p>è€Œä¸”,é‡è¦çš„æ˜¯å£°æ˜å¼äº‹åŠ¡çš„ä»£ç éƒ½å·²ç»å†™å¥½äº†,éƒ½æ˜¯ç›´æ¥æ‹¿æ¥ç”¨çš„,è¿é€šçŸ¥éƒ½ä¸ç”¨å†™</p>
<h4 id="åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡"><a href="#åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡"></a>åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡</h4><p>ä¸€ä¸ªé…ç½®,ä¸€ä¸ªæ³¨è§£,å³å®Œæˆäº†å£°æ˜å¼äº‹åŠ¡</p>
<p>åœ¨é…ç½®ä¹‹å‰,é¦–å…ˆçœ‹ä¸€ä¸‹ä»€ä¹ˆæ—¶å€™éœ€è¦äº‹åŠ¡,æˆ–è€…è¯´ä»€ä¹ˆæ—¶å€™éœ€è¦å›æ»š?è¿™é‡Œå‡è®¾ä¸€ä¸ªæ¡ä»¶,æ¯”å¦‚å½“ç”¨æˆ·è´­ä¹°ä¹¦æ—¶,å¦‚æœä¹¦çš„åº“å­˜ä¸è¶³,é‚£å°±ä¼šå‡ºé—®é¢˜,è¿™é‡Œå¯ä»¥ä½¿ç”¨<strong>æ— ç¬¦å·çš„æ•°æ®ç±»å‹æ¥é™å®šåº“å­˜ä½™é¢</strong>,å½“ç„¶ä¹Ÿå¯ä»¥åœ¨javaä»£ç ä¸­å®ç°,æ¯”å¦‚,å¦‚æœä½™é¢ä¸è¶³,é‚£å°±æŠ›å‡ºå¼‚å¸¸å³å¯,æ²¡æœ‰å¼‚å¸¸å°±é€ å¼‚å¸¸</p>
<blockquote>
<p>tx-annotation.xml<br>Springçš„é…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ‰«æç»„ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.spring&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å¼•å…¥jdbc.properties--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        å°†ä½¿ç”¨@Transactionalæ³¨è§£æ‰€è¡¨ç¤ºçš„æ–¹æ³•æˆ–ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•ä½¿ç”¨äº‹åŠ¡è¿›è¡Œç®¡ç†</span></span><br><span class="line"><span class="comment">        transaction-manager è®¾ç½®äº‹åŠ¡ç®¡ç†å™¨çš„id</span></span><br><span class="line"><span class="comment">        è‹¥äº‹åŠ¡ç®¡ç†å™¨çš„beançš„idä¸ºé»˜è®¤çš„transactionManagerã€‚å°±å¯ä»¥ä¸ç”¨å†™</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå†™ä¸Šæˆ‘è‡ªå·±å†™çš„ä»£ç å§<br>é¦–å…ˆè¯´æ˜,äº‹åŠ¡ç®¡ç†çš„ä»£ç æ˜¯åœ¨serviceä¸­çš„<br>å…ˆçœ‹Controllerä»£ç </p>
<blockquote>
<p>BookControllerByMe.java</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.service.BookServiceByMe;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookControllerByMe</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookServiceByMe bookServiceByMe;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyBookByMe</span><span class="params">(<span class="type">int</span> userId,<span class="type">int</span> bookId)</span>&#123;</span><br><span class="line">        bookServiceByMe.buyBookByMe(userId,bookId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>BookServiceByMe.java</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookServiceByMe</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">buyBookByMe</span><span class="params">(<span class="type">int</span> userId, <span class="type">int</span> bookId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>BookServiceImplByMe.java<br>æ²¡æœ‰äº‹åŠ¡ç®¡ç†,<strong>ä½†æ˜¯ç”±äºåœ¨å»ºè¡¨æ—¶æŒ‡å®šäº†stockå’Œbalanceæ˜¯æ— ç¬¦å·çš„,æ‰€ä»¥å½“ä½™é¢ä¸è¶³ä¹°ä¹¦æ—¶æ•°æ®åº“å°±ä¼šæŠ¥é”™</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.dao.BookDaoByMe;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.service.BookServiceByMe;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImplByMe</span> <span class="keyword">implements</span> <span class="title class_">BookServiceByMe</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDaoByMe bookDaoByMe;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyBookByMe</span><span class="params">(<span class="type">int</span> userId, <span class="type">int</span> bookId)</span> &#123;</span><br><span class="line">        <span class="comment">//    å°±ä¸èƒ½ç›´æ¥ä¹°äº†ï¼Œè¦è¿›è¡Œåˆ¤æ–­ç”¨æˆ·çš„ä½™é¢å¤Ÿä¸å¤Ÿï¼Œä»¥åŠä¹¦çš„åº“å­˜è¶³ä¸è¶³</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//   è·å–å›¾ä¹¦ä»·æ ¼</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">bookPrice</span> <span class="operator">=</span> bookDaoByMe.getPriceByIdByMe(bookId);</span><br><span class="line"></span><br><span class="line">        bookDaoByMe.updateStock(bookId);</span><br><span class="line"></span><br><span class="line">        bookDaoByMe.updateBalance(userId,bookPrice);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>BookDaoByMe.java<br>DAOå±‚è¦è´Ÿè´£çš„å°±å¤šäº†,é¦–å…ˆæ˜¯è·å–å›¾ä¹¦ä»·æ ¼,ç„¶åæ›´æ–°åº“å­˜,æ›´æ–°ä½™é¢</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDaoByMe</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å›¾ä¹¦idè·å–å›¾ä¹¦ä»·æ ¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bookId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Integer <span class="title function_">getPriceByIdByMe</span><span class="params">(Integer bookId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateStock</span><span class="params">(Integer bookId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateBalance</span><span class="params">(Integer userId,Integer price)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>BookDaoImplByMe.java</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.dao.BookDaoByMe;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Daoå±‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoImplByMe</span> <span class="keyword">implements</span> <span class="title class_">BookDaoByMe</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®å›¾ä¹¦idè·å–ä»·æ ¼</span></span><br><span class="line">    <span class="comment">//ä»¥ä¾¿äºåˆ¤æ–­ä½™é¢æ˜¯å¦å¤§äºå›¾ä¹¦ä»·æ ¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getPriceByIdByMe</span><span class="params">(Integer bookId)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select price from t_book where book_id = ?&quot;</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">price</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, Integer.class, bookId);</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateStock</span><span class="params">(Integer bookId)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_book set stock = stock - 1 where book_id = ?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,bookId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateBalance</span><span class="params">(Integer userId,Integer price)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update t_user1 set balance = balance - ? where user_id = ?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,price,userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤æ—¶æ²¡æœ‰äº‹åŠ¡ç®¡ç†,ç”¨æˆ·ä½™é¢ä¸º50,å¦‚æœä¹°ç¬¬ä¸€æœ¬ä¹¦,ä»·æ ¼80,æ­¤æ—¶å°±ä¼šæŠ¥é”™,ä½†æ˜¯ç”±äºMySqlé»˜è®¤æ˜¯ä¸€æ¡Sqlå°±ä¼šè‡ªåŠ¨æäº¤ä¸€æ¬¡äº‹åŠ¡,æ‰€ä»¥å°±å¯¼è‡´äº†åº“å­˜æ˜¯å‡å°‘äº†,ä½†æ˜¯ç”¨æˆ·çš„ä½™é¢å¹¶æ²¡æœ‰å˜</p>
</blockquote>
<p>ä¸‹é¢å°±æ˜¯é‡å¤´æˆäº†,ç»™serviceå±‚æ·»åŠ ä¸Šäº‹åŠ¡ç®¡ç†</p>
<blockquote>
<p><strong>å‡ºç°å¼‚å¸¸å°±å›æ»š</strong></p>
</blockquote>
<p>å…ˆçœ‹éœ€è¦çš„é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        å°†ä½¿ç”¨@Transactionalæ³¨è§£æ‰€è¡¨ç¤ºçš„æ–¹æ³•æˆ–ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•ä½¿ç”¨äº‹åŠ¡è¿›è¡Œç®¡ç†</span></span><br><span class="line"><span class="comment">        transaction-manager è®¾ç½®äº‹åŠ¡ç®¡ç†å™¨çš„id</span></span><br><span class="line"><span class="comment">        è‹¥äº‹åŠ¡ç®¡ç†å™¨çš„beançš„idä¸ºé»˜è®¤çš„transactionManagerã€‚å°±å¯ä»¥ä¸ç”¨å†™</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®â€å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨â€å,å°±ä¼šå‘ç°å·¦è¾¹å‡ºç°äº†ç¯ç»•é€šçŸ¥çš„å›¾æ ‡</p>
<!-- ![1667467190856](image/ssm_thinking/1667467190856.png) -->
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221103171953.png" alt="20221103171953"></p>
<blockquote>
<p>ç»™æ–¹æ³•æ·»åŠ ä¸Šäº‹åŠ¡ç®¡ç†<br>ä¸éœ€è¦å†™ä»»ä½•çš„ä»£ç ,åªéœ€è¦ä¸€ä¸ªæ³¨é‡Š,é‚£ä¹ˆè¿™ä¸ªç±»&#x2F;æ–¹æ³•å°±è¢«äº‹åŠ¡ç®¡ç†äº†--@Transactional<br>æ­¤æ—¶,buyBookByMeè¿™ä¸ªæ–¹æ³•å°±è¢«äº‹åŠ¡ç®¡ç†äº†,å¦‚æœå‡ºç°å¼‚å¸¸,å°±ä¼šå›æ»š</p>
</blockquote>
<p>å£°æ˜å¼äº‹åŠ¡çš„æ­¥éª¤:</p>
<ol>
<li>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº‹åŠ¡ç®¡ç†å™¨</li>
<li>å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨</li>
<li>åœ¨éœ€è¦è¢«äº‹åŠ¡ç®¡ç†çš„æ–¹æ³•ä¸Šæ·»åŠ ä¸Š@Transactionalæ³¨è§£,è¯¥æ–¹æ³•å°±ä¼šè¢«äº‹åŠ¡ç®¡ç†</li>
</ol>
<p>@Transactionalæ³¨è§£æ ‡è¯†çš„ä½ç½®</p>
<ol>
<li>æ ‡è¯†åœ¨æ–¹æ³•ä¸Š</li>
<li>æ ‡è¯†åœ¨ç±»ä¸Š,åˆ™ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½ä¼šè¢«äº‹åŠ¡ç®¡ç†</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyBookByMe</span><span class="params">(<span class="type">int</span> userId, <span class="type">int</span> bookId)</span> &#123;</span><br><span class="line">    <span class="comment">//    å°±ä¸èƒ½ç›´æ¥ä¹°äº†ï¼Œè¦è¿›è¡Œåˆ¤æ–­ç”¨æˆ·çš„ä½™é¢å¤Ÿä¸å¤Ÿï¼Œä»¥åŠä¹¦çš„åº“å­˜è¶³ä¸è¶³</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//   è·å–å›¾ä¹¦ä»·æ ¼</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">bookPrice</span> <span class="operator">=</span> bookDaoByMe.getPriceByIdByMe(bookId);</span><br><span class="line"></span><br><span class="line">    bookDaoByMe.updateStock(bookId);</span><br><span class="line"></span><br><span class="line">    bookDaoByMe.updateBalance(userId,bookPrice);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Transactionalçš„å±æ€§</strong></p>
<blockquote>
<p>åªè¯»<br>å¯¹ä¸€ä¸ªæŸ¥è¯¢æ“ä½œæ¥è¯´,å¦‚æœæˆ‘ä»¬æŠŠå®ƒè®¾ç½®æˆåªè¯»,å°±èƒ½å¤Ÿæ˜ç¡®çš„å‘Šè¯‰æ•°æ®åº“,è¿™ä¸ªæ“ä½œä¸æ¶‰åŠå†™æ“ä½œ,è¿™æ ·æ•°æ®åº“å°±èƒ½é’ˆå¯¹æŸ¥è¯¢æ“ä½œæ¥è¿›è¡Œä¼˜åŒ–<br>é»˜è®¤ä¸ºfalse</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        readOnly = true</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„,å¦‚æœè®¾ç½®äº†åªè¯»,è¿™æ—¶å¦‚æœè¿›è¡Œä¿®æ”¹,å°±ä¼šæŠ¥SQLException:Connection is read-only. Queries leading to data modification are not allowed</strong></p>
<blockquote>
<p>è¶…æ—¶<br>äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­,æœ‰å¯èƒ½é‡åˆ°æŸäº›é—®é¢˜,å¯¼è‡´ç¨‹åºå¡ä½,ä»è€Œé•¿æ—¶é—´å ç”¨æ•°æ®åº“èµ„æº,è€Œé•¿æ—¶é—´å ç”¨èµ„æº,å¤§æ¦‚ç‡æ˜¯å› ä¸ºç¨‹åºè¿è¡Œå‡ºç°äº†é—®é¢˜(å¯èƒ½æ˜¯Javaç¨‹åºæˆ–è€…MySqlæ•°æ®åº“æˆ–ç½‘ç»œè¿æ¥ç­‰ç­‰)<br>è¿™ä¸ªæ—¶å€™å‡ºç°é—®é¢˜çš„ç¨‹åºåº”è¯¥è¢«å›æ»š,æ’¤é”€å®ƒå·²åšçš„æ“ä½œ,äº‹åŠ¡ç»“æŸ,æŠŠèµ„æºè®©å‡ºæ¥,è®©å…¶ä»–æ­£å¸¸ç¨‹åºå¯ä»¥æ‰§è¡Œ<br>æ¦‚æ‹¬æ¥è¯´å°±æ˜¯ä¸€å¥è¯,è¶…æ—¶å›æ»š,é‡Šæ”¾èµ„æº</p>
</blockquote>
<p>é»˜è®¤å€¼æ˜¯-1,æ„ä¸ºä¸€ç›´ç­‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">                timeout = 3</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶åœ¨serviceä¸­,ç»™è¿™ä¸ªç¨‹åºä¼‘çœ 5s(<em>åœ¨è°ƒç”¨æ ¸å¿ƒä»£ç ä¹‹å‰æ·»åŠ ä»¥ä¸‹ä»£ç </em>)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    TimeUnit.SECONDS.sleep(<span class="number">5</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¶…æ—¶,åˆ™ä¼šæŠ¥:TransactionTimedOutException: Transaction timed out: deadline wasâ€¦</p>
<blockquote>
<p>å›æ»šç­–ç•¥<br>å£°æ˜å¼äº‹åŠ¡é»˜è®¤åªé’ˆå¯¹è¿è¡Œæ—¶å¼‚å¸¸å›æ»š,ç¼–è¯‘æ—¶å¼‚å¸¸ä¸å›æ»š</p>
</blockquote>
<ul>
<li>rollbackForå±æ€§:éœ€è¦è®¾ç½®ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡</li>
<li>rollbackForClassNameå±æ€§:éœ€è¦è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å…¨ç±»å</li>
<li>noRollbackForå±æ€§:éœ€è¦è®¾ç½®ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡</li>
<li>rollbackForå±æ€§:éœ€è¦è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å…¨ç±»å</li>
</ul>
<p><strong>ä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦è®¾ç½®å›æ»šç­–ç•¥</strong></p>
<p>çœ‹ä¸€ç§æƒ…å†µ,æ¯”å¦‚åœ¨æ‰€æœ‰çš„æ›´æ–°åº“å­˜æ›´æ–°ä½™é¢æ‰§è¡Œå®Œä¹‹å,æ‰§è¡Œä¸€ä¸ªsout(1&#x2F;0),æ­¤æ—¶ä¼šæŠ›å‡ºæ•°å­¦è¿ç®—å¼‚å¸¸,ä½†ä¸Šé¢çš„æ›´æ–°æ˜¯æ²¡é—®é¢˜çš„,ç”±äºè¿˜æ˜¯æŠ›å‡ºäº†å¼‚å¸¸,æ‰€ä»¥é€ æˆå›æ»š</p>
<p>æ­¤æ—¶è®¾ç½®:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        &#123;noRollbackFor = ArithmeticException.class&#125;</span></span><br><span class="line"><span class="meta">                    // noRollbackForClassName = &quot;java.lang.ArithmeticException&quot;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>
<p>noRollbackForæ˜¯ä¸€ä¸ªæ•°ç»„,ä½†æ˜¯å¦‚æœåªæœ‰ä¸€ä¸ªæ•°æ®çš„è¯,æ˜¯ä¸ç”¨å†™å¤§æ‹¬å·çš„</p>
<p>å°±å¯ä»¥å®ç°</p>
<blockquote>
<p>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«<br>æ•°æ®åº“ç³»ç»Ÿå¿…é¡»å…·æœ‰éš”ç¦»å¹¶å‘è¿è¡Œå„ä¸ªäº‹ç‰©çš„èƒ½åŠ›,ä½¿å®ƒä»¬ä¸ä¼šç›¸äº’å½±å“,é¿å…å„ç§å¹¶å‘é—®é¢˜,ä¸€ä¸ªäº‹åŠ¡ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»çš„ç¨‹åº¦ç§°ä¸ºéš”ç¦»çº§åˆ«,SQLæ ‡å‡†ä¸­è§„å®šäº†å¤šç§äº‹åŠ¡éš”ç¦»çº§åˆ«,ä¸åŒéš”ç¦»çº§åˆ«å¯¹åº”ä¸åŒçš„å¹²æ‰°ç¨‹åº¦,éš”ç¦»çº§åˆ«è¶Šé«˜,æ•°æ®ä¸€è‡´æ€§å°±è¶Šå¥½,ä½†å¹¶å‘è¡Œè¶Šå¼±</p>
</blockquote>
<p>å°±é‚£å‡ ä¸ªéš”ç¦»çº§åˆ«,ä¸€èˆ¬æ¥è¯´ä¸éœ€è¦è®¾ç½®,é»˜è®¤ä¸ºâ€å¯é‡å¤è¯»â€-REPEATABLE READ-ç¡®ä¿Transaction01å¯ä»¥å¤šæ¬¡ä»ä¸€ä¸ªå­—æ®µä¸­è¯»å–åˆ°ç›¸åŒçš„å€¼,å³Transaction01æ‰§è¡ŒæœŸé—´ç¦æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¿™ä¸ªå­—æ®µè¿›è¡Œæ›´æ–°<br>è€Œè¿˜æœ‰ä¸€ä¸ª<strong>ä¸²è¡ŒåŒ–</strong>,ç¡®ä¿Transaction01å¯ä»¥å¤šæ¬¡ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–åˆ°ç›¸åŒçš„è¡Œ,åœ¨Transaction01æ‰§è¡ŒæœŸé—´,è¿›åˆ¶å…¶ä»–äº‹åŠ¡å¯¹è¿™ä¸ªè¡¨è¿›è¡Œæ·»åŠ ,æ›´æ–°,åˆ é™¤æ“ä½œ,å¯ä»¥é¿å…ä»»ä½•å¹¶å‘é—®é¢˜,ä½†æ€§èƒ½ååˆ†ä½ä¸‹<br><strong>åªæœ‰ç‰¹æ®Šæƒ…å†µä¸‹æ‰ä½¿ç”¨ä¸²è¡ŒåŒ–,ä¸€èˆ¬éƒ½æ˜¯ç”¨é»˜è®¤çš„å¯é‡å¤è¯»</strong></p>
<blockquote>
<p>å„ä¸ªéš”ç¦»çº§åˆ«è§£å†³å¹¶å‘é—®é¢˜çš„èƒ½åŠ›:</p>
</blockquote>
<!-- ![1667558279260](image/ssm_thinking/1667558279260.png) -->
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221104183801.png" alt="20221104183801"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        //readOnly = true,</span></span><br><span class="line"><span class="meta">        //timeout = 3,</span></span><br><span class="line"><span class="meta">        //noRollbackFor = &#123;ArithmeticException.class&#125;</span></span><br><span class="line"><span class="meta">        //noRollbackForClassName = &quot;java.lang.ArithmeticException&quot;,</span></span><br><span class="line"><span class="meta">        isolation = Isolation.DEFAULT</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º<br>è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€å‘¢,ä¸¾ä¸ªä¾‹å­,æˆ‘ç°åœ¨æœ‰100å—,è¦å»ä¹°ä¸¤æœ¬ä¹¦,ä¹°å®Œç¬¬ä¸€æœ¬,å°±æ²¡é’±ä¹°ç¬¬äºŒæœ¬äº†</p>
</blockquote>
<p>æ¥çœ‹ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CheckoutService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»“è´¦æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bookIds</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">checkout</span><span class="params">(Integer userId, Integer[] bookIds)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>serviceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.spring.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.service.BookServiceByMe;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.spring.service.CheckoutService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckoutServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CheckoutService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookServiceByMe bookServiceByMe;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">checkout</span><span class="params">(Integer userId, Integer[] bookIds)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Integer bookId : bookIds) &#123;</span><br><span class="line">            bookServiceByMe.buyBookByMe(userId,bookId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>æµ‹è¯•ç±»:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTwo</span><span class="params">()</span>&#123;</span><br><span class="line">    bookControllerByMe.checkout(<span class="number">1</span>,<span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶,å°±ä¼šå‘ç°,è™½ç„¶é’±èƒ½å¤Ÿä¹°ç¬¬ä¸€æœ¬ä¹¦,ä½†æ˜¯ç”±äºä¹°ä¸èµ·ç¬¬äºŒæœ¬ä¹¦,æ‰€ä»¥äº‹åŠ¡å›æ»š<br>ä¸€æœ¬ä¹¦ä¹Ÿæ²¡ä¹°åˆ°</p>
<p>æ­¤æ—¶åœ¨BookServiceImplä¸­<br>è®¾ç½®:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(</span></span><br><span class="line"><span class="meta">        propagation = Propagation.REQUIRES_NEW</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å°±ä¼šå‘ç°,ç¬¬ä¸€æœ¬èƒ½ä¹°æˆåŠŸ,ç¬¬äºŒæœ¬ä¸è¡Œ</p>
<h4 id="åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡"><a href="#åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡"></a>åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡</h4><p>æ­¤æ—¶å…ˆæŠŠBookServiceImplå’ŒCheckoutServiceImplä¸­çš„@Transactionalç»™æ³¨é‡Šæ‰,ç„¶åä½¿ç”¨xmlæ¥å®ç°ä»¥ä¸‹,æ‰å‘ç°ä¹‹å‰ç”šè‡³æ²¡æœ‰å¬è¿™ä¸¤èŠ‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    ä¸‹é¢å°±æ˜¯åŸºäºxmlçš„å£°æ˜å¼äº‹åŠ¡çš„é…ç½®ä¿¡æ¯--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;tx&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;tx&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* com.zzmr.spring.service.impl.*.*(..))&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:advisor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå°±æ˜¯åŸºäºxmlçš„å£°æ˜å¼äº‹åŠ¡çš„é…ç½®ä¿¡æ¯</p>
<p>è¿˜æœ‰jaråŒ…,ä¸ç„¶è¿è¡Œä¸äº†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SpringMVCå¼€å§‹<br>å—¯</p>
<h2 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h2><p>2022å¹´11æœˆ6æ—¥ 20ç‚¹25åˆ†<br><em>å¿«è¦å¼€å§‹åšé¡¹ç›®äº†,æœ‰ç‚¹æ…Œ,è·Ÿä»–ä»¬å­¦çš„ä¸œè¥¿ä¸å¤ªä¸€æ ·,å’±åˆæ²¡äººå®¶å­¦çš„ç²¾,åªèƒ½ç”¨äººå®¶çš„æ–¹æ³•æ¥å†™äº†</em></p>
<p>åœ¨è¿™é‡Œå†è¯´ä¸€ä¸‹,MyBatisæ˜¯æŒä¹…å±‚æ¡†æ¶,è€ŒSpringå¯ä»¥åˆ©ç”¨IOCå’ŒAOPæ¥æ•´åˆæ¡†æ¶</p>
<p>ä¸‰ä¸ªæ¦‚å¿µ:<br>M: Model,æ¨¡å‹å±‚,æŒ‡å·¥ç¨‹ä¸­çš„JavaBean<br>    - å®ä½“ç±»Bean:ä¸“é—¨å­˜å‚¨ä¸šåŠ¡æ•°æ®<br>    - ä¸šåŠ¡å¤„ç†Bean:æŒ‡Serviceæˆ–Daoå¯¹è±¡,ä¸“é—¨ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®<br>V: View,è§†å›¾å±‚,æŒ‡å·¥ç¨‹ä¸­çš„htmlæˆ–jspç­‰é¡µé¢,ä½œç”¨æ˜¯ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’,å±•ç¤ºæ•°æ®<br>C: Controller,æ§åˆ¶å±‚,æŒ‡å·¥ç¨‹ä¸­çš„Servlet,ä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚å’Œå“åº”æµè§ˆå™¨</p>
<p>ä½ è¿˜è®°å¾—å—,ä¹‹å‰æœ‰ä¸€ä¸ªä»€ä¹ˆè¯·æ±‚,éƒ½è¦å†™ä¸€ä¸ªå¯¹åº”çš„Servlet,è€Œç°åœ¨ä¸éœ€è¦äº†,ç°åœ¨DispatcherServletå°±æ˜¯ä¸€ä¸ªæ•´ä½“çš„Servlet,ä¸éœ€è¦è‡ªå·±åˆ›å»ºServletäº†</p>
<p><em>å¥½ä¹…æ²¡å†™äº†,è¿™æ®µæ—¶é—´éƒ½åœ¨åšé¡¹ç›®&#x2F;æ‰“æ¸¸æˆå“ˆå“ˆå“ˆ</em><br><em>2022å¹´11æœˆ25æ—¥ 15ç‚¹13åˆ†</em></p>
<h3 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h3><h4 id="é…ç½®web-xml"><a href="#é…ç½®web-xml" class="headerlink" title="é…ç½®web.xml"></a>é…ç½®web.xml</h4><p>ä¹‹å‰çš„web.xmlè¦é…ç½®å¥½å¤šå¥½å¤šServlet,è€Œç°åœ¨åªéœ€è¦é…ç½®ä¸€ä¸ª-<strong>DispatcherServelt</strong></p>
<blockquote>
<p>url-patternä¸­ &#x2F;è¡¨ç¤ºåŒ¹é…æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€çš„æ‰€æœ‰è¯·æ±‚(ä¸åŒ…æ‹¬jsp) &#x2F;<em>è¡¨ç¤ºåŒ¹é…æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€çš„æ‰€æœ‰è¯·æ±‚(åŒ…æ‹¬jsp)<br>ä¸ºä»€ä¹ˆä¸ç”¨&#x2F;</em> ? å› ä¸ºDispatcherServletå¤„ç†ä¸äº†jspçš„è¯·æ±‚,jspä¼šè¢«tomcaté»˜è®¤çš„é…ç½®-JspServletæ¥å¤„ç†</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet</span></span><br><span class="line"><span class="comment">            SpringMVCçš„é…ç½®æ–‡ä»¶é»˜è®¤çš„ä½ç½®å’Œåç§°ï¼š</span></span><br><span class="line"><span class="comment">            ä½ç½®ï¼šWEB-INFä¸‹(ä½†æ˜¯ä»¥åç»å¯¹ä¸ä¼šæŠŠè¿™ä¸ªé…ç½®æ–‡ä»¶æ”¾åˆ°web-infä¸‹çš„,éƒ½æ˜¯æ”¾åœ¨resourcesä¸­)</span></span><br><span class="line"><span class="comment">            åç§°ï¼š&lt;servlet-name&gt;-servlet.xml  å½“å‰é…ç½®æ–‡ä»¶ä¸‹çš„é…ç½®æ–‡ä»¶å SpringMVC-servlet.xml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            url-patternä¸­ /å’Œ/*çš„åŒºåˆ«</span></span><br><span class="line"><span class="comment">            /ï¼šåŒ¹é…æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€çš„æ‰€æœ‰è¯·æ±‚ï¼ˆä¸åŒ…æ‹¬.jspï¼‰</span></span><br><span class="line"><span class="comment">            /* ï¼šåŒ¹é…æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€çš„æ‰€æœ‰è¯·æ±‚ï¼ˆåŒ…æ‹¬.jspï¼‰</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"><a href="#åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨" class="headerlink" title="åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"></a>åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨</h4><p>å‰ç«¯æ§åˆ¶å™¨å¤„ç†äº†æ‰€æœ‰æµè§ˆå™¨å‘é€çš„è¯·æ±‚,ä½†æ˜¯å…·ä½“çš„è¯·æ±‚æœ‰ä¸åŒçš„å¤„ç†è¿‡ç¨‹,å°±éœ€è¦åˆ›å»ºå¤„ç†å…·ä½“è¯·æ±‚çš„ç±»-è¯·æ±‚æ§åˆ¶å™¨,è¿™ä¸ªç±»ä¸éœ€è¦ç»§æ‰¿ä»€ä¹ˆ,åªéœ€è¦åŠ ä¸Š@Controlleræ³¨è§£,é‚£è¿™ä¸ªæ™®é€šçš„ç±»å°±å˜æˆäº†è¯·æ±‚æ§åˆ¶å™¨,ä¸è¿‡è¦æƒ³å®ç°è¿™ä¸ªæ“ä½œ,<strong>éœ€è¦åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ‰«æå¯¹åº”çš„åŒ…æ‰è¡Œ</strong></p>
<p>è¯·æ±‚æ§åˆ¶å™¨ä¸­æ¯ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ–¹æ³•ç§°ä¸ºæ§åˆ¶å™¨æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶"></a>åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶</h4><p>SpringMVCçš„é…ç½®æ–‡ä»¶æ˜¯åœ¨SpringMVCåˆå§‹åŒ–æ—¶å®ŒæˆåŠ è½½çš„<br>é»˜è®¤æ˜¯è¦æ”¾åœ¨web-infä¸‹,åå­—æ˜¯servlet-name+ -servlet.xml,<strong>å®é™…ä¸Šé…ç½®æ–‡ä»¶è¿˜æ˜¯è¦æ”¾åœ¨resourcesä¸‹,ç„¶ååœ¨web.xmlä¸­å¼•å…¥å³å¯</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ… --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                        index--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®äº†ä»€ä¹ˆ<strong>è§†å›¾å‰ç¼€</strong>,<strong>è§†å›¾åç¼€</strong>ä¹‹å,å°±å¯ä»¥ç›´æ¥é€šè¿‡é€»è¾‘è§†å›¾(è§†å›¾çš„åå­—)æ¥è®¿é—®äº†<br>æ¯”å¦‚ä¹‹å‰æ˜¯&#x2F;WEB-INF&#x2F;templates&#x2F;index.html<br>è€Œè§†å›¾å‰ç¼€å°±æ˜¯&#x2F;WEB-INF&#x2F;templates,è§†å›¾åç¼€å°±æ˜¯.html,æ‰€ä»¥å¯ä»¥ç›´æ¥é€šè¿‡indexæ¥è®¿é—®</p>
<h4 id="åˆ›å»ºæ§åˆ¶å™¨æ–¹æ³•"><a href="#åˆ›å»ºæ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="åˆ›å»ºæ§åˆ¶å™¨æ–¹æ³•"></a>åˆ›å»ºæ§åˆ¶å™¨æ–¹æ³•</h4><p>ä¸‹æ–‡ä¸­çš„æ–œçº¿&#x2F; è¡¨ç¤ºçš„æ˜¯localhost:8080&#x2F;ä¸Šä¸‹æ–‡è·¯å¾„&#x2F;<br>æ„æ€å°±æ˜¯,é…ç½®æ–œçº¿çš„RequestMapping,å°±æ˜¯â€é¦–é¡µâ€çš„è·¯å¾„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ§åˆ¶å™¨æ–¹æ³•</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">portal</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//å°†é€»è¾‘è§†å›¾è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å½“æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚,å¦‚æœè¯·æ±‚è·¯å¾„å’Œ@RequestMappingçš„æ‹¬å·é‡Œé¢çš„è·¯å¾„æ˜¯ä¸€æ ·çš„è¯,è¿™ä¸ªè¯·æ±‚å°±ä¼šè¢«è¯¥æ§åˆ¶å™¨æ–¹æ³•å¤„ç†</strong><br><strong>åœ¨returnä¹‹å,å°±ä¼šè¢«è§†å›¾è§£æå™¨è§£æ,ç„¶ååœ¨é€»è¾‘è§†å›¾å‰é¢åŠ ä¸Šè§†å›¾å‰ç¼€,åœ¨é€»è¾‘è§†å›¾åé¢åŠ ä¸Šè§†å›¾åç¼€:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                        index--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello&#125;&quot;</span>&gt;</span>æµ‹è¯•SpringMVC<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯thymeleafè§£æçš„è·¯å¾„,ä¹Ÿå°±æ˜¯ä¸‹é¢çš„th:href&#x3D;â€@{&#x2F;hello}â€<br>å¦‚æœç›´æ¥å†™&#x2F;hello,è¿™æ—¶æµè§ˆå™¨ä¼šè§£ææˆlocalhost:8080,å¹¶ä¸ä¼šæœ‰ä¸Šä¸‹æ–‡è·¯å¾„,è€Œ@{&#x2F;hello}å°±å¯ä»¥è§£ææˆlocalhost:8080&#x2F;ä¸Šä¸‹æ–‡è·¯å¾„</p>
<p>åˆ°è¿™é‡Œ,å…¶å®è¿˜æœ‰ä¸€äº›æ‰©å±•çš„ä¸œè¥¿</p>
<ol>
<li>å°†SpringMVCé…ç½®æ–‡ä»¶æ”¾åˆ°resourceç›®å½•ä¸‹çš„æ“ä½œ:<br>å°†åœ¨servletæ ‡ç­¾ä¸­æ·»åŠ <init-param>åˆå§‹åŒ–å‚æ•°,æŒ‡å®šparam-nameå’Œparam-valueå°±è¡Œäº†,param-valueå°±æ˜¯é…ç½®æ–‡ä»¶çš„æ–‡ä»¶å</li>
</ol>
<p>è€Œload-on-startupæ ‡ç­¾æ˜¯å°†DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶<br>ä¸ºä»€ä¹ˆè¦è®¾ç½®è¿™ä¹ˆå‘¢?å› ä¸ºDispatcherServletåœ¨åˆå§‹åŒ–æ—¶è¦åšçš„å·¥ä½œéå¸¸å¤š,æ‰€ä»¥æå‰åˆå§‹åŒ–èƒ½å¤Ÿæé«˜æ•ˆç‡</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è®¾ç½®SpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å°†DispatcherServlet çš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="RequestMappingæ³¨è§£"><a href="#RequestMappingæ³¨è§£" class="headerlink" title="@RequestMappingæ³¨è§£"></a>@RequestMappingæ³¨è§£</h3><p><strong>å¼€å§‹æ·±å…¥äº†</strong></p>
<p>é¦–å…ˆåšçš„è¿˜æ˜¯ç®€å•çš„é…ç½®</p>
<ol>
<li>å¤åˆ¶pom.xmlä¸­çš„ä¸€äº›ä¾èµ–,ä»æ‰“åŒ…æ–¹å¼å¼€å§‹,ä¸€ç›´å¤åˆ¶åˆ°æœ€å</li>
<li>ç„¶åé…ç½®web.xml,å°±æ˜¯é…ç½®servlet(DispatcherServlet)</li>
<li>ç„¶åé…ç½®springmvcé…ç½®æ–‡ä»¶(ç›´æ¥å¤åˆ¶ä¹‹å‰çš„,å› ä¸ºåŸºæœ¬æ²¡ä»€ä¹ˆåŒºåˆ«)</li>
</ol>
<p>é…ç½®å®Œ,å°±å¼€å§‹å†™controlleräº†</p>
<p>å¯ä»¥å•ç‹¬å†™ä¸€ä¸ªè®¿é—®é¦–é¡µçš„æ§åˆ¶å™¨-PortalController.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PortalController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">portal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="RequestMappingæ³¨è§£çš„åŠŸèƒ½"><a href="#RequestMappingæ³¨è§£çš„åŠŸèƒ½" class="headerlink" title="@RequestMappingæ³¨è§£çš„åŠŸèƒ½"></a>@RequestMappingæ³¨è§£çš„åŠŸèƒ½</h4><p>@RequestMappingæ³¨è§£çš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚å’Œå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•å…³è”èµ·æ¥,å»ºç«‹æ˜ å°„å…³ç³»<br>SpringMVCæ¥å—åˆ°æŒ‡å®šçš„è¯·æ±‚,å°±ä¼šæ¥æ‰¾åˆ°æ˜ å°„å…³ç³»ä¸­å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚</p>
<h4 id="RequestMappingæ³¨è§£å¯æ ‡è¯†çš„ä½ç½®"><a href="#RequestMappingæ³¨è§£å¯æ ‡è¯†çš„ä½ç½®" class="headerlink" title="@RequestMappingæ³¨è§£å¯æ ‡è¯†çš„ä½ç½®"></a>@RequestMappingæ³¨è§£å¯æ ‡è¯†çš„ä½ç½®</h4><ol>
<li>æ ‡è¯†åœ¨æ–¹æ³•ä¸Š,è®¾ç½®æ˜ å°„è¯·æ±‚è·¯å¾„çš„å…·ä½“ä¿¡æ¯</li>
<li>æ ‡è¯†åˆ°ç±»ä¸Š,è®¾ç½®æ˜ å°„è¯·æ±‚è·¯å¾„çš„åˆå§‹ä¿¡æ¯<br>è¿™ç§æ–¹å¼å°±ç›¸å½“äº,<strong>è¦å…ˆåŒ¹é…ç±»ä¸Šçš„è·¯å¾„,å†åŒ¹é…åˆ°æ–¹æ³•ä¸Šçš„è·¯å¾„,æ‰èƒ½å¤„ç†è¯·æ±‚</strong><br>æ¯”å¦‚è¿™æ ·:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestRequestMappingController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>æ­¤æ—¶ç±»ä¸Šçš„æ˜¯&#x2F;test,è€Œæ–¹æ³•ä¸Šçš„æ˜¯&#x2F;hello<br>å¦‚æœhtmlæ–‡ä»¶ä¸­æ˜¯è¿™æ ·å†™çš„:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingæ³¨è§£æ‰€æ ‡è¯†çš„ä½ç½®<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å°±è®¿é—®ä¸åˆ°,è¦å†™æˆè¿™æ ·:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test/hello&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingæ³¨è§£æ‰€æ ‡è¯†çš„ä½ç½®<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>ä¹Ÿå°±æ˜¯ç±»ä¸Šçš„è·¯å¾„åŠ ä¸Šæ–¹æ³•çš„è·¯å¾„æ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯å¾„</strong></p>
<blockquote>
<p>è¿™ä¸ªæ˜¯éå¸¸æœ‰ç”¨çš„,ä¸¾ä¸ªä¾‹å­,è€å¸ˆå’Œå­¦ç”ŸåŒæ—¶æœ‰ä¸€ä¸ªæŸ¥è¯¢çš„æ–¹æ³•,è¯·æ±‚è·¯å¾„éƒ½æ˜¯&#x2F;list,æ­¤æ—¶SpringMVCå°±ä¸èƒ½åˆ†è¾¨åˆ°åº•æ˜¯å­¦ç”Ÿçš„&#x2F;listè¿˜æ˜¯è€å¸ˆçš„&#x2F;list,å°±ä¼šæŠ¥é”™,åœ¨ç±»ä¸Šæ·»åŠ æ³¨è§£,å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜,æ¯”å¦‚åœ¨å­¦ç”Ÿç±»ä¸Šæ·»åŠ &#x2F;student,è€Œè¯·æ±‚æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯å°±ç”¨çš„æ˜¯&#x2F;student&#x2F;list,æŸ¥è¯¢è€å¸ˆå°±æ˜¯&#x2F;teacher&#x2F;list,è¿™æ ·å°±ä¸ä¼šå†²çªäº†</p>
</blockquote>
<h4 id="RequestMappingçš„valueå±æ€§"><a href="#RequestMappingçš„valueå±æ€§" class="headerlink" title="@RequestMappingçš„valueå±æ€§"></a>@RequestMappingçš„valueå±æ€§</h4><p>è¿™ä¸ªvalueå±æ€§,å…¶å®å°±æ˜¯è·¯å¾„,å¯ä»¥è®¾ç½®å¤šä¸ª:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&#123;&quot;/hello&quot;, &quot;/abc&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®å¤šä¸ªçš„æ•ˆæœ:è¯¥æ§åˆ¶å™¨æ–¹æ³•å¯ä»¥å¤„ç†å¤šä¸ªè¯·æ±‚:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingæ³¨è§£æ‰€æ ‡è¯†çš„ä½ç½®<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/abc&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingæ³¨è§£æ‰€æ ‡è¯†çš„ä½ç½®<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ä¸¤ä¸ªéƒ½èƒ½è®¿é—®åˆ°</p>
<p><em>ä¹‹å‰çš„servletä¹Ÿæ˜¯å¯ä»¥å®ç°çš„,åªéœ€è¦å¤šè®¾ç½®å‡ ä¸ªurl-pattern</em></p>
<p><em>æ˜å¤©è§</em></p>
<h4 id="RequestMappingçš„methodå±æ€§"><a href="#RequestMappingçš„methodå±æ€§" class="headerlink" title="@RequestMappingçš„methodå±æ€§"></a>@RequestMappingçš„methodå±æ€§</h4><p><strong>é€šè¿‡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼åŒ¹é…è¯·æ±‚,æµè§ˆå™¨æ‰€å‘é€è¯·æ±‚çš„è¯·æ±‚æ–¹å¼åŒ¹é…methodå±æ€§ä¸­çš„ä»»æ„ä¸€ä¸ª,å³å¯å“åº”è¯·æ±‚</strong></p>
<p>è¿™é‡Œçš„method,ä¹‹å‰åªå­¦è¿‡POSTå’ŒGET,ä»€ä¹ˆæ—¶å€™æ˜¯POST,ä»€ä¹ˆæ—¶å€™æ˜¯GET?<br>ä¸ç”¨è®°,å¾ˆç®€å•<br><strong>POSTè¯·æ±‚åªåœ¨formè¡¨å•æäº¤æ—¶æ”¹ä¸ºpostå‡ºç°,å…¶ä½™çš†ä¸ºGET</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/hello&quot;, &quot;/abc&quot;&#125;,</span></span><br><span class="line"><span class="meta">        method = &#123;RequestMethod.POST&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å°±åªèƒ½å¤„ç†postè¯·æ±‚äº†</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/abc&#125;&quot;</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/hello&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•@RequestMappingçš„methodå±æ€§&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ª,å°±åªèƒ½ä¸‹é¢çš„formè¡¨å•èƒ½è¯·æ±‚æˆåŠŸ,å› ä¸ºæ˜¯postè¯·æ±‚,ä¸Šé¢çš„æ˜¯getè¯·æ±‚</p>
<p>æ”¹æˆ:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/hello&quot;, &quot;/abc&quot;&#125;,</span></span><br><span class="line"><span class="meta">        method = &#123;RequestMethod.POST,RequestMethod.GET&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æ—¢èƒ½å¤„ç†get,ä¹Ÿèƒ½å¤„ç†post</p>
<blockquote>
<p>405é”™è¯¯:è‹¥æµè§ˆå™¨æ‰€å‘é€çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„å’Œ@RequestMappingæ³¨è§£valueå±æ€§åŒ¹é…,ä½†æ˜¯è¯·æ±‚æ–¹å¼ä¸åŒ¹é…,æ­¤æ—¶é¡µé¢æŠ¥é”™,405 - Request method â€˜xxxâ€™ not supported</p>
</blockquote>
<h4 id="RequestMappingçš„paramå±æ€§"><a href="#RequestMappingçš„paramå±æ€§" class="headerlink" title="@RequestMappingçš„paramå±æ€§"></a>@RequestMappingçš„paramå±æ€§</h4><blockquote>
<p>åœ¨@RequestMappingçš„åŸºç¡€ä¸Š,ç»“åˆè¯·æ±‚æ–¹å¼çš„ä¸€äº›æ´¾ç”Ÿæ³¨è§£:<br>@GetMapping,@PostMapping,@DeleteMapping,@PutMapping,è¿™äº›æ³¨è§£çš„æ•ˆæœå’Œ@RequestMappingæ³¨è§£çš„ä½œç”¨ç±»ä¼¼,åªæ˜¯é‡Œé¢ä¸ç”¨å†å†™methodäº†,è€Œæ˜¯å°†methodå±æ€§å†…ç½®åˆ°äº†æ³¨è§£å½“ä¸­</p>
</blockquote>
<p>@RequestMappingæ³¨è§£çš„paramså±æ€§</p>
<p>ä½œç”¨:é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å‚æ•°åŒ¹é…è¯·æ±‚,å³æµè§ˆå™¨å‘é€çš„è¯·æ±‚çš„è¯·æ±‚å‚æ•°å¿…é¡»æ»¡è¶³paramså±æ€§</p>
<ol>
<li>â€œparamâ€: è¡¨ç¤ºå½“å‰æ‰€åŒ¹é…è¯·æ±‚çš„è¯·æ±‚å‚æ•°ä¸­å¿…é¡»æºå¸¦paramå‚æ•°</li>
<li>â€œ!paramâ€: è¡¨ç¤ºå½“å‰æ‰€åŒ¹é…è¯·æ±‚å‚æ•°å¿…é¡»ä¸èƒ½æºå¸¦paramå‚æ•°</li>
<li>â€œparam&#x3D;valueâ€: è¡¨ç¤ºå½“å‰æ‰€åŒ¹é…è¯·æ±‚çš„è¯·æ±‚å‚æ•°ä¸­å¿…é¡»æºå¸¦paramå‚æ•°ä¸”å€¼å¿…é¡»ä¸ºvalue</li>
<li>â€œparam!&#x3D;valueâ€: è¡¨ç¤ºå½“å‰æ‰€åŒ¹é…è¯·æ±‚çš„è¯·æ±‚å‚æ•°å¯ä»¥ä¸æºå¸¦param,å¦‚æœæºå¸¦,å¿…é¡»ä¸èƒ½ç­‰äºvalue</li>
</ol>
<p><strong>ä¸‹é¢çš„paramsæ¡ä»¶å°±æ˜¯,å¿…é¡»æœ‰username,å¿…é¡»ä¸èƒ½æœ‰password,å¿…é¡»æœ‰age,ä¸”ç­‰äº20,genderå¯ä»¥ä¸æºå¸¦,ä½†å¦‚æœæºå¸¦ä¸èƒ½ä¸ºç”·</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/hello&quot;, &quot;/abc&quot;&#125;,</span></span><br><span class="line"><span class="meta">        method = &#123;RequestMethod.POST,RequestMethod.GET&#125;,</span></span><br><span class="line"><span class="meta">        params = &#123;&quot;username&quot;,&quot;!password&quot;,&quot;age=20&quot;,&quot;gender!=ç”·&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!-- ![1670555849427](image/ssm_thinking/1670555849427.png) -->
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20221209111735.png" alt="20221209111735"></p>
<blockquote>
<p>å¦‚æœé‡åˆ°paramså±æ€§ä¸åŒ¹é…çš„æƒ…å†µ,å°±ä¼šæŠ¥è¿™ä¸ªé”™è¯¯:<br>HTTP Status 400 - Parameter conditions â€œxxxxxâ€ not met for actual request parameters:</p>
</blockquote>
<p>é‚£å¦‚ä½•è®¾ç½®è¯·æ±‚å‚æ•°å‘¢,æœ‰ä¸¤ç§æ–¹å¼:</p>
<ol>
<li>ç›´æ¥?æ‹¼æ¥<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello?username=admin&#125;&quot;</span>&gt;</span>æµ‹è¯•paramså±æ€§<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>å°æ‹¬å·çš„å½¢å¼<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/hello(username=&#x27;admin&#x27;)&#125;&quot;</span>&gt;</span>æµ‹è¯•paramså±æ€§<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<strong>æœ‰ä»€ä¹ˆåŒºåˆ«å—?æ²¡æœ‰,åªæ˜¯ç¬¬ä¸€ç§å†™æ³•,ä¼šæŠ¥çº¢,ä½†å®é™…è¿è¡Œæ—¶æ²¡é—®é¢˜</strong><!-- ![1670555121712](image/ssm_thinking/1670555121712.png) -->
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20221209110526.png" alt="20221209110526"></li>
</ol>
<p><strong>ä½†æ˜¯paramç”¨çš„å¹¶ä¸å¤š,è¿˜æ˜¯valueå’Œmethodç”¨çš„æ¯”è¾ƒå¤š</strong></p>
<h4 id="RequestMappingçš„headerså±æ€§-äº†è§£"><a href="#RequestMappingçš„headerså±æ€§-äº†è§£" class="headerlink" title="@RequestMappingçš„headerså±æ€§(äº†è§£)"></a>@RequestMappingçš„headerså±æ€§(äº†è§£)</h4><p>éšä¾¿å†™ç‚¹å§,åæ­£æ˜¯äº†è§£<br>@RequestMappingæ³¨è§£çš„headerså±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯åŒ¹é…è¯·æ±‚æ˜ å°„<br>@RequestMappingæ³¨è§£çš„headerså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„,å¯ä»¥ç”¨è¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p>
<p>è¿™å››ç§å’Œä¸Šé¢çš„paramsç±»ä¼¼,ä½†åˆæœ‰äº›åŒºåˆ«</p>
<!-- ![1670556190250](image/ssm_thinking/1670556190250.png) -->
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20221209112315.png" alt="20221209112315"></p>
<p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§,ä½†æ˜¯ä¸æ»¡è¶³headerså±æ€§,æ­¤æ—¶é¡µé¢æ˜¾ç¤º404é”™è¯¯,å³èµ„æºæœªæ‰¾åˆ°</p>
<h4 id="SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„"><a href="#SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„" class="headerlink" title="SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„"></a>SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„</h4><p>è¯´ç™½äº†å°±æ˜¯ç”¨ç‰¹æ®Šç¬¦å·æ¥è¡¨ç¤ºè·¯å¾„ç‰‡æ®µ</p>
<ol>
<li>?:è¡¨ç¤ºä»»æ„çš„å•ä¸ªå­—ç¬¦</li>
<li>*:è¡¨ç¤ºä»»æ„çš„0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</li>
<li>**:è¡¨ç¤ºä»»æ„å±‚æ•°çš„ä»»æ„ç›®å½•<br>æ³¨æ„:åœ¨ä½¿ç”¨**æ—¶,åªèƒ½ä½¿ç”¨&#x2F;**&#x2F;xxxçš„æ–¹å¼</li>
</ol>
<p>ç¤ºä¾‹1:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ï¼Ÿï¼šä»»æ„çš„å•ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/a?c/test/ant&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testAnt</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å°±å¯ä»¥åŒ¹é…a(ä»»æ„å­—ç¬¦)cçš„è¯·æ±‚äº†,<strong>ä½†æ˜¯æŸäº›ç‰¹æ®Šå­—ç¬¦æ˜¯ä¸è¡Œçš„,æ¯”å¦‚?</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/abc/test/ant&#125;&quot;</span>&gt;</span>æµ‹è¯•Ant<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/acc/test/ant&#125;&quot;</span>&gt;</span>æµ‹è¯•Ant<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/adc/test/ant&#125;&quot;</span>&gt;</span>æµ‹è¯•Ant<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹2:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a*c/test/ant&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testAnt</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯ä»¥åŒ¹é…ä»»æ„ä¸ªæ•°çš„ä»»æ„å­—ç¬¦,ä½†æ˜¯ä¹Ÿä¸èƒ½æœ‰ç‰¹æ®Šå­—ç¬¦:?,&#x2F;</p>
<p>ç¤ºä¾‹3:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/**/test/ant&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testAnt</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¯ä»¥è¡¨ç¤ºä»»æ„å±‚æ•°çš„ä»»æ„ç›®å½•,ä½†æ˜¯è¦æ³¨æ„å†™æ³•:<strong>**åªèƒ½å†™åœ¨åŒæ–œçº¿ä¸­,å‰åä¸èƒ½æœ‰ä»»ä½•çš„å­—ç¬¦</strong></p>
<!-- ![1670638579526](image/ssm_thinking/1670638579526.png) -->
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20221210101622.png" alt="20221210101622"></p>
<h4 id="SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦-é‡ç‚¹"><a href="#SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦-é‡ç‚¹" class="headerlink" title="SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦(é‡ç‚¹)"></a>SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦(é‡ç‚¹)</h4><p>åŸå§‹æ–¹å¼: &#x2F;deleteUser?id&#x3D;1<br>restæ–¹å¼: &#x2F;deleteUser&#x2F;1<br>åˆæ˜¯è¿™ä¸ªrestæ–¹å¼:RESTful,å½“æ—¶çœ‹çš„æ—¶å€™è¿·è¿·çªçªçš„</p>
<blockquote>
<p>SpringMVCè·¯å¾„ä¸­çš„å ä½ç¬¦å¸¸ç”¨äºRESTfulæ›´å„ç§,å½“è¯·æ±‚è·¯å¾„ç§å°†æŸäº›æ•°æ®é€šè¿‡è·¯å¾„çš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸­,å°±å¯ä»¥åœ¨ç›¸åº”çš„@RequestMappingæ³¨è§£çš„valueå±æ€§ä¸­é€šè¿‡å ä½ç¬¦{xxx}è¡¨ç¤ºä¼ è¾“çš„æ•°æ®,åœ¨é€šè¿‡@PathVariableæ³¨è§£,å°†å ä½ç¬¦æ‰€è¡¨ç¤ºçš„æ•°æ®èµ‹å€¼ç»™æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚</p>
</blockquote>
<p><strong>è¯´ç™½äº†å°±æ˜¯å°†å‘é€çš„è¯·æ±‚å‚æ•°ä¹Ÿä½œä¸ºè·¯å¾„çš„ä¸€éƒ¨åˆ†</strong></p>
<p>ä¸»è¦å°±æ˜¯è¦ç”¨{}å’Œ@PathVariable(â€œâ€),</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/rest/&#123;username&#125;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRest</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id, <span class="meta">@PathVariable(&quot;username&quot;)</span> String username)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;id: &quot;</span> + id);</span><br><span class="line">    System.out.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test/rest/admin/1&#125;&quot;</span>&gt;</span>æµ‹è¯•@ReqeustMappingæ³¨è§£çš„valueå±æ€§ä¸­çš„å ä½ç¬¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åç«¯å°±å¯ä»¥è·å–åˆ°adminå’Œ1äº†</p>
<h3 id="SpringMVCè·å–è¯·æ±‚å‚æ•°"><a href="#SpringMVCè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="SpringMVCè·å–è¯·æ±‚å‚æ•°"></a>SpringMVCè·å–è¯·æ±‚å‚æ•°</h3><ol>
<li>é€šè¿‡ServletAPIè·å–,ä¹Ÿå°±æ˜¯è€å¼çš„è·å–æ–¹å¼,ä¸»è¦å°±æ˜¯è¦æ³¨æ„requestæ˜¯ä»å“ªé‡Œæ¥çš„,æ˜¯å‰ç«¯æ§åˆ¶å™¨æ£€æµ‹æ–¹æ³•ç”¨çš„æ˜¯ä»€ä¹ˆ,å°±ä¼šç»™ä»€ä¹ˆ<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param/servletAPI&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParamByServletAPI</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    System.out.println(<span class="string">&quot;password: &quot;</span> + password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/param/servletAPI&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·å: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç :  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>


<ol start="2">
<li>é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–<br>è¿™ç§æ–¹æ³•å¤ªç®€å•äº†,åªéœ€è¦åœ¨å½¢å‚ä½ç½®å†™ä¸Šå’Œnameä¸€æ ·çš„åå­—,å°±å¯ä»¥ç›´æ¥è·å–äº†,ä¸ç”¨åŠ æ³¨è§£,ä¹Ÿä¸ç”¨å†™request<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParam</span><span class="params">(String username,String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    System.out.println(<span class="string">&quot;password: &quot;</span> + password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/param&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·å: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¯†ç :  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç™»å½•&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¦‚æœè¯·æ±‚å‚æ•°å’Œå½¢å‚åä¸ä¸€è‡´å‘¢,ä¹Ÿå°±æ˜¯è‡ªå·±è®¾ç½®çš„ä¸ä¸€è‡´,æ­¤æ—¶å¯ä»¥ä½¿ç”¨@RquestParamæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParam</span><span class="params">(<span class="meta">@RequestParam(&quot;userName&quot;)</span> String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    System.out.println(<span class="string">&quot;password: &quot;</span> + password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>ä½†æ˜¯æˆ‘æ„Ÿè§‰å¤šæ­¤ä¸€ä¸¾</em>,ç›¸å½“äºå¤šä¸€ä¸ªæ˜ å°„,ç”¨äºè¯·æ±‚å‚æ•°å’Œå½¢å‚ä¸ä¸€è‡´çš„æƒ…å†µ</p>
<p>è¿˜æœ‰å°±æ˜¯@RequestParamæ³¨è§£çš„å…¶ä»–å±æ€§å€¼</p>
<ol>
<li>required,é»˜è®¤ä¸ºtrue,è¡¨ç¤ºå¿…é¡»ä¼ è¿™ä¸ªå‚æ•°,å¦‚æœä¸ä¼ ,æŠ¥400</li>
<li>defaultValue,å½“è®¾ç½®äº†defaultValueæ—¶,æ— è®ºrequiredæ˜¯trueè¿˜æ˜¯false,å½“æ²¡ä¼ å‚æ•°æ—¶,å°±æ˜¯ç”¨é»˜è®¤å€¼,ä¼ äº†,é‚£å°±ä½¿ç”¨ä¼ çš„å‚æ•°<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParam</span><span class="params">(<span class="meta">@RequestParam(value = &quot;userName&quot;,required = false,defaultValue = &quot;hello&quot;)</span> String username, String password)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    System.out.println(<span class="string">&quot;password: &quot;</span> + password);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="RequestHeaderå’Œ-CookieValue"><a href="#RequestHeaderå’Œ-CookieValue" class="headerlink" title="@RequestHeaderå’Œ@CookieValue"></a>@RequestHeaderå’Œ@CookieValue</h3><ol>
<li>@RequestHeader: å°†è¯·æ±‚å¤´ä¿¡æ¯å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ç»‘å®š</li>
<li>@CookieValue: å°†Cookieæ•°æ®å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ç»‘å®š</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParam</span><span class="params">(</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestParam(value = &quot;userName&quot;, required = false, defaultValue = &quot;hello&quot;)</span> String username,</span></span><br><span class="line"><span class="params">        String password,</span></span><br><span class="line"><span class="params">        <span class="meta">@RequestHeader(&quot;referer&quot;)</span> String referer,</span></span><br><span class="line"><span class="params">        <span class="meta">@CookieValue(&quot;JSESSIONID&quot;)</span> String jsessionId</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;username: &quot;</span> + username);</span><br><span class="line">    System.out.println(<span class="string">&quot;password: &quot;</span> + password);</span><br><span class="line">    System.out.println(<span class="string">&quot;referer:&quot;</span> + referer);</span><br><span class="line">    System.out.println(<span class="string">&quot;jsessionId:&quot;</span> + jsessionId);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶è·å–cookieçš„å‰ææ˜¯è¦æœ‰,æ‰€ä»¥åœ¨ä¸Šé¢çš„&#x2F;param&#x2F;servletAPIä¸­æ·»åŠ äº†:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br></pre></td></tr></table></figure>
<p><strong>æ­¤æ—¶å…ˆè®¿é—®&#x2F;param&#x2F;servletAPI,ç„¶åå†è®¿é—®&#x2F;param,å°±å¯ä»¥è·å–åˆ°jsessionIdçš„cookieäº†</strong></p>
<h3 id="é€šè¿‡pojoè·å–è¯·æ±‚å‚æ•°"><a href="#é€šè¿‡pojoè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="é€šè¿‡pojoè·å–è¯·æ±‚å‚æ•°"></a>é€šè¿‡pojoè·å–è¯·æ±‚å‚æ•°</h3><p>è¿™ç§ä»¥åç”¨çš„ä¹Ÿæ˜¯å¾ˆå¤š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/param/pojo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getParamByPojo</span><span class="params">(User user)</span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®è®¾ç½®å®ä½“ç±»ç±»å‹çš„å½¢å‚,è¦ä¿è¯å®ä½“ç±»ä¸­çš„å±æ€§çš„å±æ€§åå’Œè¯·æ±‚å‚æ•°çš„åå­—ä¸€è‡´,å°±å¯ä»¥å®ä½“ç±»ç±»å‹çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°<br><strong>è¿™ç§ä¹Ÿæ˜¯ç”¨çš„æœ€å¤šçš„ä¸€ç§æ–¹å¼</strong></p>
<h3 id="è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"><a href="#è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜" class="headerlink" title="è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"></a>è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜</h3><p>è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜,å¯ä»¥ä½¿ç”¨SpringMVCæä¾›çš„ç¼–ç è¿‡æ»¤å™¨CharacterEncodingFilter,ä½†æ˜¯å¿…é¡»åœ¨web.xmlä¸­è¿›è¡Œæ³¨å†Œ</p>
<p>æŠŠè¿™ä¸ªæ”¾åˆ°web.xmlä¸­å°±å¯ä»¥äº†</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®Springçš„ç¼–ç è¿‡æ»¤å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿˜æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„åœ°æ–¹<br>Tomcat7ï¼Œå¦‚æœä¸åœ¨server.xmlä¸­è®¾ç½®å­—ç¬¦é›†çš„è¯ï¼Œé‚£GETå’ŒPOSTéƒ½æ˜¯ä¹±ç (ä¸­æ–‡ä¹±ç )<br>Tomcat8ï¼Œè§£å†³äº†GETè¯·æ±‚ä¹±ç çš„é—®é¢˜ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³POSTè¯·æ±‚ä¹±ç ï¼Œæ­¤æ—¶åœ¨web.xmlä¸­è®¾ç½®filterè¿‡æ»¤å™¨å³å¯</p>
</blockquote>
<p><strong>SpringmVCä¸­å¤„ç†ç¼–ç çš„è¿‡æ»¤å™¨ä¸€å®šè¦é…ç½®åœ¨å…¶ä»–è¿‡æ»¤å™¨ä¹‹å‰,å¦åˆ™æ— æ•ˆ</strong></p>
<h3 id="åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#åŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>åŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><h4 id="ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h4><p>è¿™è¿˜æ˜¯è€å¼çš„æ–¹å¼setAttribute()</p>
<h4 id="ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h4><blockquote>
<p>ä¸ç®¡ä½¿ç”¨çš„æ˜¯å“ªç§æ–¹å¼,åˆ°æœ€åéƒ½ä¼šè¢«è½¬æ¢ä¸ºModelAndViewçš„å½¢å¼å…±äº«æ•°æ®,è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨è¿™ä¸ªçš„åŸå› </p>
</blockquote>
<p>å…·ä½“æ­¥éª¤:</p>
<ol>
<li>åˆ›å»ºModelAndViewå¯¹è±¡</li>
<li>å…±äº«æ•°æ®:addObject()</li>
<li>è®¾ç½®è§†å›¾:setViewName()<br><strong>æ³¨æ„,å¦‚æœä½¿ç”¨ModelAndView,å°±å¿…é¡»å°†ModelAndViewå¯¹è±¡è¿”å›</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/mav&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">testModelAndView</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ModelAndView åŒ…å«Modelå’ŒViewçš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">         * Model: å‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</span></span><br><span class="line"><span class="comment">         * View: è®¾ç½®é€»è¾‘è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">//å‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</span></span><br><span class="line">        mav.addObject(<span class="string">&quot;testRequestScope&quot;</span>,<span class="string">&quot;hello,ModelAndView&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®é€»è¾‘è§†å›¾</span></span><br><span class="line">        mav.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>é‚£å¦‚ä½•è·å–æ•°æ®å‘¢?<br>å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆè‰¹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  thymeleafä¸­çš„è¯­æ³•ï¼Œä½¿ç”¨$&#123;&#125;æ¸²æŸ“pæ ‡ç­¾ä¸­çš„å†…å®¹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;testRequestScope&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨Modelå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®"><a href="#ä½¿ç”¨Modelå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®" class="headerlink" title="ä½¿ç”¨Modelå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®"></a>ä½¿ç”¨Modelå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</h4><p>è¿™å¯èƒ½æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼äº†,å› ä¸ºç›¸è¾ƒäºModelAndView,è¿™ä¸ªæ˜æ˜¾ç®€å•ä¸€äº›</p>
<ul>
<li>å¯¹è±¡ä¸ç”¨è‡ªå·±åˆ›å»º,ç›´æ¥å†™åœ¨å½¢å‚ä½ç½®å³å¯</li>
<li>è§†å›¾ç›´æ¥è¿”å›,ä¸éœ€è¦setViewå¯¹è±¡<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/model&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModel</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>,<span class="string">&quot;hello,Model&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ä½¿ç”¨ModelMapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®"><a href="#ä½¿ç”¨ModelMapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®" class="headerlink" title="ä½¿ç”¨ModelMapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®"></a>ä½¿ç”¨ModelMapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</h4><p>è¿™ç§ä¹Ÿæ˜¯å¾ˆç®€å•,å‡ ä¹ä¸€æ¨¡ä¸€æ ·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/modelMap&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testModelMap</span><span class="params">(ModelMap modelMap)</span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;testRequestScope&quot;</span>,<span class="string">&quot;hello,ModelMap&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨mapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®"><a href="#ä½¿ç”¨mapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®" class="headerlink" title="ä½¿ç”¨mapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®"></a>ä½¿ç”¨mapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</h4><p>åŒºåˆ«ä»…åœ¨äºå½¢å‚çš„å¯¹è±¡ä¸åŒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/map&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testMap</span><span class="params">(Map&lt;String,Object&gt; map)</span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;testRequestScope&quot;</span>,<span class="string">&quot;hello,map&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Modelå’ŒModelMapå’Œmapçš„å…³ç³»"><a href="#Modelå’ŒModelMapå’Œmapçš„å…³ç³»" class="headerlink" title="Modelå’ŒModelMapå’Œmapçš„å…³ç³»"></a>Modelå’ŒModelMapå’Œmapçš„å…³ç³»</h4><p><strong>æ— è®ºæ˜¯ä½¿ç”¨Model,ModelMap,Map,åº•å±‚éƒ½æ˜¯åŒä¸€ä¸ªç±»:</strong><br>org.springframework.validation.support.BindingAwareModelMap</p>
<h4 id="å‘sessionåŸŸå’ŒapplicationåŸŸä¸­å…±äº«æ•°æ®"><a href="#å‘sessionåŸŸå’ŒapplicationåŸŸä¸­å…±äº«æ•°æ®" class="headerlink" title="å‘sessionåŸŸå’ŒapplicationåŸŸä¸­å…±äº«æ•°æ®"></a>å‘sessionåŸŸå’ŒapplicationåŸŸä¸­å…±äº«æ•°æ®</h4><p>å»ºè®®è¿˜æ˜¯ä½¿ç”¨è€å¼çš„å…±äº«æ–¹å¼:setAttribute<br>å› ä¸ºSpringMVCæä¾›çš„æ–¹å¼æ¯”åŸç”Ÿservletæ›´å¤æ‚ä¸€äº›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/session&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testSession</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    session.setAttribute(<span class="string">&quot;testSessionScope&quot;</span>,<span class="string">&quot;hello,Session&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test/application&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testApplication</span><span class="params">(HttpSession session)</span>&#123;</span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    servletContext.setAttribute(<span class="string">&quot;testApplicationScope&quot;</span>,<span class="string">&quot;hello,application&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªä¸€å—å†™äº†,ä¸»è¦å°±æ˜¯è®°å¥½å¦‚ä½•å¾€åŸŸä¸­å…±äº«æ•°æ®<br>sessionæ˜¯ç›´æ¥ä½¿ç”¨sessionå¯¹è±¡,è€Œapplicationä¹Ÿæ˜¯ä½¿ç”¨session,ä½†æ˜¯è¦è·å–servletContextå¯¹è±¡å†è®¾ç½®</p>
<p>è€Œè·å–åŸŸä¸­çš„æ•°æ®:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  åœ¨thymeleafä¸­ï¼Œå¦‚æœè¦è·å–sessionå’ŒapplicationåŸŸä¸­çš„æ•°æ®ï¼Œè¦å†™ä¸Šsession/application.xxxçš„å½¢å¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.testSessionScope&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;application.testApplicationScope&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="SpringMVCçš„è§†å›¾"><a href="#SpringMVCçš„è§†å›¾" class="headerlink" title="SpringMVCçš„è§†å›¾"></a>SpringMVCçš„è§†å›¾</h3><p>SpringMVCä¸­çš„è§†å›¾æ˜¯Viewæ¥å£,è§†å›¾çš„ä½œç”¨æ˜¯æ¸²æŸ“æ•°æ®,å°†æ¨¡å‹Modelä¸­çš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·<br>SpringMVCè§†å›¾çš„ç§ç±»å¾ˆå¤š,é»˜è®¤æœ‰è½¬å‘è§†å›¾å’Œé‡å®šå‘è§†å›¾<br>å½“å·¥ç¨‹å¼•å…¥jstlçš„ä¾èµ–,è½¬å‘è§†å›¾ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºjstlView<br>è‹¥ä½¿ç”¨çš„è§†å›¾æŠ€æœ¯ä¸ºThymeleaf,åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†Thymeleafçš„è§†å›¾è§£æå™¨,ç”±æ­¤è§†å›¾è§£æå™¨è§£æä¹‹åæ‰€å¾—åˆ°çš„æ˜¯ThymeleafView</p>
<h4 id="ThymeleafView"><a href="#ThymeleafView" class="headerlink" title="ThymeleafView"></a>ThymeleafView</h4><p><strong>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°æ²¡æœ‰ä»»ä½•å‰ç¼€æ—¶,æ­¤æ—¶çš„è§†å›¾åç§°ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æ,è§†å›¾åç§°æ‹¼æ¥è§†å›¾å‰ç¼€å’Œè§†å›¾åç¼€æ‰€å¾—åˆ°çš„æœ€ç»ˆè·¯å¾„,ä¼šé€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</strong></p>
<h4 id="InternalResourceView"><a href="#InternalResourceView" class="headerlink" title="InternalResourceView"></a>InternalResourceView</h4><p>å°±æ˜¯åœ¨è§†å›¾å‰åŠ ä¸Šâ€forward:â€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/view/forward&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testInternalResourceView</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// è½¬å‘åˆ°/test/model</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/test/model&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™ä¸ªç”¨çš„ä¸å¤šçš„,å› ä¸ºåŸæ¥å®ç°çš„å°±æ˜¯è½¬å‘,è¿™ä¸ªä¹Ÿæ˜¯è½¬å‘<br><strong>ä»¥åç”¨çš„æœ€å¤šçš„è¿˜æ˜¯Thymeleaf</strong></p>
<h4 id="é‡å®šå‘è§†å›¾RedirectView"><a href="#é‡å®šå‘è§†å›¾RedirectView" class="headerlink" title="é‡å®šå‘è§†å›¾RedirectView"></a>é‡å®šå‘è§†å›¾RedirectView</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/view/redirect&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRedirectView</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/test/model&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>æ€»ç»“æ¥è¯´,ä½¿ç”¨è½¬å‘è§†å›¾æ—¶,ä½¿ç”¨Thymeleafè§†å›¾,ä½¿ç”¨é‡å®šå‘æ—¶,ä½¿ç”¨é‡å®šå‘è§†å›¾,è€Œè®¿é—®é¡µé¢å¤±è´¥æ—¶,<strong>å°±ä½¿ç”¨è½¬å‘,è®¿é—®æˆåŠŸå°±ä½¿ç”¨é‡å®šå‘</strong></p>
</blockquote>
<h4 id="è§†å›¾æ§åˆ¶å™¨view-controller"><a href="#è§†å›¾æ§åˆ¶å™¨view-controller" class="headerlink" title="è§†å›¾æ§åˆ¶å™¨view-controller"></a>è§†å›¾æ§åˆ¶å™¨view-controller</h4><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­,ä»…ä»…ç”¨æ¥å®ç°é¡µé¢è·³è½¬,å³åªéœ€è¦è®¾ç½®è§†å›¾åç§°æ—¶,å¯ä»¥å°†å¤„ç†å™¨æ–¹æ³•ä½¿ç”¨view-controlleræ ‡ç­¾è¿›è¡Œè¡¨ç¤º</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  è§†å›¾æ§åˆ¶å™¨ï¼šä¸ºå½“å‰çš„è¯·æ±‚ç›´æ¥è®¾ç½®è§†å›¾åç§°å®ç°é¡µé¢è·³è½¬ ä½†æ˜¯éœ€è¦mvc:annotation-drivenæ ‡ç­¾</span></span><br><span class="line"><span class="comment">      æ²¡æœ‰è¿™ä¸ªæ ‡ç­¾ï¼Œé‚£ä¹ˆDispatcherServletåªèƒ½å¤„ç†è§†å›¾æ§åˆ¶å™¨æ‰€è®¾ç½®çš„è¯·æ±‚ï¼Œå…¶ä»–è¯·æ±‚å…¨éƒ¨404</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;index&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>é€šè¿‡æ ‡ç­¾å®ç°é¡µé¢è·³è½¬</strong></p>
<h3 id="RESTful"><a href="#RESTful" class="headerlink" title="RESTful"></a>RESTful</h3><h4 id="RESTfulç®€ä»‹"><a href="#RESTfulç®€ä»‹" class="headerlink" title="RESTfulç®€ä»‹"></a>RESTfulç®€ä»‹</h4><blockquote>
<p>å…¶å®æˆ‘åˆå¼€å§‹è¿·èŒ«äº†<br>å› ä¸ºè¿™ä¸ªè§†é¢‘çœ‹å®Œå¥½åƒä¹Ÿæ˜¯æ²¡å­¦åˆ°ä»€ä¹ˆ<br>è¿˜æ˜¯è¦åšé¡¹ç›®å•Š<br>åˆ°åº•æ˜¯å…ˆç”¨SSMåšä¸€ä¸ªé¡¹ç›®,ç„¶åå†å­¦boot<br>è¿˜æ˜¯å…ˆå­¦boot,å†åšé¡¹ç›®å‘¢<br>çœ‹å®Œå†è¯´å§<br>å®³</p>
</blockquote>
<p>åˆ›å»ºæ–°çš„å·¥ç¨‹</p>
<p>æˆ‘ä¹Ÿä¸çŸ¥é“åˆ°åº•æœ‰ä»€ä¹ˆç”¨,åæ­£å°±æ˜¯çœ‹å§,çœ‹æ˜ç™½å°±å¥½</p>
<h4 id="RESTfulæ¨¡æ‹ŸCRUD"><a href="#RESTfulæ¨¡æ‹ŸCRUD" class="headerlink" title="RESTfulæ¨¡æ‹ŸCRUD"></a>RESTfulæ¨¡æ‹ŸCRUD</h4><p><strong>è¦æ³¨æ„,formè¡¨å•åªæœ‰ä¸¤ç§æäº¤æ–¹å¼,getå’Œpost,æ˜¯æ²¡æœ‰putå’Œdeleteçš„,è¦æƒ³å®ç°è¿™ä¸¤ç§æ–¹å¼,éœ€è¦ä»¥ä¸‹æ­¥éª¤:</strong></p>
<ol>
<li>è®¾ç½®è¿‡æ»¤å™¨(è¦æ³¨æ„ä¸€å®šè¦è®¾ç½®åœ¨ç¼–ç è¿‡æ»¤å™¨çš„åé¢)<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    è®¾ç½®å¤„ç†è¯·æ±‚æ–¹å¼çš„è¿‡æ»¤å™¨   --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>è®¾ç½®nameä¸º_methodçš„inputæ ‡ç­¾,å¹¶ä¿è¯formè¡¨å•æ˜¯postè¯·æ±‚æ–¹å¼<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<strong>nameå¿…é¡»ä¸º_method,valueä¸ºè¦è®¾ç½®çš„è¯·æ±‚æ–¹å¼</strong></li>
</ol>
<p>é‚£ä»£ç éƒ½åœ¨è¿™äº†,å› ä¸ºæ²¡å•¥éš¾çš„,æ‰€ä»¥å°±ä¸€å—æ”¾äº†</p>
<blockquote>
<p>è¿™é‡Œä½¿ç”¨äº†æ´¾ç”Ÿæ³¨è§£</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯---&gt;/user--&gt;get</span></span><br><span class="line"><span class="comment"> * æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯---&gt;/user/1--&gt;get</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ç”¨æˆ·ä¿¡æ¯---&gt;/user--&gt;post</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯---&gt;/user--&gt;put</span></span><br><span class="line"><span class="comment"> * åˆ é™¤ç”¨æˆ·ä¿¡æ¯---&gt;/user/1--&gt;delete</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestRestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAllUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯---&gt;/user--&gt;get&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/user/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯---&gt;/user/&quot;</span> + id + <span class="string">&quot;--&gt;get&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">insertUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ·»åŠ ç”¨æˆ·ä¿¡æ¯---&gt;/user--&gt;post&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯---&gt;/user--&gt;put&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/user/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/user/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤ç”¨æˆ·ä¿¡æ¯---&gt;/user/&quot;</span> + id + <span class="string">&quot;--&gt;delete&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±æ˜¯é¡µé¢</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span>&gt;</span>æŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/2&#125;&quot;</span>&gt;</span>æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ·»åŠ ç”¨æˆ·ä¿¡æ¯&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;put&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user/1&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åˆ é™¤ç”¨æˆ·ä¿¡æ¯&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="RESTfulæ¡ˆä¾‹"><a href="#RESTfulæ¡ˆä¾‹" class="headerlink" title="RESTfulæ¡ˆä¾‹"></a>RESTfulæ¡ˆä¾‹</h4><p>è¿™æ¬¡æ‰€è°“çš„æµ‹è¯•å¹¶æ²¡æœ‰é“¾æ¥æ•°æ®åº“,è¿˜æ˜¯åªæ˜¯æ¨¡æ‹Ÿä¸€ä¸‹</p>
<blockquote>
<p>çœŸçš„æ˜¯,ç”¨äº†æ–°é”®ç›˜ä¸¤å¤©,å°±æ„Ÿè§‰åŸæ¥çš„é”®ç›˜æ‰‹æ„Ÿæ€ªæ€ªçš„</p>
</blockquote>
<p><strong>è¿™ä¸ªæ¡ˆä¾‹å¥½åƒä¹Ÿå­¦ä¸åˆ°ä»€ä¹ˆ,ä½†æ˜¯å¯ä»¥å­¦ä¸€ä¸‹,å¦‚ä½•å±•ç¤ºé›†åˆä¸­çš„æ•°æ®</strong><br>è¿™ä¸ªè¿˜æ˜¯æŒºæœ‰ç”¨çš„:<br>æ€è·¯å°±æ˜¯,å¾ªç¯,è¯­æ³•:<br><strong>th:each&#x3D;â€employee : ${åŸŸä¸­é›†åˆçš„name}â€,é‚£ä¹ˆemployeeå°±è¡¨ç¤ºé›†åˆä¸­çš„æ¯ä¸€é¡¹</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;5&quot;</span>&gt;</span>employee list<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>options<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;employee : $&#123;allEmployee&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.lastName&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.email&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;employee.gender&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;&quot;</span>&gt;</span>delete<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>


<blockquote>
<p>é™æ€èµ„æºçš„è®¿é—®<br>åœ¨è‡ªå·±å†™çš„å·¥ç¨‹ä¸­çš„web.xmlæœ‰DispatcherServlet,æˆ‘ä»¬é‡å†™äº†ä¸€ä¸ªurl-pattern,ä¸ºæ–œæ†&#x2F;,è¿™å°±ç›´æ¥è¦†ç›–äº†tomcatè‡ªå¸¦çš„defaultServlet,è€ŒDistpathcerServletæ˜¯ä¸èƒ½å¤„ç†é™æ€èµ„æºçš„,æ‰€ä»¥æ­¤æ—¶å¼•å…¥é™æ€èµ„æºæ˜¯404</p>
</blockquote>
<p>è§£å†³åŠæ³•</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯æƒ³ç”¨è¿™ä¸ª,è¿˜éœ€è¦:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å°±å®ç°äº†:<strong>è¯·æ±‚å…ˆè®©DispatcherServletå¤„ç†,å¦‚æœå¤„ç†ä¸äº†,æ¯”å¦‚é™æ€èµ„æº,å†è½¬ç»™é»˜è®¤çš„servletå¤„ç†(tomcatè‡ªå¸¦çš„)</strong></p>
<p><strong>è¿˜æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„ç‚¹,ä¹‹å‰å†™çš„é»˜è®¤è·³è½¬é¦–é¡µçš„é‚£ä¸ª,å…¶å®è¿˜å¯ä»¥ç”¨åˆ°ä¸€äº›å…¶ä»–åœ°æ–¹,æ¯”å¦‚è¦è·³è½¬åˆ°æ·»åŠ é¡µé¢,æ­¤æ—¶æ˜¯ä¸éœ€è¦controllerå¤„ç†çš„,å°±è®©å®ƒç›´æ¥è·³è¿‡å»,å°±å¯ä»¥ç›´æ¥åœ¨springmvc.xmlä¸­é…ç½®ä¸Š</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/to/add&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;employee_add&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>


<p><strong>è¿˜æœ‰è¦æ³¨æ„çš„åœ°æ–¹</strong><br>è·¯å¾„çš„æ‹¼æ¥:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;&#x27;/employee/&#x27;+$&#123;employee.id&#125;&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>å•å¼•å·æ‹¬èµ·æ¥,ç„¶åç”¨åŠ å·æ‹¼æ¥</strong></p>
<p><strong>ç„¶å,å†™äº†ä¸€å †vue,æˆ‘å·²ç»å•¥éƒ½ä¸ä¼šäº†å“ˆå“ˆå“ˆå“ˆ</strong></p>
<p>ç„¶åæŠŠä»£ç æ”¾ç€å§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.dao.EmployeeDao;</span><br><span class="line"><span class="keyword">import</span> com.zzmr.pojo.Employee;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯ï¼š/employee---&gt;get</span></span><br><span class="line"><span class="comment"> * è·³è½¬åˆ°æ·»åŠ é¡µé¢ï¼š/to/add---&gt;get</span></span><br><span class="line"><span class="comment"> * æ·»åŠ å‘˜å·¥ä¿¡æ¯ï¼š/employee---&gt;post</span></span><br><span class="line"><span class="comment"> * è·³è½¬åˆ°ä¿®æ”¹é¡µé¢ï¼š/employee/1---&gt;get</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹å‘˜å·¥ä¿¡æ¯ï¼š/employee---&gt;put</span></span><br><span class="line"><span class="comment"> * åˆ é™¤å‘˜å·¥ä¿¡æ¯ï¼š/employee---&gt;delete</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeDao employeeDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAllEmployee</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–æ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">        Collection&lt;Employee&gt; allEmployee = employeeDao.getAll();</span><br><span class="line">        <span class="comment">//å°†æ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯åœ¨è¯·æ±‚åŸŸä¸­å…±äº«</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;allEmployee&quot;</span>, allEmployee);</span><br><span class="line">        <span class="comment">//è·³è½¬åˆ°åˆ—è¡¨é¡µé¢</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;employee_list&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/employee&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addEmployee</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        employeeDao.save(employee);</span><br><span class="line">        <span class="comment">//è¿™é‡Œä¸èƒ½ç›´æ¥è·³è½¬åˆ°åˆ—è¡¨é¡µé¢ï¼Œç›´æ¥è·³è½¬æ˜¯æ²¡æœ‰æ•°æ®çš„ï¼Œå› ä¸ºåˆ—è¡¨é¡µé¢çš„æ•°æ®è¦ç»è¿‡getAllEmployee()å¤„ç†æ‰èƒ½è·å¾—</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toUpdateEmployee</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id, Model model)</span> &#123;</span><br><span class="line">        <span class="comment">//    æ ¹æ®å‘˜å·¥æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> employeeDao.get(id);</span><br><span class="line">        <span class="comment">//    å°†å‘˜å·¥ä¿¡æ¯å…±äº«åˆ°è¯·æ±‚åŸŸä¸­</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;employee&quot;</span>, employee);</span><br><span class="line">        <span class="comment">//    è·³è½¬åˆ°employee_update</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;employee_update&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¥æ”¶å‰ç«¯å‘è¿‡æ¥çš„employee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> employee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/employee&quot;,method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateEmployee</span><span class="params">(Employee employee)</span>&#123;</span><br><span class="line">        employeeDao.save(employee);</span><br><span class="line">        <span class="comment">//ä¿å­˜ä¹‹åï¼Œå°±ç›´æ¥é‡å®šå‘åˆ°åˆ—è¡¨äº†</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteEmployee</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">        employeeDao.delete(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/employee&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="SpringMVCå¤„ç†ajaxè¯·æ±‚"><a href="#SpringMVCå¤„ç†ajaxè¯·æ±‚" class="headerlink" title="SpringMVCå¤„ç†ajaxè¯·æ±‚"></a>SpringMVCå¤„ç†ajaxè¯·æ±‚</h3><p>ä¹‹å‰å­¦è¿‡å—?å¿˜äº†,ç¿»ç¿»webçš„ç¬”è®°çœ‹çœ‹,è¿˜çœŸæ˜¯å­¦è¿‡,ç¬‘æ­»,å¿˜çš„ä¸€å¹²äºŒå‡€</p>
<blockquote>
<p>å¥½ä¹…æ²¡è§äº†</p>
</blockquote>
<h4 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h4><p>è¿™ä¸ªåˆæ˜¯ä»€ä¹ˆ?è¿™ä¸ªæ²¡å•¥å°è±¡å¥½åƒ</p>
<p>æ‰‹å¥½å¹²å•Š,æ‘¸è¿™ä¸ªæ–°é”®ç›˜æœ‰ä¸€ç§è®©äººèµ·é¸¡çš®ç–™ç˜©çš„æ„Ÿè§‰</p>
<p>æˆ‘ç”šè‡³éƒ½ä¸çŸ¥é“åœ¨å†™ä»€ä¹ˆ</p>
<p>@RequestBodyæ³¨è§£çš„ä½¿ç”¨&#x3D;&gt;å°†è¯·æ±‚ä½“ä¸­çš„å†…å®¹å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è¿›è¡Œç»‘å®š<br><strong>å°†jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°è½¬æ¢ä¸ºjavaå¯¹è±¡</strong><br>å¦‚ä½•ä½¿ç”¨?</p>
<ol>
<li>å¯¼å…¥jacksonçš„ä¾èµ–</li>
<li>åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨:<a href="mvc:annotation-driven">mvc:annotation-driven</a></li>
<li>åœ¨å¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®ç›´æ¥è®¾ç½®jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°è¦è½¬åŒ–çš„javaç±»å‹çš„å½¢å‚,ä½¿ç”¨@RequestBodyæ³¨è§£æ ‡è¯†å³å¯</li>
</ol>
<p>@ResponseBody,å°†æ‰€æ ‡è¯†çš„æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå“åº”æŠ¥æ–‡çš„å“åº”ä½“å“åº”åˆ°æµè§ˆå™¨<br>ä½¿ç”¨@ResponseBodyæ³¨è§£å“åº”æµè§ˆå™¨jsonæ ¼å¼çš„æ•°æ®</p>
<ol>
<li>å¯¼å…¥jacksonçš„ä¾èµ–</li>
<li>åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨:<a href="mvc:annotation-driven">mvc:annotation-driven</a></li>
<li>å°†éœ€è¦è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²çš„javaå¯¹è±¡ç›´æ¥ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼,ä½¿ç”¨@ResponseBodyæ³¨è§£æ ‡è¯†æ§åˆ¶å™¨æ–¹æ³•,å°±å¯ä»¥å°†javaå¯¹è±¡ç›´æ¥è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²,å¹¶å“åº”åˆ°æµè§ˆå™¨</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/ResponseBody/json&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">testResponseBody</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1001</span>, <span class="string">&quot;admin&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“æ¥è¯´,å°±å¬æ‡‚ä¸€ç‚¹:æœåŠ¡å™¨æƒ³ç»™æµè§ˆå™¨å‘é€ä¸€ä¸ªJavaç±»æ—¶,å¯ä»¥ä½¿ç”¨@ResponseBodyæ³¨è§£,è¿™ä¸ªæ³¨è§£å¯ä»¥å°†Javaå¯¹è±¡ç›´æ¥è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²è¿”å›åˆ°æµè§ˆå™¨,ä¸éœ€è¦å¤šä½™çš„æ“ä½œ,éå¸¸æ–¹ä¾¿</strong></p>
<blockquote>
<p>å¸¸ç”¨çš„Javaå¯¹è±¡è½¬åŒ–ä¸ºjsonçš„ç»“æœ<br>å®ä½“ç±»-&gt;jsonå¯¹è±¡<br>map-&gt;jsonå¯¹è±¡<br>list-&gt;jsonæ•°ç»„</p>
</blockquote>
<p>mapé›†åˆ:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/ResponseBody/json&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title function_">testResponseBody</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1001</span>, <span class="string">&quot;admin1&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1002</span>, <span class="string">&quot;admin2&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1003</span>, <span class="string">&quot;admin3&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;1001&quot;</span>,user1);</span><br><span class="line">    map.put(<span class="string">&quot;1002&quot;</span>,user2);</span><br><span class="line">    map.put(<span class="string">&quot;1003&quot;</span>,user3);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>listé›†åˆ:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/ResponseBody/json&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">testResponseBody</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1001</span>, <span class="string">&quot;admin1&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1002</span>, <span class="string">&quot;admin2&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">1003</span>, <span class="string">&quot;admin3&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    List&lt;User&gt; users = Arrays.asList(user1, user2, user3);</span><br><span class="line">    <span class="keyword">return</span> users;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®è¿™äº›ä¸œè¥¿ä¹Ÿæ²¡å•¥éš¾çš„å§</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ³¨è§£ä¹ŸæŒºæœ‰ç”¨çš„<br><strong>@RestControlleræ³¨è§£</strong><br>æ­¤æ³¨è§£æ˜¯ä¸€ä¸ªå¤åˆæ³¨è§£,æ ‡è¯†åœ¨æ§åˆ¶å™¨çš„ç±»ä¸Š,å°±ç›¸å½“äºä¸ºç±»æ·»åŠ äº†@Controlleræ³¨è§£,å¹¶ä¸”ä¸ºå…¶ä¸­çš„æ¯ä¸ªæ–¹æ³•æ·»åŠ äº†@ResponseBodyæ³¨è§£</p>
<h3 id="æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h3><p>æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½<br>ä¸Šæ¬¡å¬å®Œè¿™ä¸ª,ç°åœ¨å·²ç»å¿˜å¹²å‡€äº†<br>å¥½åƒæ²¡å­¦è¿‡ä¸€æ ·<br>è¿™ä¸ªå¥½åƒæŒºéº»çƒ¦çš„</p>
<h4 id="æ–‡ä»¶ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½</h4><p>ResponseEntityç”¨äºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹,è¯¥æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å“åº”åˆ°æµè§ˆå™¨çš„å“åº”æŠ¥æ–‡,ä½¿ç”¨ResponseEntityå®ç°ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½</p>
<p>è¦æ³¨æ„getRealPath()æ–¹æ³•,è¿™ä¸ªæ–¹æ³•å¦‚æœæ‹¬å·é‡Œä¸å†™å­—ç¬¦ä¸²,åˆ™è¿”å›çš„æ˜¯æ•´ä¸ªé¡¹ç›®åœ¨æœåŠ¡å™¨ä¸­çš„ä½ç½®,å¦‚æœåŠ ä¸Šäº†å­—ç¬¦ä¸²,åˆ™ä¼šå°†å­—ç¬¦ä¸²æ‹¼æ¥åˆ°ä½ç½®çš„åé¢<br>String realPath &#x3D; servletContext.getRealPath(â€œâ€);</p>
<p>ä¸‹è½½çš„ä»£ç ,åŸºæœ¬ç›¸ä¼¼,ä»¥åç”¨åˆ°ç›´æ¥å¤åˆ¶å°±è¡Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/down&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;<span class="type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//è·å–ServletContextå¯¹è±¡</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">        <span class="comment">//è·å–æœåŠ¡å™¨ä¸­æ–‡ä»¶çš„çœŸå®è·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">        realPath = realPath + File.separator + <span class="string">&quot;11.png&quot;</span>;</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¾“å…¥æµ</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">        <span class="comment">//åˆ›å»ºå­—èŠ‚æ•°ç»„        is.available()  è·å–è¾“å…¥æµæ‰€å¯¹åº”æ–‡ä»¶çš„å­—èŠ‚æ•°</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[is.available()];</span><br><span class="line">        <span class="comment">//å°†æµè¯»åˆ°å­—èŠ‚æ•°ç»„ä¸­</span></span><br><span class="line">        is.read(bytes);</span><br><span class="line">        <span class="comment">//åˆ›å»ºHttpHeaderså¯¹è±¡è®¾ç½®å“åº”å¤´ä¿¡æ¯</span></span><br><span class="line">        MultiValueMap&lt;String, String&gt; headers = <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®è¦ä¸‹è½½æ–¹å¼ä»¥åŠä¸‹è½½æ–‡ä»¶çš„åå­—</span></span><br><span class="line">        headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=11.png&quot;</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®å“åº”çŠ¶æ€ç </span></span><br><span class="line">        <span class="type">HttpStatus</span> <span class="variable">statusCode</span> <span class="operator">=</span> HttpStatus.OK;</span><br><span class="line">        <span class="comment">//åˆ›å»ºResponseEntityå¯¹è±¡</span></span><br><span class="line">        ResponseEntity&lt;<span class="type">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, statusCode);</span><br><span class="line">        <span class="comment">//å…³é—­è¾“å…¥æµ</span></span><br><span class="line">        is.close();</span><br><span class="line">        <span class="keyword">return</span> responseEntity;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


<h4 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h4><p>æ–‡ä»¶ä¸Šä¼ çš„æ¡ä»¶:</p>
<ol>
<li>formè¡¨å•çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpost</li>
<li>formè¡¨å•å¿…é¡»è®¾ç½®å±æ€§enctype&#x3D;â€multipart&#x2F;form-dataâ€</li>
</ol>
<p>å…ˆæ·»åŠ ä¾èµ–:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>æ§åˆ¶å™¨æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test/up&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testUp</span><span class="params">(MultipartFile photo, HttpSession session)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// MultipartFileçš„å¯¹è±¡åè¦å’ŒfileåŸŸçš„nameä¸€è‡´</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> photo.getOriginalFilename();</span><br><span class="line">    <span class="comment">// è·å–ServletContextå¯¹è±¡</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="comment">// è·å–å½“å‰å·¥ç¨‹ä¸‹photoç›®å½•çš„çœŸå®è·¯å¾„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">photoPath</span> <span class="operator">=</span> servletContext.getRealPath(<span class="string">&quot;photo&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ›å»ºphotoPathæ‰€å¯¹åº”çš„Fileå¯¹è±¡</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(photoPath);</span><br><span class="line">    <span class="comment">// åˆ¤æ–­fileæ‰€å¯¹åº”ç›®å½•æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">        file.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">finalPath</span> <span class="operator">=</span> photoPath + File.separator + fileName;</span><br><span class="line">    <span class="comment">//ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">    photo.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(finalPath));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„formè¡¨å•</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/test/up&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    å¤´åƒ<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;photo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸Šä¼ &quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥åŠé…ç½®æ–‡ä»¶ä¸­çš„bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>idä¸€å®šè¦ä¸ºmultipartResolver,ä¸ºcommonMultipartResolverå°±ä¼šæŠ¥é”™,ä¸ºå…¶ä»–çš„åŒæ ·ä¼šæŠ¥é”™</strong></p>
<h4 id="è§£å†³æ–‡ä»¶ä¸Šä¼ é‡åé—®é¢˜"><a href="#è§£å†³æ–‡ä»¶ä¸Šä¼ é‡åé—®é¢˜" class="headerlink" title="è§£å†³æ–‡ä»¶ä¸Šä¼ é‡åé—®é¢˜"></a>è§£å†³æ–‡ä»¶ä¸Šä¼ é‡åé—®é¢˜</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> photo.getOriginalFilename();</span><br><span class="line"><span class="type">String</span> <span class="variable">hz</span> <span class="operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line"><span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line"><span class="comment">//æ‹¼æ¥ä¸€ä¸ªæ–°çš„æ–‡ä»¶å</span></span><br><span class="line">fileName = uuid + hz;</span><br></pre></td></tr></table></figure>
<p>æ€è·¯å°±æ˜¯ä½¿ç”¨uuid,å…ˆç”¨fileName.lastIndexOf()æ–¹æ³•è·å–åŸå§‹æ–‡ä»¶åæœ€åçš„ç‚¹çš„ç´¢å¼•,ç„¶åä½¿ç”¨substring()æ–¹æ³•æ¥æˆªæ–­,è·å–åˆ°åç¼€,å†ç”Ÿæˆä¸€ä¸ªuuid,æœ€åæ‹¼æ¥</p>
<p>æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ä¹Ÿçœ‹å®Œäº†,ä¹Ÿæ²¡å•¥ä¸œè¥¿,ä¸»è¦å°±æ˜¯æ€è·¯</p>
<p>åé¢å°±æ˜¯æ‹¦æˆªå™¨äº†?<br>å¥½åƒå°±æ˜¯äº†è§£ä¸€ä¸‹</p>
<p>çœ‹åˆ°è¿™æ—¶å€™,åˆå¼€å§‹è¿·èŒ«äº†,ä¸åšé¡¹ç›®æ˜¯è¿›æ­¥ä¸äº†çš„<br>ä½†æ˜¯ä½ è¿™ä¸ªæƒ…å†µ,å¥½åƒä¹Ÿåšä¸äº†é¡¹ç›®<br>å°±ä½ è¿™ä¸ªæ°´å¹³,å•¥éƒ½ç”¨ä¸åˆ©ç´¢<br>å®³<br>ä¸ç®¡äº†,æ˜å¤©ç»§ç»­çœ‹å§,çœ‹å®Œå†è¯´<br>2022å¹´12æœˆ15æ—¥ 21ç‚¹20åˆ†</p>
<h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><p>äº†è§£</p>
<h4 id="é…ç½®æ‹¦æˆªå™¨"><a href="#é…ç½®æ‹¦æˆªå™¨" class="headerlink" title="é…ç½®æ‹¦æˆªå™¨"></a>é…ç½®æ‹¦æˆªå™¨</h4><p>å°±äº†è§£ä¸€ä¸‹å¦‚ä½•é…ç½®æ‹¦æˆªå™¨å§<br>ä¸€ä¸ªæ ‡ç­¾:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.interceptor.FirstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥é…ç½®FirstInterceptorè¿™ä¸ªç±»ä¸ºä¸€ä¸ªæ‹¦æˆªå™¨</p>
<p>å…¶ä»–çš„é…ç½®æ–¹å¼:ref,å¼•ç”¨å…¶ä»–çš„bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;firstInterceptor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.zzmr.interceptor.FirstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä½¿ç”¨æ³¨è§£åŠ æ‰«æçš„å½¢å¼<br>ç»™FirstInterceptorç±»åŠ ä¸Š@Componentæ³¨è§£<br>ç„¶åä¹Ÿæ˜¯ä½¿ç”¨refå°±å¯ä»¥äº†,idä¸ºç±»åé¦–å­—æ¯å°å†™</p>
<p>ç¬¬ä¸‰ç§é…ç½®æ–¹å¼,æ›´ç²¾ç¡®,å› ä¸ºä¸Šé¢ä¸¤ç§éƒ½æ˜¯é»˜è®¤å¯¹æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆª,è€Œä¸‹é¢è¿™ç§å¯ä»¥æ›´åŠ çš„ç²¾ç¡®,ä¹Ÿå¯ä»¥è¿›è¡Œæ’é™¤<br>è€Œ&#x2F;*åˆ™è¡¨ç¤ºä¸Šä¸‹æ–‡ç›®å½•ä¸‹çš„ä¸€å±‚ç›®å½•,æ„æ€å°±æ˜¯<a target="_blank" rel="noopener" href="http://localhost:8080/SpringMVC/first,%E5%8F%AA%E8%83%BD%E6%8B%A6%E6%88%AA%E4%B8%80%E5%B1%82%E7%9B%AE%E5%BD%95,%E5%A6%82%E6%9E%9C%E6%9C%89%E5%A4%9A%E5%B1%82%E5%88%99%E4%B8%8D%E8%BF%9B%E8%A1%8C%E6%8B%A6%E6%88%AA,//*/*%E5%B0%B1%E8%A1%A8%E7%A4%BA%E6%89%80%E6%9C%89%E7%9B%AE%E5%BD%95">http://localhost:8080/SpringMVC/first,åªèƒ½æ‹¦æˆªä¸€å±‚ç›®å½•,å¦‚æœæœ‰å¤šå±‚åˆ™ä¸è¿›è¡Œæ‹¦æˆª,/\*\*å°±è¡¨ç¤ºæ‰€æœ‰ç›®å½•</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--            æ’é™¤æ‰«æ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/abc&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>æ‹¦æˆªå™¨ä¸­çš„æ–¹æ³•:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * preHandleæ–¹æ³•ï¼Œåœ¨æ§åˆ¶å™¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œreturn falseï¼Œè¡¨ç¤ºæ‹¦æˆªï¼Œè¿”å›trueï¼Œè¡¨ç¤ºæ”¾è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;FirstInterceptor--&gt;preHandle&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;FirstInterceptor--&gt;postHandle&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;FirstInterceptor--&gt;afterCompletion&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h4 id="æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"><a href="#æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"></a>æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</h4><p>æ‹¦æˆªå™¨æ–¹æ³•çš„æ‰§è¡Œ:</p>
<ul>
<li>preHandle() åœ¨æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹å‰  è¿”å›å€¼è¡¨ç¤ºå¯¹æ§åˆ¶å™¨æ–¹æ³•çš„æ‹¦æˆª(false)æˆ–æ”¾è¡Œ(true)</li>
<li>postHandle() åœ¨æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹å</li>
<li>afterCompletion()  åœ¨æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åï¼Œä¸”æ¸²æŸ“è§†å›¾å®Œæ¯•ä¹‹åæ‰§è¡Œ</li>
</ul>
<p><strong>å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</strong><br>å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå’Œæ‹¦æˆªå™¨åœ¨SpringVCçš„<strong>é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®çš„é¡ºåºæœ‰å…³</strong><br>preHandle()  æŒ‰ç…§é…ç½®çš„é¡ºåºæ‰§è¡Œï¼Œè€ŒpostHandle() å’Œ afterCompletion() æŒ‰ç…§é…ç½®çš„é€†åºæ‰§è¡Œ<br>è‹¥æ‹¦æˆªå™¨ä¸­æœ‰æŸä¸ªæ‹¦æˆªå™¨çš„preHandle()è¿”å›å€¼false</p>
<p>preHandle()è¿”å›falseçš„æƒ…å†µ:</p>
<ul>
<li>è‹¥æ‹¦æˆªå…¶ä¸­æŸä¸ªæ‹¦æˆªå™¨çš„preHandle()è¿”å›äº†falseå’Œå®ƒä¹‹å‰çš„æ‹¦æˆªå™¨çš„preHandle()éƒ½ä¼šæ‰§è¡Œ</li>
<li>æ‰€æœ‰çš„æ‹¦æˆªå™¨çš„post()éƒ½ä¸æ‰§è¡Œ</li>
<li>æ‹¦æˆªå™¨çš„preHandle()è¿”å›falseä¹‹å‰çš„æ‹¦æˆªå™¨çš„afterCompletionä¼šæ‰§è¡Œ</li>
</ul>
<p>å®³,å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰,å°±çœ‹çœ‹è€Œå·²<br>ç”¨ç°æœ¨è½´ç”¨å¤šäº†,å‘ç°è¿™ä¸ªèŒ¶è½´ç”¨èµ·æ¥å¥½ç¡¬å•Šå“ˆå“ˆå“ˆå“ˆå“ˆè‰¹<br>æ‰‹è¢«æƒ¯åäº†éƒ½</p>
<h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><p>è¿™å—çœ‹ä¹‹å‰çš„ç¬”è®°å§,æ‡’å¾—å†™äº†<br>åæ­£å†…å®¹éƒ½å·®ä¸å¤š</p>
<h3 id="åŸºäºæ³¨è§£é…ç½®SpringMVC"><a href="#åŸºäºæ³¨è§£é…ç½®SpringMVC" class="headerlink" title="åŸºäºæ³¨è§£é…ç½®SpringMVC"></a>åŸºäºæ³¨è§£é…ç½®SpringMVC</h3><p>è¿™ä¸ªå¥½å¥½çœ‹çœ‹å§</p>
<p>åœ¨Servlet3.0ç¯å¢ƒä¸­,å®¹å™¨ä¼šåœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å®ç°javax.servlet.ServletContainerInitializeræ¥å£çš„ç±»,å¦‚æœæ‰¾åˆ°çš„è¯å°±ç”¨å®ƒæ¥é…ç½®Servletå®¹å™¨<br>Springæä¾›äº†è¿™ä¸ªæ¥å£çš„å®ç°,åä¸ºSpringServletContainerInitializer,è¿™ä¸ªç±»åè¿‡æ¥åˆä¼šæŸ¥æ‰¾å®ç°WebApplicationInitializerçš„ç±»å¹¶é…ç½®çš„ä»»åŠ¡äº¤ç»™å®ƒä»¬æ¥å®Œæˆ,Spring3.2å¼•å…¥äº†ä¸€ä¸ªä¾¿åˆ©çš„WebApplicationInitializeråŸºç¡€å®ç°,åä¸ºAbstractAnnotationConfigDispatcherServletInitializer,å½“æˆ‘ä»¬çš„ç±»æ‰©å±•äº†AbstractAnnotationConfigDispatcherServletInitializerå¹¶å°†å…¶éƒ¨ç½²åˆ°Servlet3.0å®¹å™¨çš„æ—¶å€™,å®¹å™¨ä¼šè‡ªåŠ¨å‘ç°å®ƒ,å¹¶ç”¨å®ƒæ¥é…ç½®Servletä¸Šä¸‹æ–‡</p>
<h4 id="åˆ›å»ºåˆå§‹åŒ–ç±»-ä»£æ›¿web-xml"><a href="#åˆ›å»ºåˆå§‹åŒ–ç±»-ä»£æ›¿web-xml" class="headerlink" title="åˆ›å»ºåˆå§‹åŒ–ç±»,ä»£æ›¿web.xml"></a>åˆ›å»ºåˆå§‹åŒ–ç±»,ä»£æ›¿web.xml</h4><blockquote>
<p>åœ¨Servlet3.0ç¯å¢ƒä¸­,å®¹å™¨ä¼šåœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å®ç°javax.servlet.ServletContainerInitializeræ¥å£çš„ç±»,å¦‚æœæ‰¾åˆ°çš„è¯å°±ç”¨å®ƒæ¥é…ç½®Servletå®¹å™¨<br>Springæä¾›äº†è¿™ä¸ªæ¥å£çš„å®ç°,åä¸ºSpringServletContainerInitializer,è¿™ä¸ªç±»åè¿‡æ¥åˆä¼šæŸ¥æ‰¾å®ç°WebApplicationInitializerçš„ç±»å¹¶é…ç½®çš„ä»»åŠ¡äº¤ç»™å®ƒä»¬æ¥å®Œæˆ,Spring3.2å¼•å…¥äº†ä¸€ä¸ªä¾¿åˆ©çš„WebApplicationInitializeråŸºç¡€å®ç°,åä¸ºAbstractAnnotationConfigDispatcherServletInitializer,å½“æˆ‘ä»¬çš„ç±»æ‰©å±•äº†AbstractAnnotationConfigDispatcherServletInitializerå¹¶å°†å…¶éƒ¨ç½²åˆ°Servlet3.0å®¹å™¨çš„æ—¶å€™,å®¹å™¨ä¼šè‡ªåŠ¨å‘ç°å®ƒ,å¹¶ç”¨å®ƒæ¥é…ç½®Servletä¸Šä¸‹æ–‡</p>
</blockquote>
<p>ä¸Šä»£ç å§æ³¨é‡Šéƒ½å†™å¥½äº†<br>ä»¥åå…¶å®æ˜¯ç”¨è¿™ç§æ–¹å¼æ¯”è¾ƒå¤šå§,å¦‚æœæ˜¯å¼€å‘é¡¹ç›®,è¿™ç§æ–¹å¼è¦æ¯”xmlé…ç½®å¿«,ä½†æ˜¯åæœŸå¯èƒ½ç»´æŠ¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦,ä½†æ˜¯å¼€å‘æ—¶è¿˜æ˜¯ç»å¸¸ç”¨æ³¨è§£çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CharacterEncodingFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.HiddenHttpMethodFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»£æ›¿web.xml</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebInit</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®ä¸€ä¸ªé…ç½®ç±»ï¼Œä»£æ›¿Springçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®ä¸€ä¸ªé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„url-pattern</span></span><br><span class="line"><span class="comment">     * å¤§æ‹¬å·é‡Œçš„å°±æ˜¯url-patternï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªï¼Œç”¨åŒå¼•å·éš”å¼€</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®å½“å‰çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºç¼–ç è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">characterEncodingFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        characterEncodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        characterEncodingFilter.setForceEncoding(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºå¤„ç†è¯·æ±‚æ–¹å¼çš„è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="type">HiddenHttpMethodFilter</span> <span class="variable">hiddenHttpMethodFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;characterEncodingFilter, hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºWebConfigæ¥ä»£æ›¿SpringMVCé…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºWebConfigæ¥ä»£æ›¿SpringMVCé…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºWebConfigæ¥ä»£æ›¿SpringMVCé…ç½®æ–‡ä»¶"></a>åˆ›å»ºWebConfigæ¥ä»£æ›¿SpringMVCé…ç½®æ–‡ä»¶</h4><p>è¿˜æ˜¯æŒºå¤šçš„,ä¸è¿‡é‚£ä¸ªè§†å›¾è§£æå™¨å¯ä»¥ç›´æ¥å¤åˆ¶,éƒ½æ˜¯ç±»ä¼¼çš„å†…å®¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.zzmr.interceptor.FirstInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.ContextLoader;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.WebApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.commons.CommonsMultipartResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerExceptionResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ViewResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.handler.SimpleMappingExceptionResolver;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.spring5.SpringTemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.spring5.view.ThymeleafViewResolver;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ITemplateResolver;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * å…ˆè¦çŸ¥é“SpringMVCçš„é…ç½®æ–‡ä»¶éƒ½é…ç½®äº†å“ªäº›ä¸œè¥¿ï¼š</span></span><br><span class="line"><span class="comment"> * æ‰«æç»„ä»¶ï¼Œè§†å›¾è§£æå™¨ï¼Œé»˜è®¤çš„Servletï¼Œmvcçš„æ³¨è§£é©±åŠ¨ï¼Œè§†å›¾æ§åˆ¶å™¨ï¼Œæ–‡ä»¶ä¸Šä¼ è§£æå™¨ï¼Œæ‹¦æˆªå™¨ï¼Œå¼‚å¸¸è§£æå™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//æ‰«æç»„ä»¶çš„æ³¨è§£</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.zzmr.controller&quot;)</span></span><br><span class="line"><span class="comment">//mvcçš„æ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> configurer</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®è§†å›¾æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Bean</span> æ³¨è§£å¯ä»¥å°†æ ‡è¯†çš„æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºbeanè¿›è¡Œç®¡ç†</span></span><br><span class="line"><span class="comment">     * beançš„idä¸ºæ–¹æ³•çš„æ–¹æ³•å</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CommonsMultipartResolver <span class="title function_">multipartResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">     * ç›´æ¥åœ¨addInterceptoråé¢ç»§ç»­ç‚¹ï¼Œç„¶åå¯ä»¥è®¾ç½®æ’é™¤çš„è·¯å¾„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="type">FirstInterceptor</span> <span class="variable">firstInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FirstInterceptor</span>();</span><br><span class="line">        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®å¼‚å¸¸è§£æå™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resolvers initially an empty list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureHandlerExceptionResolvers</span><span class="params">(List&lt;HandlerExceptionResolver&gt; resolvers)</span> &#123;</span><br><span class="line">        <span class="type">SimpleMappingExceptionResolver</span> <span class="variable">simpleMappingExceptionResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMappingExceptionResolver</span>();</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªä¸ºå¼‚å¸¸ç±»å‹ï¼Œç¬¬äºŒä¸ªä¸ºè·³è½¬åˆ°é€»è¾‘è§†å›¾</span></span><br><span class="line">        properties.setProperty(<span class="string">&quot;java.lang.ArithmeticException&quot;</span>, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">        simpleMappingExceptionResolver.setExceptionMappings(properties);</span><br><span class="line">        simpleMappingExceptionResolver.setExceptionAttribute(<span class="string">&quot;ex&quot;</span>);</span><br><span class="line">        resolvers.add(simpleMappingExceptionResolver);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿˜æœ‰è§†å›¾è§£æå™¨æ²¡æœ‰é…ç½®,ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®ç”Ÿæˆæ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ITemplateResolver <span class="title function_">templateResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">WebApplicationContext</span> <span class="variable">webApplicationContext</span> <span class="operator">=</span> ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line"><span class="comment">// ServletContextTemplateResolveréœ€è¦ä¸€ä¸ªServletContextä½œä¸ºæ„é€ å‚æ•°ï¼Œå¯é€šè¿‡WebApplicationContext çš„æ–¹æ³•è·å¾—</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(<span class="string">&quot;/WEB-INF/templates/&quot;</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="keyword">return</span> templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆæ¨¡æ¿å¼•æ“å¹¶ä¸ºæ¨¡æ¿å¼•æ“æ³¨å…¥æ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SpringTemplateEngine <span class="title function_">templateEngine</span><span class="params">(ITemplateResolver templateResolver)</span> &#123;</span><br><span class="line">        <span class="type">SpringTemplateEngine</span> <span class="variable">templateEngine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringTemplateEngine</span>();</span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line">        <span class="keyword">return</span> templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆè§†å›¾è§£æå™¨å¹¶æœªè§£æå™¨æ³¨å…¥æ¨¡æ¿å¼•æ“</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">(SpringTemplateEngine templateEngine)</span> &#123;</span><br><span class="line">        <span class="type">ThymeleafViewResolver</span> <span class="variable">viewResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThymeleafViewResolver</span>();</span><br><span class="line">        viewResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        viewResolver.setTemplateEngine(templateEngine);</span><br><span class="line">        <span class="keyword">return</span> viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å°±é…ç½®å®Œäº†,ä½†æ˜¯Springçš„é…ç½®æ–‡ä»¶æ²¡å†™<br>å“ˆå“ˆå“ˆ<br>æ˜å¤©è§</p>
<h4 id="SpringConfigä»£æ›¿Springçš„é…ç½®æ–‡ä»¶"><a href="#SpringConfigä»£æ›¿Springçš„é…ç½®æ–‡ä»¶" class="headerlink" title="SpringConfigä»£æ›¿Springçš„é…ç½®æ–‡ä»¶"></a>SpringConfigä»£æ›¿Springçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»£æ›¿Springçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†ç±»æ ‡è¯†ä¸ºé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ²¡é”™é‡Œé¢å•¥éƒ½æœ‰æ²¡æœ‰,ç”¨åˆ°çš„æ—¶å€™å†é…ç½®å§</p>
<h3 id="SpringMVCæ‰§è¡Œæµç¨‹"><a href="#SpringMVCæ‰§è¡Œæµç¨‹" class="headerlink" title="SpringMVCæ‰§è¡Œæµç¨‹"></a>SpringMVCæ‰§è¡Œæµç¨‹</h3><p>çœ‹ä¹‹å‰çš„å§</p>
<h2 id="SSMæ•´åˆ"><a href="#SSMæ•´åˆ" class="headerlink" title="SSMæ•´åˆ"></a>SSMæ•´åˆ</h2><p>åˆåˆ°äº†æœ€åå…³å¤´<br>è¿™æ¬¡å¥½å¥½çœ‹çœ‹å§,çœ‹å®Œå°±å¼€å§‹åšé¡¹ç›®&#x2F;ä¸‹ä¸€é˜¶æ®µ</p>
<h3 id="ContextLoaderListener"><a href="#ContextLoaderListener" class="headerlink" title="ContextLoaderListener"></a>ContextLoaderListener</h3><p>ç›‘å¬å™¨,Springæä¾›äº†ç›‘å¬å™¨ContextLoaderListener,å®ç°ServletContextListeneræ¥å£,å¯ç›‘å¬ServletContextçš„çŠ¶æ€,åœ¨webæœåŠ¡å™¨å¯åŠ¨,è¯»å–Springçš„é…ç½®æ–‡ä»¶,åˆ›å»ºSpringçš„IOCå®¹å™¨,webåº”ç”¨ä¸­å¿…é¡»åœ¨web.xmlä¸­é…ç½®</p>
<blockquote>
<p>ä»€ä¹ˆæ„æ€å‘¢,å°±æ˜¯è®¾ç½®ä¸€ä¸ªç›‘å¬å™¨,è‹¥æœåŠ¡å™¨ä¸€å¯åŠ¨,å°±å»å¯»æ‰¾Springçš„é…ç½®æ–‡ä»¶,åˆ›å»ºSpringçš„IOCå®¹å™¨,ä»¥ä¾¿äºSpringMVCçš„Controllerå±‚èƒ½å¤Ÿå®ç°è‡ªåŠ¨è£…é…service,ç„¶åè¦å®ç°è¿™ä¸ªåŠŸèƒ½,è¦åœ¨web.xmlä¸­é…ç½®</p>
</blockquote>
<h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><p><strong>ä»¥åç”¨åˆ°çš„è¯,å°±ç›´æ¥æ¥è¿™é‡Œå¤åˆ¶äº†</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzmr.ssm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_aio<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--   é…ç½®çš„è‡ªå®šä¹‰å±æ€§ï¼Œç”¨æ¥è®¾ç½®Springçš„ç‰ˆæœ¬--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--springmvc--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--        è·Ÿäº‹åŠ¡ç›¸å…³  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        Springæ•´åˆjunit--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Mybatisæ ¸å¿ƒ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--mybatiså’Œspringçš„æ•´åˆåŒ…--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- junitæµ‹è¯• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- log4jæ—¥å¿— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h4 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h4><p>æ•°æ®åº“æ–‡ä»¶</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_emp` (</span><br><span class="line">`emp_id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">`emp_name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`age` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`gender` <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">`email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`emp_id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>

<h4 id="web-xml-WebInit-java"><a href="#web-xml-WebInit-java" class="headerlink" title="web.xml(WebInit.java)"></a>web.xml(WebInit.java)</h4><p>è€å¸ˆä½¿ç”¨xmlé…ç½®çš„,æˆ‘å€’æ˜¯æƒ³ç”¨æ³¨è§£è¯•ä¸€ä¸‹<br>è¯´è¯•å°±è¯•<br>åæ­£ä¹‹å‰çš„ç¬”è®°æœ‰åŸºäºxmlé…ç½®çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.ContextLoaderListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.CharacterEncodingFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.filter.HiddenHttpMethodFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.Filter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebInit</span> <span class="keyword">extends</span> <span class="title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä»£æ›¿Springçš„é…ç½®ç±»</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™ä¸ªæ–¹æ³•è¿”å›</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„url-pattern</span></span><br><span class="line"><span class="comment">     * å¤§æ‹¬å·é‡Œçš„å°±æ˜¯url-patternï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªï¼Œç”¨åŒå¼•å·éš”å¼€</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ›å»ºè¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     * 1. ç¼–ç è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     * 2. è¯·æ±‚æ–¹å¼è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºç¼–ç è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="type">CharacterEncodingFilter</span> <span class="variable">characterEncodingFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">        characterEncodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        characterEncodingFilter.setForceEncoding(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//åˆ›å»ºè¯·æ±‚æ–¹å¼è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="type">HiddenHttpMethodFilter</span> <span class="variable">hiddenHttpMethodFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HiddenHttpMethodFilter</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;characterEncodingFilter, hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®ç›‘å¬å™¨ï¼šåœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åŠ è½½Springçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">registerContextLoaderListener</span><span class="params">(ServletContext servletContext)</span> &#123;</span><br><span class="line">        servletContext.addListener(ContextLoaderListener.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SpringMVCçš„é…ç½®ç±»-WebConfig"><a href="#SpringMVCçš„é…ç½®ç±»-WebConfig" class="headerlink" title="SpringMVCçš„é…ç½®ç±»-WebConfig"></a>SpringMVCçš„é…ç½®ç±»-WebConfig</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzmr.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.ContextLoader;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.WebApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.commons.CommonsMultipartResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ViewResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.spring5.SpringTemplateEngine;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.spring5.view.ThymeleafViewResolver;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templatemode.TemplateMode;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ITemplateResolver;</span><br><span class="line"><span class="keyword">import</span> org.thymeleaf.templateresolver.ServletContextTemplateResolver;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * æ‰«æç»„ä»¶ï¼š<span class="doctag">@ComponentScan</span>(&quot;&quot;),æ‰«ææ§åˆ¶å±‚</span></span><br><span class="line"><span class="comment"> * è§†å›¾è§£æå™¨</span></span><br><span class="line"><span class="comment"> * é…ç½®é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº:configureDefaultServletHandling</span></span><br><span class="line"><span class="comment"> * å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨  <span class="doctag">@EnableWebMvc</span></span></span><br><span class="line"><span class="comment"> * é…ç½®è§†å›¾æ§åˆ¶å™¨  addViewControllers</span></span><br><span class="line"><span class="comment"> * é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨  CommonsMultipartResolver</span></span><br><span class="line"><span class="comment"> * æ‹¦æˆªå™¨å’Œå¼‚å¸¸å¤„ç†å™¨æ²¡æœ‰é…ç½®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.zzmr.controller&quot;)</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸‹é¢è¿™ä¸‰ä¸ªæ–¹æ³•é…ç½®è§†å›¾è§£æå™¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//é…ç½®ç”Ÿæˆæ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ITemplateResolver <span class="title function_">templateResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">WebApplicationContext</span> <span class="variable">webApplicationContext</span> <span class="operator">=</span> ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line"><span class="comment">// ServletContextTemplateResolveréœ€è¦ä¸€ä¸ªServletContextä½œä¸ºæ„é€ å‚æ•°ï¼Œå¯é€šè¿‡WebApplicationContext çš„æ–¹æ³•è·å¾—</span></span><br><span class="line">        <span class="type">ServletContextTemplateResolver</span> <span class="variable">templateResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextTemplateResolver</span>(webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(<span class="string">&quot;/WEB-INF/templates/&quot;</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="keyword">return</span> templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆæ¨¡æ¿å¼•æ“å¹¶ä¸ºæ¨¡æ¿å¼•æ“æ³¨å…¥æ¨¡æ¿è§£æå™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SpringTemplateEngine <span class="title function_">templateEngine</span><span class="params">(ITemplateResolver templateResolver)</span> &#123;</span><br><span class="line">        <span class="type">SpringTemplateEngine</span> <span class="variable">templateEngine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringTemplateEngine</span>();</span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line">        <span class="keyword">return</span> templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆè§†å›¾è§£æå™¨å¹¶æœªè§£æå™¨æ³¨å…¥æ¨¡æ¿å¼•æ“</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">(SpringTemplateEngine templateEngine)</span> &#123;</span><br><span class="line">        <span class="type">ThymeleafViewResolver</span> <span class="variable">viewResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThymeleafViewResolver</span>();</span><br><span class="line">        viewResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        viewResolver.setTemplateEngine(templateEngine);</span><br><span class="line">        <span class="keyword">return</span> viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> &#123;</span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®è§†å›¾æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span></span><br><span class="line"><span class="comment">     * è¦åŠ <span class="doctag">@Bean</span>æ³¨è§£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CommonsMultipartResolver <span class="title function_">multipartResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CommonsMultipartResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‹¦æˆªå™¨ï¼Œå› ä¸ºæš‚æ—¶ç”¨ä¸åˆ°ï¼Œå°±ä¸é…ç½®äº†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¼‚å¸¸å¤„ç†å™¨ï¼Œæ²¡æœ‰ï¼Œä¹Ÿä¸é…ç½®äº†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Springçš„é…ç½®ç±»-SpringConfig"><a href="#Springçš„é…ç½®ç±»-SpringConfig" class="headerlink" title="Springçš„é…ç½®ç±»-SpringConfig"></a>Springçš„é…ç½®ç±»-SpringConfig</h4><p>é¦–å…ˆä¸€ä¸ªå¾ˆé‡è¦çš„çŸ¥è¯†ç‚¹,å°±æ˜¯@ComponentScanæ³¨è§£çš„ä½¿ç”¨,å› ä¸ºæˆ‘ä»¬è¦å¯¹æŸäº›ç±»è¿›è¡Œæ’é™¤,Springå¯¹é™¤æ§åˆ¶å±‚ä¹‹å¤–çš„æ‰€æœ‰è¿›è¡Œæ‰«æ,æ‰€ä»¥åº”è¯¥æ’é™¤æ§åˆ¶å±‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(</span></span><br><span class="line"><span class="meta">        value = &quot;com.zzmr&quot;,</span></span><br><span class="line"><span class="meta">        excludeFilters = &#123;@ComponentScan.Filter(type = FilterType.ANNOTATION,value = Controller.class)&#125;)</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå°±æ˜¯æ’é™¤çš„ç”¨æ³•,FilterType.ANNOTATIONå°±æ˜¯ç”¨æ³¨è§£æ¥æ’é™¤,åé¢çš„valueå°±æ˜¯æ³¨è§£çš„class</p>
<p>å“ˆå“ˆå“ˆå“ˆå‡ºç°é—®é¢˜äº†å§,é…ç½®å¥½æ‰«æç»„ä»¶ä¹‹å,å‰©ä¸‹çš„å°±ä¸ä¼šé…ç½®äº†,ä»€ä¹ˆæ•°æ®æºå•Š,æ•´åˆMyBatiså•Š,éƒ½ä¸ä¼šé…ç½®</p>
<p>æ‰€ä»¥å•Š,æˆ‘è¿˜æ˜¯å»çœ‹ä¹‹å‰çš„xmläº†<br>å®³<br>é«˜ä¼°è‡ªå·±äº†</p>
<h3 id="æ–­æ¡£é‡å¼€"><a href="#æ–­æ¡£é‡å¼€" class="headerlink" title="æ–­æ¡£é‡å¼€"></a>æ–­æ¡£é‡å¼€</h3><h4 id="pom-xml-1"><a href="#pom-xml-1" class="headerlink" title="pom.xml"></a>pom.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzmr.ssm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssm_last<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.3.1<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--springmvc--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Mybatisæ ¸å¿ƒ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--mybatiså’Œspringçš„æ•´åˆåŒ…--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- junitæµ‹è¯• --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- log4jæ—¥å¿— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ—¥å¿— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ServletAPI --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®Springçš„ç¼–ç æ§åˆ¶å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®å¤„ç†è¯·æ±‚æ–¹å¼çš„è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è®¾ç½®SpringMVCé…ç½®æ–‡ä»¶è‡ªå®šä¹‰çš„ä½ç½®å’Œåç§°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å°†DispatcherServletåˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®Springçš„ç›‘å¬å™¨   åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åŠ è½½Springçš„é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    è®¾ç½®Springé…ç½®æ–‡ä»¶è‡ªå®šä¹‰çš„ä½ç½®å’Œåç§°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="SpringMVCçš„é…ç½®æ–‡ä»¶"><a href="#SpringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="SpringMVCçš„é…ç½®æ–‡ä»¶"></a>SpringMVCçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ‰«ææ§åˆ¶å±‚ç»„ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.ssm_last.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®è§†å›¾è§£æå™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!--                        index--&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    é…ç½®é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®è§†å›¾æ§åˆ¶å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;index&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--  é…ç½®å¼‚å¸¸è§£æå¤„ç†å™¨  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®Springçš„é…ç½®æ–‡ä»¶"><a href="#é…ç½®Springçš„é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®Springçš„é…ç½®æ–‡ä»¶"></a>é…ç½®Springçš„é…ç½®æ–‡ä»¶</h4><p>æ•´åˆäº†MyBatis</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ‰«æç»„ä»¶-é™¤äº†æ§åˆ¶å±‚--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.zzmr.ssm_last&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å¼•å…¥jdbc.properties--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">context:property-placeholder</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®æ•°æ®æº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dateSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    ä¸‹é¢çš„æ˜¯æ•´åˆMyBatisçš„é…ç½®--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dateSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        å°†ä½¿ç”¨æ³¨è§£@Transactionæ ‡è¯†çš„æ–¹æ³•æˆ–ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•é€šè¿‡äº‹åŠ¡è¿›è¡Œäº‹åŠ¡ç®¡ç†</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    å¼€å¯äº‹åŠ¡çš„æ³¨è§£é©±åŠ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®SqlSessionFactoryBean  å¯ä»¥ç›´æ¥åœ¨Springçš„IOCä¸­è·å–SqlSessionFactoryå¯¹è±¡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è®¾ç½®MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„è·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è®¾ç½®æ•°æ®æº--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dateSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è®¾ç½® ç±»å‹åˆ«åæ‰€å¯¹åº”çš„åŒ…--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.zzmr.ssm_last.pojo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    è®¾ç½®æ˜ å°„æ–‡ä»¶çš„è·¯å¾„ï¼Œåªæœ‰æ˜ å°„æ–‡ä»¶çš„åŒ…å’Œmapperæ¥å£çš„åŒ…ä¸ä¸€è‡´æ—¶éœ€è¦è®¾ç½®    --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mappers/*.xml&quot;&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        æ’ä»¶--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;property name=&quot;plugins&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;array&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;bean class=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;&lt;/bean&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;/array&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/property&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®mapperæ¥å£çš„æ‰«æï¼Œå°†æŒ‡å®šåŒ…ä¸‹æ‰€æœ‰çš„mapperæ¥å£ï¼Œé€šè¿‡</span></span><br><span class="line"><span class="comment">SqlSessionåˆ›å»ºä»£ç†å®ç°ç±»å¯¹è±¡ï¼Œå¹¶å°†è¿™äº›å¯¹è±¡äº¤ç»™iocå®¹å™¨ç®¡ç†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.zzmr.ssm_last.mapper&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="MyBatisçš„é…ç½®æ–‡ä»¶"><a href="#MyBatisçš„é…ç½®æ–‡ä»¶" class="headerlink" title="MyBatisçš„é…ç½®æ–‡ä»¶"></a>MyBatisçš„é…ç½®æ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span> <span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> <span class="comment">&lt;!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    MyBtatis æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»è¦æŒ‰ç…§æŒ‡å®šçš„é¡ºåºé…ç½®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    The content of element type &quot;configuration&quot; must match</span></span><br><span class="line"><span class="comment">    &quot;(properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,</span></span><br><span class="line"><span class="comment">    objectWrapperFactory?,reflectorFactory?,plugins?,environments?,databaseIdProvider?,mappers?)&quot;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    &amp;lt;!&amp;ndash;    å¼•å…¥propertiesæ–‡ä»¶ï¼Œæ­¤åå°±å¯åœ¨å½“å‰æ–‡ä»¶ä¸­ä½¿ç”¨ æ¥è®¿é—® value &amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;properties resource=&quot;jdbc.properties&quot;/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        å°†ä¸‹åˆ’çº¿æ˜ å°„ä¸ºé©¼å³°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    è®¾ç½®ç±»å‹åˆ«åï¼šå³ä¸ºæŸä¸ªå…·ä½“çš„ç±»å‹ï¼Œè®¾ç½®ä¸€ä¸ªåˆ«å</span></span><br><span class="line"><span class="comment">åœ¨MyBatisçš„èŒƒå›´ä¸­å°±å¯ä»¥ä½¿ç”¨åˆ«åè¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„ç±»å‹</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;typeAliases&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;package name=&quot;&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/typeAliases&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    &lt;environments default=&quot;development&quot;&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        &lt;environment id=&quot;development&quot;&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--            &lt;transactionManager type=&quot;JDBC&quot;/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--            &lt;dataSource type=&quot;POOLED&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;driver&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;url&quot; value=&quot;$&#123;jdbc.url&#125;&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;username&quot; value=&quot;$&#123;jdbc.username&#125;&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                &lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            &lt;/dataSource&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;/environment&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    &lt;/environments&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    å¼•å…¥mybatisçš„æ˜ å°„æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;mappers&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;package name=&quot;&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/mappers&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®åˆ†é¡µæ’ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.pagehelper.PageInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å·²ç»è¢«æç©ºäº†,å°±å‰©ä¸‹ä¸¤ä¸ª,å…¶å®è¿™ä¸¤ä¸ªä¹Ÿå¯ä»¥ç”±Springæ¥é…ç½®<br>ä½†æ˜¯æ•´åˆçš„ç›®çš„æ˜¯å°†é…ç½®æ–‡ä»¶å†™åˆ°ä¸€èµ·å—?<br>å¹¶ä¸æ˜¯,æ•´åˆçš„ç›®çš„æ˜¯è®©Springçš„IOCå®¹å™¨å¯ä»¥ç›´æ¥è·å–åˆ°mapperæ¥å£çš„ä»£ç†å®ç°ç±»å¯¹è±¡(MapperScannerConfigurer),ç„¶ååœ¨serviceå°±å¯ä»¥ç›´æ¥è‡ªåŠ¨è£…é…mapperæ¥å£çš„ä»£ç†å®ç°ç±»å¯¹è±¡äº†,éå¸¸æ–¹ä¾¿</p>
<h4 id="å…¶ä»–ä»£ç "><a href="#å…¶ä»–ä»£ç " class="headerlink" title="å…¶ä»–ä»£ç "></a>å…¶ä»–ä»£ç </h4><p>é‚£ä¹Ÿæ²¡å¿…è¦å†™äº†,è‡ªå·±æ˜ç™½å°±è¡Œäº†</p>
<p>å¥½äº†,æˆ‘æŠŠè¿™ä¸ªé¡¹ç›®çš„å…¶ä½™åŠŸèƒ½å®ç°äº†:æ·»åŠ ,åˆ é™¤,ä¿®æ”¹,æµ‹è¯•ä¹Ÿæ²¡æœ‰é—®é¢˜,ä½†æ˜¯è¿™ä¸ªé¡¹ç›®å¤ªç®€å•äº†å•Š<br>æ²¡ä»€ä¹ˆå†…å®¹,ä»£ç å…¨åœ¨ssm_lasté‡Œé¢äº†,tomcatéƒ¨ç½²åœ¨äº†SSM_XMLä¸­,å•¥æ—¶å€™æƒ³çœ‹äº†å°±å›å»çœ‹çœ‹,é‡Œé¢çš„å†…å®¹éº»é›€è™½å°äº”è„ä¿±å…¨.<br>æ•´ä¸ªé¡¹ç›®ä¹Ÿä¸Šä¼ åˆ°githubäº†ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/jimmy66886/ssm">ç‚¹è¿™è·³è½¬</a></p>
<p>ä¸è¿‡è¿™ä¹Ÿç®—æ˜¯æˆ‘çš„SSMçš„åŸºç¡€å·²ç»å­¦å®Œäº†,ä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰åšé¡¹ç›®çš„èƒ½åŠ›,å‰ç«¯å¤ªè–„å¼±äº†,å•¥éƒ½ä¸ä¼š,æ‰€ä»¥ç°åœ¨å­¦ä»€ä¹ˆ?<br>è·¯åœ¨ä½•æ–¹?</p>
<p>å¾€åçš„æ—¥å­è¿˜è¦åŠ æ²¹å•Š<br><strong>å¤ªé˜³ç…§å¸¸å‡èµ·,æ—¥å­è¿˜è¦ç»§ç»­</strong></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="å¤´åƒ"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/09/02/6rUxGoewvp5hNlB.jpg" title="å¤´åƒ" alt="å¤´åƒ"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/09/02/6rUxGoewvp5hNlB.jpg" title="å¤´åƒ" alt="å¤´åƒ"></a><div class="post-copyright__author_name">å®šè¥¿</div><div class="post-copyright__author_desc">æ¡ƒä¹‹å¤­å¤­ï¼Œç¼ç¼å…¶å</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="https://jimmy66886.github.io/posts/919c1073.html">åŸåˆ›</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://jimmy66886.github.io/posts/919c1073.html')">é‡å­¦SSM</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="èµèµä½œè€…"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>æ‰“èµä½œè€…</div><div class="reward-main"><div class="reward-all"><span class="reward-title">æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡</span><ul class="reward-group"><li class="reward-item"><a href="https://img01.zzmr.buzz/img/chatpay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/chatpay.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://img01.zzmr.buzz/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/alipay.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">èµèµè€…åå•</div><div class="reward-dec">å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://jimmy66886.github.io/posts/919c1073.html"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=é‡å­¦SSM&amp;url=https://jimmy66886.github.io/posts/919c1073.html&amp;pic=https://img01.zzmr.buzz/img/20221017163344.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://jimmy66886.github.io" target="_blank">ZZMR</a>ï¼</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/SSM/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>SSM<span class="tagsPageCount">3</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/09/02/6rUxGoewvp5hNlB.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/e56378e3.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/DSC04225.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">22-11-12-æ¸¸è®°</div></div></a></div><div class="next-post pull-right"><a href="/posts/622a5765.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/DSC09231768.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">2022å¹´åº¦æ€»ç»“</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>çŒœä½ å–œæ¬¢</span></div><div class="relatedPosts-list"><div><a href="/posts/e3b8edb4.html" title="ResultMapå…³è”æ˜ å°„"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/æ‹¾å…‰_è´ªé£Ÿé¬¼_6259.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-05-26</div><div class="title">ResultMapå…³è”æ˜ å°„</div></div></a></div><div><a href="/posts/8407a41.html" title="SSM"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://gcore.jsdelivr.net/gh/jimmy66886/picgo@main/img/20221017163344.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-10-17</div><div class="title">SSM</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> è¯„è®º</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">åŒ¿åè¯„è®º</a><a href="/privacy" style="margin-left: 4px">éšç§æ”¿ç­–</a></div><div class="comment-tips" id="comment-tips"><span>âœ… ä½ æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¯„è®ºä»¥è·å–æœ€ä½³å±•ç¤ºæ•ˆæœ</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar" title="ç‚¹å‡»å±•å¼€"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/09/02/6rUxGoewvp5hNlB.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">éƒ½æ˜¯å­¦ä¹ ç¬”è®°å’Œç”Ÿæ´»çäº‹<b style="color:#fff"></b><b style="color:#fff">è¡Œä¹‹æ‰€å‘,å³å¿ƒä¹‹æ‰€å‘</b><b style="color:#fff"></b></div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);"><b style="color:#fff"></b><b style="color:#fff"></b></div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">å®šè¥¿</h1><div class="author-info__desc">æ¡ƒä¹‹å¤­å¤­ï¼Œç¼ç¼å…¶å</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/jimmy66886/" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SSM%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-number">1.</span> <span class="toc-text">SSMçš„æ€è€ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis"><span class="toc-number">1.1.</span> <span class="toc-text">MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SqlSessionUtil%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">SqlSessionUtilå·¥å…·ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.2.</span> <span class="toc-text">å…¶ä»–é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0"><span class="toc-number">1.1.3.</span> <span class="toc-text">MyBatisè·å–å‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">æ³¨æ„é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E7%A7%8D%E6%9F%A5%E8%AF%A2%E7%9B%B8%E5%85%B3"><span class="toc-number">1.1.4.</span> <span class="toc-text">å„ç§æŸ¥è¯¢ç›¸å…³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.5.</span> <span class="toc-text">ç‰¹æ®ŠæŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.5.1.</span> <span class="toc-text">æ¨¡ç³ŠæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4"><span class="toc-number">1.1.5.2.</span> <span class="toc-text">æ‰¹é‡åˆ é™¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AE%E8%A1%A8%E5%90%8D"><span class="toc-number">1.1.5.3.</span> <span class="toc-text">åŠ¨æ€è®¾ç½®è¡¨å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%87%AA%E5%A2%9E%E7%9A%84%E4%B8%BB%E9%94%AE"><span class="toc-number">1.1.5.4.</span> <span class="toc-text">è·å–è‡ªå¢çš„ä¸»é”®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84resultMap"><span class="toc-number">1.1.6.</span> <span class="toc-text">è‡ªå®šä¹‰æ˜ å°„resultMap</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E4%B8%80%E7%9A%84%E6%98%A0%E5%B0%84%E6%83%85%E5%86%B5"><span class="toc-number">1.1.6.1.</span> <span class="toc-text">å¤šå¯¹ä¸€çš„æ˜ å°„æƒ…å†µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E6%98%A0%E5%B0%84%E6%83%85%E5%86%B5"><span class="toc-number">1.1.6.2.</span> <span class="toc-text">ä¸€å¯¹å¤šçš„æ˜ å°„æƒ…å†µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81Sql"><span class="toc-number">1.1.7.</span> <span class="toc-text">åŠ¨æ€Sql</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8where%E6%A0%87%E7%AD%BE"><span class="toc-number">1.1.7.1.</span> <span class="toc-text">ä½¿ç”¨whereæ ‡ç­¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#trim%E6%A0%87%E7%AD%BE"><span class="toc-number">1.1.7.2.</span> <span class="toc-text">trimæ ‡ç­¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#choose-when-otherwise%E6%A0%87%E7%AD%BE"><span class="toc-number">1.1.7.3.</span> <span class="toc-text">choose,when,otherwiseæ ‡ç­¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#forEach%E6%A0%87%E7%AD%BE"><span class="toc-number">1.1.7.4.</span> <span class="toc-text">forEachæ ‡ç­¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql%E6%A0%87%E7%AD%BE"><span class="toc-number">1.1.7.5.</span> <span class="toc-text">sqlæ ‡ç­¾</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98"><span class="toc-number">1.1.8.</span> <span class="toc-text">ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.1.8.1.</span> <span class="toc-text">ä¸€çº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.1.8.2.</span> <span class="toc-text">äºŒçº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E5%90%88%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BC%93%E5%AD%98"><span class="toc-number">1.1.8.3.</span> <span class="toc-text">æ•´åˆç¬¬ä¸‰æ–¹ç¼“å­˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.1.9.</span> <span class="toc-text">é€†å‘å·¥ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B2%BE%E7%AE%80%E7%89%88"><span class="toc-number">1.1.9.1.</span> <span class="toc-text">ç²¾ç®€ç‰ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%89%88"><span class="toc-number">1.1.9.2.</span> <span class="toc-text">å®Œæ•´ç‰ˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.1.10.</span> <span class="toc-text">åˆ†é¡µæ’ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.1.10.1.</span> <span class="toc-text">é…ç½®åˆ†é¡µæ’ä»¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring"><span class="toc-number">1.2.</span> <span class="toc-text">Spring</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IOC%E5%AE%B9%E5%99%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">IOCå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EXML%E7%AE%A1%E7%90%86bean"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">åŸºäºXMLç®¡ç†bean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E4%B9%8Bsetter%E6%B3%A8%E5%85%A5"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">ä¾èµ–æ³¨å…¥ä¹‹setteræ³¨å…¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E4%B9%8B%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5"><span class="toc-number">1.2.1.4.</span> <span class="toc-text">ä¾èµ–æ³¨å…¥ä¹‹æ„é€ å™¨æ³¨å…¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%80%BC%E5%A4%84%E7%90%86"><span class="toc-number">1.2.1.5.</span> <span class="toc-text">ç‰¹æ®Šå€¼å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E4%B8%BAnull"><span class="toc-number">1.2.1.5.1.</span> <span class="toc-text">ä¸ºå±æ€§èµ‹å€¼ä¸ºnull</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#xml%E5%AE%9E%E4%BD%93"><span class="toc-number">1.2.1.5.2.</span> <span class="toc-text">xmlå®ä½“</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E7%B1%BB%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.1.5.3.</span> <span class="toc-text">ä¸ºç±»ç±»å‹å±æ€§èµ‹å€¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.1.5.4.</span> <span class="toc-text">ä¸ºæ•°ç»„ç±»å‹å±æ€§èµ‹å€¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.1.5.5.</span> <span class="toc-text">ä¸ºé›†åˆç±»å‹èµ‹å€¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BAmap%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC"><span class="toc-number">1.2.1.5.6.</span> <span class="toc-text">ä¸ºmapé›†åˆç±»å‹çš„å±æ€§èµ‹å€¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#p%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">1.2.1.5.7.</span> <span class="toc-text">på‘½åç©ºé—´</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-number">1.2.1.6.</span> <span class="toc-text">Springç®¡ç†æ•°æ®æº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">1.2.1.7.</span> <span class="toc-text">beançš„ä½œç”¨åŸŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.2.1.8.</span> <span class="toc-text">beanç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FactoryBean"><span class="toc-number">1.2.1.9.</span> <span class="toc-text">FactoryBean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Exml%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">1.2.1.10.</span> <span class="toc-text">åŸºäºxmlçš„è‡ªåŠ¨è£…é…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%AE%A1%E7%90%86bean"><span class="toc-number">1.2.1.11.</span> <span class="toc-text">åŸºäºæ³¨è§£ç®¡ç†bean</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%AB%E6%8F%8F"><span class="toc-number">1.2.1.11.1.</span> <span class="toc-text">æ‰«æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D"><span class="toc-number">1.2.1.11.2.</span> <span class="toc-text">åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AOP"><span class="toc-number">1.2.2.</span> <span class="toc-text">AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E6%A8%A1%E6%8B%9F"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">åœºæ™¯æ¨¡æ‹Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">1.2.2.1.1.</span> <span class="toc-text">é™æ€ä»£ç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">1.2.2.1.2.</span> <span class="toc-text">åŠ¨æ€ä»£ç†</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#AOP%E6%A6%82%E5%BF%B5"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">AOPæ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD"><span class="toc-number">1.2.2.2.1.</span> <span class="toc-text">ç›¸å…³æœ¯è¯­</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">1.2.2.2.2.</span> <span class="toc-text">ä½œç”¨</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84AOP"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">åŸºäºæ³¨è§£çš„AOP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%87%E9%9D%A2%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">1.2.2.3.1.</span> <span class="toc-text">åˆ‡é¢çš„ä¼˜å…ˆçº§</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EXML%E7%9A%84AOP"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">åŸºäºXMLçš„AOP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.2.3.</span> <span class="toc-text">å£°æ˜å¼äº‹åŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EXML%E7%9A%84%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringMVC"><span class="toc-number">1.3.</span> <span class="toc-text">SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.1.</span> <span class="toc-text">åŸºæœ¬é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEweb-xml"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">é…ç½®web.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%AF%B7%E6%B1%82%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BASpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">åˆ›å»ºSpringMVCçš„é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">åˆ›å»ºæ§åˆ¶å™¨æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">æµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestMapping%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.3.2.</span> <span class="toc-text">@RequestMappingæ³¨è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">@RequestMappingæ³¨è§£çš„åŠŸèƒ½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E6%B3%A8%E8%A7%A3%E5%8F%AF%E6%A0%87%E8%AF%86%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">@RequestMappingæ³¨è§£å¯æ ‡è¯†çš„ä½ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E7%9A%84value%E5%B1%9E%E6%80%A7"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">@RequestMappingçš„valueå±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E7%9A%84method%E5%B1%9E%E6%80%A7"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">@RequestMappingçš„methodå±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E7%9A%84param%E5%B1%9E%E6%80%A7"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">@RequestMappingçš„paramå±æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RequestMapping%E7%9A%84headers%E5%B1%9E%E6%80%A7-%E4%BA%86%E8%A7%A3"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">@RequestMappingçš„headerså±æ€§(äº†è§£)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringMVC%E6%94%AF%E6%8C%81ant%E9%A3%8E%E6%A0%BC%E7%9A%84%E8%B7%AF%E5%BE%84"><span class="toc-number">1.3.2.7.</span> <span class="toc-text">SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringMVC%E6%94%AF%E6%8C%81%E8%B7%AF%E5%BE%84%E4%B8%AD%E7%9A%84%E5%8D%A0%E4%BD%8D%E7%AC%A6-%E9%87%8D%E7%82%B9"><span class="toc-number">1.3.2.8.</span> <span class="toc-text">SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦(é‡ç‚¹)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.3.</span> <span class="toc-text">SpringMVCè·å–è¯·æ±‚å‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RequestHeader%E5%92%8C-CookieValue"><span class="toc-number">1.3.4.</span> <span class="toc-text">@RequestHeaderå’Œ@CookieValue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87pojo%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number">1.3.5.</span> <span class="toc-text">é€šè¿‡pojoè·å–è¯·æ±‚å‚æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">1.3.6.</span> <span class="toc-text">è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.7.</span> <span class="toc-text">åŸŸå¯¹è±¡å…±äº«æ•°æ®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ServletAPI%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ModelAndView%E5%90%91request%E5%9F%9F%E5%AF%B9%E8%B1%A1%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Model%E5%90%91%E8%AF%B7%E6%B1%82%E5%9F%9F%E4%B8%AD%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.7.3.</span> <span class="toc-text">ä½¿ç”¨Modelå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8ModelMap%E5%90%91%E8%AF%B7%E6%B1%82%E5%9F%9F%E4%B8%AD%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.7.4.</span> <span class="toc-text">ä½¿ç”¨ModelMapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8map%E5%90%91%E8%AF%B7%E6%B1%82%E5%9F%9F%E4%B8%AD%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.7.5.</span> <span class="toc-text">ä½¿ç”¨mapå‘è¯·æ±‚åŸŸä¸­å…±äº«æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Model%E5%92%8CModelMap%E5%92%8Cmap%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.3.7.6.</span> <span class="toc-text">Modelå’ŒModelMapå’Œmapçš„å…³ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%91session%E5%9F%9F%E5%92%8Capplication%E5%9F%9F%E4%B8%AD%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.7.7.</span> <span class="toc-text">å‘sessionåŸŸå’ŒapplicationåŸŸä¸­å…±äº«æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E7%9A%84%E8%A7%86%E5%9B%BE"><span class="toc-number">1.3.8.</span> <span class="toc-text">SpringMVCçš„è§†å›¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ThymeleafView"><span class="toc-number">1.3.8.1.</span> <span class="toc-text">ThymeleafView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#InternalResourceView"><span class="toc-number">1.3.8.2.</span> <span class="toc-text">InternalResourceView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91%E8%A7%86%E5%9B%BERedirectView"><span class="toc-number">1.3.8.3.</span> <span class="toc-text">é‡å®šå‘è§†å›¾RedirectView</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E6%8E%A7%E5%88%B6%E5%99%A8view-controller"><span class="toc-number">1.3.8.4.</span> <span class="toc-text">è§†å›¾æ§åˆ¶å™¨view-controller</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RESTful"><span class="toc-number">1.3.9.</span> <span class="toc-text">RESTful</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RESTful%E7%AE%80%E4%BB%8B"><span class="toc-number">1.3.9.1.</span> <span class="toc-text">RESTfulç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RESTful%E6%A8%A1%E6%8B%9FCRUD"><span class="toc-number">1.3.9.2.</span> <span class="toc-text">RESTfulæ¨¡æ‹ŸCRUD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RESTful%E6%A1%88%E4%BE%8B"><span class="toc-number">1.3.9.3.</span> <span class="toc-text">RESTfulæ¡ˆä¾‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E5%A4%84%E7%90%86ajax%E8%AF%B7%E6%B1%82"><span class="toc-number">1.3.10.</span> <span class="toc-text">SpringMVCå¤„ç†ajaxè¯·æ±‚</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#axios"><span class="toc-number">1.3.10.1.</span> <span class="toc-text">axios</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.3.11.</span> <span class="toc-text">æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.3.11.1.</span> <span class="toc-text">æ–‡ä»¶ä¸‹è½½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.3.11.2.</span> <span class="toc-text">æ–‡ä»¶ä¸Šä¼ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E9%87%8D%E5%90%8D%E9%97%AE%E9%A2%98"><span class="toc-number">1.3.11.3.</span> <span class="toc-text">è§£å†³æ–‡ä»¶ä¸Šä¼ é‡åé—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">1.3.12.</span> <span class="toc-text">æ‹¦æˆªå™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">1.3.12.1.</span> <span class="toc-text">é…ç½®æ‹¦æˆªå™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.3.12.2.</span> <span class="toc-text">æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">1.3.13.</span> <span class="toc-text">å¼‚å¸¸å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E6%B3%A8%E8%A7%A3%E9%85%8D%E7%BD%AESpringMVC"><span class="toc-number">1.3.14.</span> <span class="toc-text">åŸºäºæ³¨è§£é…ç½®SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%88%9D%E5%A7%8B%E5%8C%96%E7%B1%BB-%E4%BB%A3%E6%9B%BFweb-xml"><span class="toc-number">1.3.14.1.</span> <span class="toc-text">åˆ›å»ºåˆå§‹åŒ–ç±»,ä»£æ›¿web.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAWebConfig%E6%9D%A5%E4%BB%A3%E6%9B%BFSpringMVC%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.14.2.</span> <span class="toc-text">åˆ›å»ºWebConfigæ¥ä»£æ›¿SpringMVCé…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringConfig%E4%BB%A3%E6%9B%BFSpring%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.14.3.</span> <span class="toc-text">SpringConfigä»£æ›¿Springçš„é…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringMVC%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">1.3.15.</span> <span class="toc-text">SpringMVCæ‰§è¡Œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SSM%E6%95%B4%E5%90%88"><span class="toc-number">1.4.</span> <span class="toc-text">SSMæ•´åˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ContextLoaderListener"><span class="toc-number">1.4.1.</span> <span class="toc-text">ContextLoaderListener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.4.2.</span> <span class="toc-text">å‡†å¤‡å·¥ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pom-xml"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">pom.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SQL"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">SQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#web-xml-WebInit-java"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">web.xml(WebInit.java)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E7%B1%BB-WebConfig"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">SpringMVCçš„é…ç½®ç±»-WebConfig</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring%E7%9A%84%E9%85%8D%E7%BD%AE%E7%B1%BB-SpringConfig"><span class="toc-number">1.4.2.5.</span> <span class="toc-text">Springçš„é…ç½®ç±»-SpringConfig</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%AD%E6%A1%A3%E9%87%8D%E5%BC%80"><span class="toc-number">1.4.3.</span> <span class="toc-text">æ–­æ¡£é‡å¼€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pom-xml-1"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">pom.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#web-xml"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">web.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringMVC%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">SpringMVCçš„é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AESpring%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.3.4.</span> <span class="toc-text">é…ç½®Springçš„é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MyBatis%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.3.5.</span> <span class="toc-text">MyBatisçš„é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%BB%A3%E7%A0%81"><span class="toc-number">1.4.3.6.</span> <span class="toc-text">å…¶ä»–ä»£ç </span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/aab9657b.html" title="Idea">Idea</a><time datetime="2024-12-15T01:55:47.000Z" title="å‘è¡¨äº 2024-12-15 09:55:47">2024-12-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5a495709.html" title="25æ–°å¹´Plan"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20241117194636.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="25æ–°å¹´Plan"/></a><div class="content"><a class="title" href="/posts/5a495709.html" title="25æ–°å¹´Plan">25æ–°å¹´Plan</a><time datetime="2024-11-17T11:40:24.000Z" title="å‘è¡¨äº 2024-11-17 19:40:24">2024-11-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/44a32457.html" title="å°šç¡…è°·Javaé¢è¯•é¢˜"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/Snipaste_2024-04-30_23-38-56.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å°šç¡…è°·Javaé¢è¯•é¢˜"/></a><div class="content"><a class="title" href="/posts/44a32457.html" title="å°šç¡…è°·Javaé¢è¯•é¢˜">å°šç¡…è°·Javaé¢è¯•é¢˜</a><time datetime="2024-07-23T03:46:29.000Z" title="å‘è¡¨äº 2024-07-23 11:46:29">2024-07-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/65e770b4.html" title="Androidå¼€å‘"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/Courseplan.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Androidå¼€å‘"/></a><div class="content"><a class="title" href="/posts/65e770b4.html" title="Androidå¼€å‘">Androidå¼€å‘</a><time datetime="2024-07-09T09:41:49.000Z" title="å‘è¡¨äº 2024-07-09 17:41:49">2024-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f9ea30d.html" title="Electronå…¥é—¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/20230604101249.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Electronå…¥é—¨"/></a><div class="content"><a class="title" href="/posts/f9ea30d.html" title="Electronå…¥é—¨">Electronå…¥é—¨</a><time datetime="2024-06-25T03:08:48.000Z" title="å‘è¡¨äº 2024-06-25 11:08:48">2024-06-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜" title="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="æœ¬ç«™ä½¿ç”¨AnZhiYuä¸»é¢˜"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡" title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡"/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="æœ¬ç«™ä½¿ç”¨vercelæ‰˜ç®¡éƒ¨ç½²" title="æœ¬ç«™ä½¿ç”¨vercelæ‰˜ç®¡éƒ¨ç½²"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/Hosted-Vercel.svg" alt="æœ¬ç«™ä½¿ç”¨vercelæ‰˜ç®¡éƒ¨ç½²"/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" data-title="æœ¬ç«™ç”±jsDelivræ‰˜ç®¡CDN" title="æœ¬ç«™ç”±jsDelivræ‰˜ç®¡CDN"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img01.zzmr.buzz/img/CDN-jsDelivr.svg" alt="æœ¬ç«™ç”±jsDelivræ‰˜ç®¡CDN"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20238040" style="margin-inline:5px" data-title="èŒICPå¤‡20238040å·" title="èŒICPå¤‡20238040å·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20238040-fe1384" alt="èŒICPå¤‡20238040å·"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="å®šè¥¿" target="_blank">å®šè¥¿</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="ä¸»é¢˜">ä¸»é¢˜</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s2.loli.net/2022/09/02/6rUxGoewvp5hNlB.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å‹é“¾</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> å‹äººå¸</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> ç•™è¨€æ¿</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/maps/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> å¯¼èˆª</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> æ¸¸æˆäººç”Ÿ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/staticIndex/test.html"><i class="anzhiyufont anzhiyu-icon-rocket faa-tada" style="font-size: 0.9em;"></i><span> èˆ”ç‹—æ—¥è®°</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæœ¬äºº</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 0.88rem;">AOP<sup>1</sup></a><a href="/tags/Ajax/" style="font-size: 0.88rem;">Ajax<sup>1</sup></a><a href="/tags/Algolia/" style="font-size: 0.88rem;">Algolia<sup>1</sup></a><a href="/tags/Android/" style="font-size: 0.88rem;">Android<sup>1</sup></a><a href="/tags/Axios/" style="font-size: 0.88rem;">Axios<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 0.88rem;">Docker<sup>1</sup></a><a href="/tags/Electron/" style="font-size: 0.88rem;">Electron<sup>1</sup></a><a href="/tags/JVM/" style="font-size: 0.88rem;">JVM<sup>1</sup></a><a href="/tags/MySql/" style="font-size: 0.88rem;">MySql<sup>2</sup></a><a href="/tags/Promise/" style="font-size: 0.88rem;">Promise<sup>1</sup></a><a href="/tags/Redis/" style="font-size: 0.88rem;">Redis<sup>1</sup></a><a href="/tags/SSM/" style="font-size: 0.88rem;">SSM<sup>3</sup></a><a href="/tags/Shell/" style="font-size: 0.88rem;">Shell<sup>1</sup></a><a href="/tags/SpingBoot/" style="font-size: 0.88rem;">SpingBoot<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 0.88rem;">SpringCloud<sup>1</sup></a><a href="/tags/VsCode/" style="font-size: 0.88rem;">VsCode<sup>1</sup></a><a href="/tags/Vue/" style="font-size: 0.88rem;">Vue<sup>1</sup></a><a href="/tags/mag68/" style="font-size: 0.88rem;">mag68<sup>1</sup></a><a href="/tags/maven/" style="font-size: 0.88rem;">maven<sup>1</sup></a><a href="/tags/uni-app/" style="font-size: 0.88rem;">uni-app<sup>2</sup></a><a href="/tags/vue3/" style="font-size: 0.88rem;">vue3<sup>1</sup></a><a href="/tags/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" style="font-size: 0.88rem;">ä¸»ä»å¤åˆ¶<sup>1</sup></a><a href="/tags/%E5%9B%BE%E5%BA%8A/" style="font-size: 0.88rem;">å›¾åºŠ<sup>1</sup></a><a href="/tags/%E5%9F%9F%E5%90%8D/" style="font-size: 0.88rem;">åŸŸå<sup>1</sup></a><a href="/tags/%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8/" style="font-size: 0.88rem;">å¯¹è±¡å­˜å‚¨<sup>1</sup></a><a href="/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/" style="font-size: 0.88rem;">å¹´åº¦æ€»ç»“<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91/" style="font-size: 0.88rem;">å¼€å‘<sup>1</sup></a><a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 0.88rem;">æ’åº<sup>1</sup></a><a href="/tags/%E6%97%85%E8%A1%8C/" style="font-size: 0.88rem;">æ—…è¡Œ<sup>6</sup></a><a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 0.88rem;">æ‚è°ˆ<sup>1</sup></a><a href="/tags/%E6%A0%87%E7%AD%BE%E5%A4%96%E6%8C%82/" style="font-size: 0.88rem;">æ ‡ç­¾å¤–æŒ‚<sup>1</sup></a><a href="/tags/%E6%AF%95%E8%AE%BE/" style="font-size: 0.88rem;">æ¯•è®¾<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">çº¿ç¨‹<sup>1</sup></a><a href="/tags/%E7%BE%8E%E5%8C%96/" style="font-size: 0.88rem;">ç¾åŒ–<sup>1</sup></a><a href="/tags/%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96/" style="font-size: 0.88rem;">è‹ç©¹å¤–å–<sup>1</sup></a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 0.88rem;">é›†åˆ<sup>1</sup></a><a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 0.88rem;">é¢è¯•<sup>9</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// æ¶ˆé™¤æ§åˆ¶å°æ‰“å°
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //åœ¨æ¢å¤å‰è¾“å‡ºæ—¥å¿—
  const grt = new Date("09/02/2022 00:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `æ¬¢è¿ä½¿ç”¨å®‰çŸ¥é±¼!`,
    `ç”Ÿæ´»æ˜æœ—, ä¸‡ç‰©å¯çˆ±`,
    `
        
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
      â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•
        
        `,
    "å·²ä¸Šçº¿",
    dnum,
    "å¤©",
    "Â©2020 By å®‰çŸ¥é±¼ V1.6.1",
  ];
  const ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€å°ç¬¨è›‹ã€‘.`, `Photo captured: `, `ğŸ¤ª`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c ä½ å¥½ï¼Œå°ç¬¨è›‹.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c âš¡ Powered by å®‰çŸ¥é±¼ %c ä½ æ­£åœ¨è®¿é—® å®šè¥¿ çš„åšå®¢.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c ä½ å·²æ‰“å¼€æ§åˆ¶å°.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.56.5/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.zzmr.buzz/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.21/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.zzmr.buzz/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[å›¾ç‰‡]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[é“¾æ¥]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[ä»£ç ]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.zzmr.buzz/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "æ— æ³•è·å–è¯„è®ºï¼Œè¯·ç¡®è®¤ç›¸å…³é…ç½®æ˜¯å¦æ­£ç¡®"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.21/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'æ²¡æœ‰è¯„è®º'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">é€šçŸ¥</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">ä½ å¥½å‘€</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>